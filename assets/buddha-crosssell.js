buddhaCrosssell.loadScripts=function(jQueryCrosssell) {
buddhaCrosssell.themeFixesBefore = function(){ if(buddhaCrosssell.template == "product") { var styles = ""; if (getSchemaValue("enableRecentlyViewedProducts")) { styles += "#shopify-section-recently-viewed {display: none !important;}"; styles += "#recently-viewed-products {display: none !important;}"; } if (getSchemaValue("enableAlsoBought") || getSchemaValue("enableYouMayAlsoLike")) styles += "#shopify-section-product-recommendations {display: none !important;}"; jQueryCrosssell("head").append("<style id=\"bcsellThemeStyle\">" + styles + "</style>"); } }
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},formatMoney=function(s,e){function l(s,e){return void 0===s?e:s}function t(s,e,t,r){if(e=l(e,2),t=l(t,","),r=l(r,"."),isNaN(s)||null==s)return 0;s=(s/100).toFixed(e);var o=s.split(".");return o[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t)+(o[1]?r+o[1]:"")}"string"==typeof s&&(s=s.replace(".",""));var r="",o=/\{\{\s*(\w+)\s*\}\}/,a=e;switch(a.match(o)[1]){case"amount":r=t(s,2);break;case"amount_no_decimals":r=t(s,0);break;case"amount_with_comma_separator":r=t(s,2,".",",");break;case"amount_no_decimals_with_comma_separator":r=t(s,0,".",",")}return a.replace(o,r)},getHandleIndexInDb=function(s){var e=-1;for(var l in buddhaCrosssell.alsoBoughtDb)if(buddhaCrosssell.alsoBoughtDb.hasOwnProperty(l)&&buddhaCrosssell.alsoBoughtDb[l][0]==s){e=l;break}return e},debounce=function(s,e){var l;return function(){clearTimeout(l),l=setTimeout(s,e)}},shuffleArray=function(s){for(var e=s.length-1;e>0;e--){var l=Math.floor(Math.random()*(e+1)),t=s[e];s[e]=s[l],s[l]=t}},getWidgetVariantInfo=function(s,e){var l=null,t=".bcsell-section-"+s+" .bcsell-item-"+e,r=buddhaCrosssell.widgets[s][e].variants,o=jQueryCrosssell(t+" #bcsell-select-1 :selected").html(),a=jQueryCrosssell(t+" #bcsell-select-2 :selected").html(),d=jQueryCrosssell(t+" #bcsell-select-3 :selected").html();return void 0!==r[o]&&void 0!==r[o][a]&&void 0!==r[o][a][d]?l=r[o][a][d]:void 0!==r[o]&&void 0!==r[o][a]?l=r[o][a]:void 0!==r[o]&&(l=r[o]),l},getSchemaValue=function(s){if(void 0!==buddhaCrosssell.schema[s])return buddhaCrosssell.schema[s];if(["enableZoomAnimation","enableSlideshowAnimation","enableCrop","enableVariants","enablePrice","enableAlsoBoughtStars"].indexOf(s)>-1)return!0;var e=/mc([0-9]+?)WidgetTitle/,l=e.exec(s);if(l){var t=parseInt(l[1]);return buddhaCrosssell.schemaMCE[t].title}return!1},setCookie=function(s,e,l){var t="";if(l){var r=new Date;r.setTime(r.getTime()+24*l*60*60*1e3),t="; expires="+r.toUTCString()}document.cookie=s+"="+(e||"")+t+"; domain="+window.location.hostname+"; path=/"},getCookie=function(s){for(var e=s+"=",l=document.cookie.split(";"),t=0;t<l.length;t++){for(var r=l[t];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""},storeProductToRecentlyViewedQueue=function(){var s=buddhaCrosssell.getRecentlyViewedQueue();if("product"==buddhaCrosssell.template){var e=jQueryCrosssell.inArray(buddhaCrosssell.productHandle,s);e>=0&&s.splice(e,1),s.push(buddhaCrosssell.productHandle),s=s.splice(-4,4).join(" "),setCookie("cross_sell_pro_recently_viewed",s,2)}},configureProductImagesCropType=function(s){var e;void 0!=s?e=s+" .bcsell-img img:not(.bcsell-crop-wide,.bcsell-crop-high)":(e=".bcsell-item .bcsell-img img",jQueryCrosssell(e).removeClass("bcsell-crop-wide").removeClass("bcsell-crop-high")),getSchemaValue("enableCrop")&&jQueryCrosssell(e).each(function(){var s=jQueryCrosssell(this).get(0),e=s.naturalWidth,l=s.naturalHeight;if(0!=e){l/e>1.3?s.classList.add("bcsell-crop-high"):s.classList.add("bcsell-crop-wide")}})};buddhaCrosssell.getRecentlyViewedQueue=function(){var s=getCookie("cross_sell_pro_recently_viewed");return s=null!==s&&""!=s?s.split(" "):[]},buddhaCrosssell.recreateDesign=function(s){if("all"==s||"general"==s){var e='<style id="bcsellDesignStylesGeneral">';0!=getSchemaValue("enableZoomAnimation")&&0!=buddhaCrosssell.zoomAnimation||(e+="#buddha-crosssell .bcsell-item .bcsell-img a img {            transform: translateX(-50%) translateY(-50%) scale(1) !important;        }");var l=getSchemaValue("addToCartText");if(l&&jQueryCrosssell("#buddha-crosssell .bcsell-add-to-cart > a").html(l),0==getSchemaValue("enablePrice")&&(e+="#buddha-crosssell .bcsell-product-price-old,         #buddha-crosssell .bcsell-product-price-old-panel {display: none !important;}         #buddha-crosssell .bcsell-product-price,         #buddha-crosssell .bcsell-product-price-panel {display: none !important;}"),0==getSchemaValue("enableVariants")&&(e+="#buddha-crosssell .bcsell-variants {display: block !important; height: 0px !important; visibility: hidden;}"),e+="</style>",jQueryCrosssell("#bcsellDesignStylesGeneral").remove(),jQueryCrosssell("head").append(e),getSchemaValue("enableAlsoBoughtStars")&&jQueryCrosssell(".bcsell-product-rating-stars").removeClass("bcsell-hidden"),1==buddhaCrosssell.previewMode){buddhaCrosssell.stopStartWidgetImageSlideshow(".bcsell-item",getSchemaValue("enableSlideshowAnimation")),0==getSchemaValue("enableZoomAnimation")?$(".bcsell-item .bcsell-img img").attr("style","transition: opacity 1s ease-out 0s; -webkit-transition:opacity 1s ease-out 0s;"):$(".bcsell-item .bcsell-img img").removeAttr("style");var e='<style id="bcsellDesignPerWidgetStyles">';0==getSchemaValue("enableAlsoBoughtStars")&&(e+="#buddha-crosssell .bcsell-product-rating-stars {display: none !important;}"),e+="</style>",jQueryCrosssell("#bcsellDesignPerWidgetStyles").remove(),jQueryCrosssell("head").append(e)}}if("all"==s||"colors"==s){var e='<style id="bcsellDesignStylesColors">',t=getSchemaValue("widgetTitleColor");if(0!=t&&(e+="#buddha-crosssell .bcsell-widget-title {color: "+t+" !important;}"),t=getSchemaValue("widgetAddToCartColor"),0!=t&&(e+="#buddha-crosssell .bcsell-add-to-cart a {background: "+t+" !important; text-shadow: 1px 1px 0 "+t+" !important;}"),0!=(t=getSchemaValue("widgetProductNameColor"))){var r=255,o=t.substr(1).match(7==t.length?/(\S{2})/g:/(\S{1})/g);if(o)var a=parseInt(o[0],16),d=parseInt(o[1],16),i=parseInt(o[2],16);void 0!==a&&(r=(299*a+587*d+114*i)/1e3);var n="";r<120&&(n="text-shadow: none !important;"),e+="#buddha-crosssell .bcsell-item .bcsell-product-name,#buddha-crosssell .bcsell-item .bcsell-product-price,#buddha-crosssell .bcsell-item .bcsell-product-price-old{color: "+t+" !important;"+n+"}"}e+="</style>",jQueryCrosssell("#bcsellDesignStylesColors").remove(),jQueryCrosssell("head").append(e)}if("all"==s||"widgetsLoaded"==s){var e='<style id="bcsellDesignStylesAfterLoad">';1==buddhaCrosssell.previewMode&&configureProductImagesCropType(),jQueryCrosssell("#buddha-crosssell .bcsell-section").each(function(s){var s="#buddha-crosssell .bcsell-section:nth-child("+(s+1)+")";jQueryCrosssell(s+" .bcsell-item").each(function(l){var t=jQueryCrosssell(this).find(".bcsell-panel").height()-2;1==buddhaCrosssell.previewMode&&jQueryCrosssell(s+" .bcsell-item").is(".bcsell-zoom")&&(t=(t+2)/1.1-2),e+=s+" .bcsell-item:nth-child("+(l+1)+").bcsell-hover .bcsell-panel {           transform: translateY(-"+t+"px) !important;           }"})}),e+="</style>",jQueryCrosssell("#bcsellDesignStylesAfterLoad").remove(),jQueryCrosssell("head").append(e)}},buddhaCrosssell.MCECustomPageSuport=function(){if(void 0!==buddhaCrosssell.schemaMCE)for(var s=0;s<buddhaCrosssell.schemaMCE.length;s++)if(buddhaCrosssell.schemaMCE[s].title.indexOf("::page::")>=0){var e=buddhaCrosssell.schemaMCE[s].title.split("::page::");buddhaCrosssell.schemaMCE[s].title=e[0],buddhaCrosssell.schemaMCE[s].pages=["specific-pages"],buddhaCrosssell.schemaMCE[s]["specific-pages"]=[e[1].trim()]}},buddhaCrosssell.initWidgetSections=function(){buddhaCrosssell.productHandles=[],buddhaCrosssell.triedHandles=[];var s={alsoBought:["product","cart"],youMayAlsoLike:["product","cart"],newestProducts:["index"],bestSellingProducts:["index"],recentlyViewedProducts:["product","collection","cart"]};if(getSchemaValue("enableManualCollection")){buddhaCrosssell.MCECustomPageSuport();for(var e=0,l=0;l<buddhaCrosssell.schemaMCE.length;l++){if(buddhaCrosssell.schemaMCE[l].pages.indexOf(buddhaCrosssell.template)>=0||"product"==buddhaCrosssell.template&&buddhaCrosssell.schemaMCE[l].pages.indexOf("specific-products")>=0&&Object.values(buddhaCrosssell.schemaMCE[l]["specific-products"]).indexOf(buddhaCrosssell.productHandle)>=0||"collection"==buddhaCrosssell.template&&buddhaCrosssell.schemaMCE[l].pages.indexOf("specific-collections")>=0&&Object.values(buddhaCrosssell.schemaMCE[l]["specific-collections"]).indexOf(buddhaCrosssell.collectionHandle)>=0||"page"==buddhaCrosssell.template&&buddhaCrosssell.schemaMCE[l].pages.indexOf("specific-pages")>=0&&Object.values(buddhaCrosssell.schemaMCE[l]["specific-pages"]).indexOf(buddhaCrosssell.pageHandle)>=0){var t=Object.values(buddhaCrosssell.schemaMCE[l].products);buddhaCrosssell.productHandles["mc"+e]=t.concat(buddhaCrosssell.productsFromCollection.concat(buddhaCrosssell.randomProducts.concat(t.length))),buddhaCrosssell.productHandles["mc"+e]=buddhaCrosssell.productHandles["mc"+e].filter(function(s,l){return buddhaCrosssell.productHandles["mc"+e].indexOf(s)==l})}e++}}if(-1!=jQueryCrosssell.inArray(buddhaCrosssell.template,s.alsoBought)&&getSchemaValue("enableAlsoBought")){var r=getHandleIndexInDb(buddhaCrosssell.productHandle);if(buddhaCrosssell.productHandles.ab=[],-1!=r)for(var o=buddhaCrosssell.alsoBoughtDb[r],a=1;a<o.length;a++)buddhaCrosssell.productHandles.ab.push(buddhaCrosssell.alsoBoughtDb[o[a]][0]);buddhaCrosssell.productHandles.ab=buddhaCrosssell.productHandles.ab.concat(buddhaCrosssell.productsFromCollection.concat(buddhaCrosssell.randomProducts)),buddhaCrosssell.productHandles.ab=buddhaCrosssell.productHandles.ab.filter(function(s,e){return buddhaCrosssell.productHandles.ab.indexOf(s)==e})}-1!=jQueryCrosssell.inArray(buddhaCrosssell.template,s.youMayAlsoLike)&&getSchemaValue("enableYouMayAlsoLike")&&(shuffleArray(buddhaCrosssell.youMayAlsoLikeProducts),buddhaCrosssell.productHandles.ymal=buddhaCrosssell.youMayAlsoLikeProducts,buddhaCrosssell.productHandles.ymal=buddhaCrosssell.productHandles.ymal.concat(buddhaCrosssell.productsFromCollection.concat(buddhaCrosssell.randomProducts)),buddhaCrosssell.productHandles.ymal=buddhaCrosssell.productHandles.ymal.filter(function(s,e){return buddhaCrosssell.productHandles.ymal.indexOf(s)==e})),-1!=jQueryCrosssell.inArray(buddhaCrosssell.template,s.bestSellingProducts)&&getSchemaValue("enableBestSellingProducts")&&(buddhaCrosssell.productHandles.bs=buddhaCrosssell.bestSellingProducts.slice()),-1!=jQueryCrosssell.inArray(buddhaCrosssell.template,s.newestProducts)&&getSchemaValue("enableNewestProducts")&&(buddhaCrosssell.productHandles.np=buddhaCrosssell.newestProducts.slice()),-1!=jQueryCrosssell.inArray(buddhaCrosssell.template,s.recentlyViewedProducts)&&getSchemaValue("enableRecentlyViewedProducts")&&(buddhaCrosssell.productHandles.rv=buddhaCrosssell.getRecentlyViewedQueue()),"product"==buddhaCrosssell.template&&storeProductToRecentlyViewedQueue(),void 0!==buddhaCrosssell.themeFixesInitSections&&buddhaCrosssell.themeFixesInitSections();for(var d=Object.keys(buddhaCrosssell.productHandles),a=0;a<d.length;a++)0==buddhaCrosssell.productHandles[d[a]].length&&delete buddhaCrosssell.productHandles[d[a]];return Object.keys(buddhaCrosssell.productHandles).length},buddhaCrosssell.buildWidgets=function(){for(var s=[],e=Object.keys(buddhaCrosssell.productHandles),l=0;l<e.length;l++){var t=e[l];jQueryCrosssell("#buddha-crosssell .bcsell-section-uninit").length>0?jQueryCrosssell("#buddha-crosssell .bcsell-section-uninit").removeClass("bcsell-section-uninit").addClass("bcsell-section-"+t):jQueryCrosssell("#buddha-crosssell .bcsell-section").last().clone().attr("class","").addClass("bcsell-section bcsell-section-"+t).appendTo("#buddha-crosssell");var r=getSchemaValue(t+"WidgetTitle");if(r&&jQueryCrosssell(".bcsell-section-"+t+" .bcsell-header").html('<h2 class="bcsell-widget-title">'+r+"</h2>"),buddhaCrosssell.widgets[t]=[],s[t]=0,1==buddhaCrosssell.previewMode)setTimeout(function(){buddhaCrosssell.loadProductOnWidget(buddhaCrosssell.previewProduct,t,0),buddhaCrosssell.widgetsLoadedCallback()},200);else for(i=0;i<4;i++){var o=0,a=buddhaCrosssell.productHandles[t].length-1;if("mc"==t.substring(0,2)&&buddhaCrosssell.productHandles[t][a]>0)o=buddhaCrosssell.productHandles[t][0],buddhaCrosssell.productHandles[t][a]--;else if("mc"!=t.substring(0,2))for(o=buddhaCrosssell.productHandles[t][0];void 0!==o&&0!=o&&jQueryCrosssell.inArray(o,buddhaCrosssell.triedHandles)>=0&&"rv"!=t;)buddhaCrosssell.productHandles[t].splice(0,1),o=buddhaCrosssell.productHandles[t][0];void 0!==o&&0!=o?function(e,l){jQueryCrosssell.ajax({dataType:"json",url:buddhaCrosssell.shopUrl+"/products/"+buddhaCrosssell.productHandles[e][0]+".js",success:function(t){s[e]++,buddhaCrosssell.loadProductOnWidget(t,e,l);var r=!0;for(var o in s)if(4!=s[o]){r=!1;break}r&&buddhaCrosssell.widgetsLoadedCallback()},error:function(){s[e]++;var l=!0;for(var t in s)if(4!=s[t]){l=!1;break}l&&buddhaCrosssell.widgetsLoadedCallback()}}),buddhaCrosssell.triedHandles.push(buddhaCrosssell.productHandles[e].splice(0,1)[0])}(t,i):(s[t]++,jQueryCrosssell(".bcsell-section-"+t+" .bcsell-item-"+i).attr("style","display: none;"))}}buddhaCrosssell.recreateDesign("general"),buddhaCrosssell.recreateDesign("colors"),window.navigator.userAgent.indexOf("Edge/")>-1&&jQueryCrosssell("head").append("<style>        #buddha-crosssell .bcsell-list {           transform: initial !important;         }</style>");for(var d=["product|bspace|#judgeme_product_reviews","product|bspace|#shopify-ali-review","product|bspace|#shopify-product-reviews","product|a|#shopify-section-product-template","product|a|#shopify-section-product-page-description","product|a|.product__content","product|aspace|.product-single","product|a|.product-template__container","product|b|.product-recommendations--container","product|a|.product-template","product|a|.related-products-container .related-products","product|a|.product-container","index|a|#jas-content","index|b|#PageContainer>.page-wrap>.jdgm-carousel-wrapper","index|a|#PageContainer>.page-wrap","collection|a|#jas-content","collection|a|#CollectionSection","collection|a|#shopify-section-collection-template","collection|b|#PageContainer>.page-wrap>.jdgm-carousel-wrapper","collection|a|#PageContainer>.page-wrap","cart|a|#shopify-section-cart-template","all|b|#shopify-section-footer","all|b|.footer-wrapper","all|b|.site-footer","all|b|#jas-footer"],i=0;i<d.length;i++){var n=d[i].split("|");if((n[0]==buddhaCrosssell.template||"all"==n[0])&&jQueryCrosssell(n[2]).length&&jQueryCrosssell(n[2]).parent().is(":visible")){if("b"==n[1]){jQueryCrosssell("#buddha-crosssell").insertBefore(n[2]);break}if("a"==n[1]){jQueryCrosssell("#buddha-crosssell").insertAfter(n[2]);break}if("bspace"==n[1]){var c=jQueryCrosssell(n[2]).parent();if(c&&c.width()>800){jQueryCrosssell("#buddha-crosssell").insertBefore(n[2]);break}}else if("aspace"==n[1]){var c=jQueryCrosssell(n[2]).parent();if(c&&c.width()>800){jQueryCrosssell("#buddha-crosssell").insertAfter(n[2]);break}}}}try{void 0!==buddhaCrosssell.customerFixesInsertWidget?buddhaCrosssell.customerFixesInsertWidget():void 0!==buddhaCrosssell.themeFixesInsertWidget&&buddhaCrosssell.themeFixesInsertWidget()}catch(s){console.log("crossssell customer fix error")}jQueryCrosssell("#buddha-crosssell").removeClass("bcsell-hidden")},buddhaCrosssell.widgetsLoadedCallbackDone=function(){void 0!==buddhaCrosssell.themeFixesAfter&&buddhaCrosssell.themeFixesAfter(),void 0!==buddhaCrosssell.customerFixesAfter&&buddhaCrosssell.customerFixesAfter(),buddhaCrosssell.recreateDesign("widgetsLoaded"),buddhaCrosssell.scrollToWidgets()},buddhaCrosssell.widgetsLoadedCallback=function(){var s=jQueryCrosssell('.bcsell-item img[src=""]').length,e=0;if(s>0)for(section in buddhaCrosssell.productHandles)if(jQueryCrosssell(".bcsell-section-"+section+' .bcsell-img img[src=""]').length>0)for(var l=0;l<4;l++)if(jQueryCrosssell(".bcsell-section-"+section+" .bcsell-item-"+l+' .bcsell-img img[src=""]').length>0){var t,r=buddhaCrosssell.productHandles[section].length-1;if("mc"==section.substring(0,2)&&buddhaCrosssell.productHandles[section][r]>0)t=buddhaCrosssell.productHandles[section][0],buddhaCrosssell.productHandles[section][r]--;else for(t=buddhaCrosssell.productHandles[section][0];void 0!==t&&0!=t&&jQueryCrosssell.inArray(t,buddhaCrosssell.triedHandles)>=0&&"rv"!=section;)buddhaCrosssell.productHandles[section].splice(0,1),t=buddhaCrosssell.productHandles[section][0];void 0!==t?(!function(l,r){jQueryCrosssell.ajax({dataType:"json",url:buddhaCrosssell.shopUrl+"/products/"+t+".js",success:function(t){e++,buddhaCrosssell.loadProductOnWidget(t,l,r),e==s&&(0==buddhaCrosssell.showOutOfStockProducts?buddhaCrosssell.outOfStockProductsCheck():buddhaCrosssell.widgetsLoadedCallbackDone())},error:function(){++e==s&&(0==buddhaCrosssell.showOutOfStockProducts?buddhaCrosssell.outOfStockProductsCheck():buddhaCrosssell.widgetsLoadedCallbackDone())}})}(section,l),buddhaCrosssell.triedHandles.push(buddhaCrosssell.productHandles[section].splice(0,1)[0])):(jQueryCrosssell(".bcsell-section-"+section+" .bcsell-item-"+l).hide(),e++)}0!=s&&s!=e||(0==buddhaCrosssell.showOutOfStockProducts?buddhaCrosssell.outOfStockProductsCheck():buddhaCrosssell.widgetsLoadedCallbackDone())},buddhaCrosssell.outOfStockProductsCheck=function(){var s=jQueryCrosssell(".bcsell-item[out-of-stock]").length,e=0;for(section in buddhaCrosssell.productHandles)if(jQueryCrosssell(".bcsell-section-"+section+" .bcsell-item[out-of-stock]").length>0)for(var l=0;l<4;l++)if(jQueryCrosssell(".bcsell-section-"+section+" .bcsell-item-"+l+"[out-of-stock]").length>0){var t,r=buddhaCrosssell.productHandles[section].length-1;if("mc"==section.substring(0,2)&&buddhaCrosssell.productHandles[section][r]>0)t=buddhaCrosssell.productHandles[section][0],buddhaCrosssell.productHandles[section][r]--;else for(t=buddhaCrosssell.productHandles[section][0];void 0!==t&&0!=t&&jQueryCrosssell.inArray(t,buddhaCrosssell.triedHandles)>=0&&"rv"!=section;)buddhaCrosssell.productHandles[section].splice(0,1),t=buddhaCrosssell.productHandles[section][0];void 0!==t?function(l,r){jQueryCrosssell.ajax({dataType:"json",url:buddhaCrosssell.shopUrl+"/products/"+t+".js",success:function(t){e++,buddhaCrosssell.loadProductOnWidget(t,l,r),e==s&&buddhaCrosssell.widgetsLoadedCallbackDone()},error:function(){++e==s&&buddhaCrosssell.widgetsLoadedCallbackDone()}}),buddhaCrosssell.triedHandles.push(buddhaCrosssell.productHandles[l].splice(0,1)[0])}(section,l):e++}0!=s&&s!=e||buddhaCrosssell.widgetsLoadedCallbackDone()},buddhaCrosssell.stopStartWidgetImageSlideshow=function(s,e){if(e){var l=function(){var e=jQueryCrosssell(s+" .bcsell-img img.bcsell-show");if(1==e.length){var l=e.nextAll("img:first");0==l.length&&(l=e.parent().children("img").first()),jQueryCrosssell(s+" .bcsell-img img.bcsell-hide").removeClass("bcsell-hide"),e.removeClass("bcsell-show").addClass("bcsell-hide"),l.addClass("bcsell-show")}};void 0===buddhaCrosssell.switchImagesIntervals[s]&&(buddhaCrosssell.switchImagesIntervals[s]=setInterval(l,10300),1==buddhaCrosssell.previewMode&&l())}else void 0!==buddhaCrosssell.switchImagesIntervals[s]&&(clearInterval(buddhaCrosssell.switchImagesIntervals[s]),delete buddhaCrosssell.switchImagesIntervals[s])},buddhaCrosssell.loadProductOnWidget=function(s,e,l){var t=s.price,r=s.compare_at_price,o=".bcsell-section-"+e+" .bcsell-item-"+l,a=s.images.length;a>4&&(a=4),r>s.compare_at_price_max?r=s.compare_at_price_max:r<s.compare_at_price_min&&(r=s.compare_at_price_min),0!=buddhaCrosssell.previewMode||0!=getSchemaValue("enableSlideshowAnimation")&&0!=buddhaCrosssell.slideAnimation||a>1&&(a=1);for(var d=0;d<a-1;d++)jQueryCrosssell(o+" .bcsell-img img").last().clone().appendTo(o+" .bcsell-img a");for(var d=0;d<a;d++){var i=s.images[d],n=1,c=buddhaCrosssell.imageResolution;getSchemaValue("enableCrop")&&void 0!=s.media&&(n=s.media[d].aspect_ratio)>1.5&&(c=parseInt(320*n)+"x");var u={".jpg":"_"+c+".jpg",".JPG":"_"+c+".JPG",".png":"_"+c+".png",".PNG":"_"+c+".PNG"};for(key in u){var h=i.lastIndexOf(key);-1!=h&&(i=i.substring(0,h)+u[key]+i.substring(h+key.length))}1==buddhaCrosssell.lazyload?jQueryCrosssell(o+" .bcsell-img img:nth-child("+(d+1)+")").attr("data-src",i).attr("alt",s.title).addClass("lazyload lozad"):jQueryCrosssell(o+" .bcsell-img img:nth-child("+(d+1)+")").attr("src",i).attr("alt",s.title)}a>1&&0==buddhaCrosssell.previewMode&&(1==getSchemaValue("enableSlideshowAnimation")||1==buddhaCrosssell.slideAnimation)&&buddhaCrosssell.stopStartWidgetImageSlideshow(o,!0);var b;jQueryCrosssell(o+" .bcsell-img img").first().on("load",function(s){setTimeout(function(){configureProductImagesCropType(o),jQueryCrosssell(s.target).addClass("bcsell-show"),b=setInterval(function(){jQueryCrosssell(o+" .bcsell-img img:not(.bcsell-crop-wide,.bcsell-crop-high)").length>0?configureProductImagesCropType(o):clearInterval(b)},200),setTimeout(function(){clearInterval(b)},1500)},200)}),setTimeout(function(){0==jQueryCrosssell(o+" .bcsell-img img.bcsell-show").length&&jQueryCrosssell(o+" .bcsell-img img:first-child").addClass("bcsell-show")},3e3),r&&r>0&&r>t&&(r=formatMoney(r,buddhaCrosssell.moneyFormat),jQueryCrosssell(o+" .bcsell-product-price-old").html(r),jQueryCrosssell(o+" .bcsell-product-price-old-panel").html(r)),t=formatMoney(t,buddhaCrosssell.moneyFormat),jQueryCrosssell(o+" .bcsell-img > a").attr("href",s.url),jQueryCrosssell(o+" .bcsell-panel .bcsell-product-name").attr("href",s.url),jQueryCrosssell(o+" .bcsell-product-name").html(s.title),jQueryCrosssell(o+" .bcsell-product-price").html(t),jQueryCrosssell(o+" .bcsell-product-price-panel").html(t),(getSchemaValue("enableAlsoBoughtStars")||1==buddhaCrosssell.previewMode)&&buddhaCrosssell.refreshProductReviewRating(e,l,buddhaCrosssell.shopUrl,s.id),buddhaCrosssell.widgets[e][l]={},buddhaCrosssell.widgets[e][l].variants={};for(var p=buddhaCrosssell.widgets[e][l].variants,C=!1,d=0;d<s.variants.length;d++)if(s.variants[d].available){C=!0;var m=[s.variants[d].option1,s.variants[d].option2,s.variants[d].option3],g=[s.variants[d].id,s.variants[d].price,s.variants[d].compare_at_price];null!=m[0]&&void 0===p[m[0]]&&(p[m[0]]=1==s.options.length?g:{}),null!=m[1]&&void 0===p[m[0]][m[1]]&&(p[m[0]][m[1]]=2==s.options.length?g:{}),null!=m[2]&&void 0===p[m[0]][m[1]][m[2]]&&(p[m[0]][m[1]][m[2]]=3==s.options.length?g:{})}for(var d=1;d<=s.options.length;d++){buddhaCrosssell.refreshVariants(e,l,d);var f=s.options[d-1].name.toLowerCase();jQueryCrosssell(o+" .bcsell-variant-"+d+" .bcsell-select-label").html(f),jQueryCrosssell(o+" #bcsell-select-"+d+" option").length>0&&("title"!=f||!jQueryCrosssell(o+" #bcsell-select-"+d+' option[value="Default Title"]'))&&(jQueryCrosssell(o+" .bcsell-variant-"+d).removeClass("bcsell-hidden"),jQueryCrosssell(o+" #bcsell-select-"+d).on("change",{section:e,widgetIndex:l,selectLevel:d},function(e){for(k=e.data.selectLevel+1;k<=s.options.length;k++)buddhaCrosssell.refreshVariants(e.data.section,e.data.widgetIndex,k);buddhaCrosssell.refreshPrice(e.data.section,e.data.widgetIndex)}))}buddhaCrosssell.refreshPrice(e,l),0==buddhaCrosssell.previewMode&&jQueryCrosssell(o+" .bcsell-add-to-cart > a").on("click touchend",{section:e,widgetIndex:l,hasStock:C},function(s){return"idle"!=buddhaCrosssell.touchState&&"tap"!=buddhaCrosssell.touchState||(s.data.hasStock?buddhaCrosssell.addToCart(s.data.section,s.data.widgetIndex):window.location.href=jQueryCrosssell(o+" .bcsell-img > a").attr("href")),!1}),C||(buddhaCrosssell.showOutOfStockProducts?jQueryCrosssell(o+" .bcsell-add-to-cart > a").html("View product"):jQueryCrosssell(o).attr("out-of-stock",!0));var v=jQueryCrosssell(o+" .bcsell-panel").height()-2;jQueryCrosssell("head").append("<style>        #buddha-crosssell "+o+".bcsell-hover .bcsell-panel {          transform: translateY(-"+v+"px) !important;        }    </style"),1==buddhaCrosssell.tiltAnimation&&jQueryCrosssell(o).tilt({glare:!0,maxGlare:.1,scale:1.1,maxTilt:1.5,perspective:100})},buddhaCrosssell.addEvents=function(){jQueryCrosssell(document).on("touchstart",function(s){jQueryCrosssell(s.target).parents("#buddha-crosssell .bcsell-item").length>0&&(buddhaCrosssell.ignoreTiltEvent=!0,buddhaCrosssell.touchState="tap",setTimeout(function(){"tap"==buddhaCrosssell.touchState&&(buddhaCrosssell.touchState="touch")},250))}),jQueryCrosssell(document).on("touchend",function(s){var e=jQueryCrosssell(s.target);e.parents("#buddha-crosssell .bcsell-list").length>0?(e.parents(".bcsell-img").length>0&&0==e.parents(".bcsell-item.bcsell-hover").length&&s.preventDefault(),bcsellItem=e.closest(".bcsell-item"),bcsellItem&&"tap"==buddhaCrosssell.touchState&&(jQueryCrosssell(".bcsell-hover").removeClass("bcsell-hover").removeClass("bcsell-zoom"),jQueryCrosssell(bcsellItem).addClass("bcsell-hover"),jQueryCrosssell(bcsellItem).addClass("bcsell-zoom"),jQueryCrosssell(bcsellItem).addClass("bcsell-transform-anim"))):(0==buddhaCrosssell.previewMode||1==buddhaCrosssell.previewMode&&0==e.parents(".buddha-toggle-button").length)&&jQueryCrosssell(".bcsell-hover").removeClass("bcsell-hover").removeClass("bcsell-zoom"),buddhaCrosssell.touchState="idle",setTimeout(function(){"idle"==buddhaCrosssell.touchState&&(buddhaCrosssell.ignoreTiltEvent=!1)},200)}),1==buddhaCrosssell.previewMode&&jQueryCrosssell(document).on("click",function(s){var e=jQueryCrosssell(s.target);0!=e.parents("#buddha-crosssell .bcsell-list,.buddha-toggle-button").length||e.is("#addToCartText")||jQueryCrosssell(".bcsell-hover").removeClass("bcsell-hover").removeClass("bcsell-zoom")}),jQueryCrosssell(".bcsell-item").on("mouseenter",function(){jQueryCrosssell(this).addClass("bcsell-hover"),0==buddhaCrosssell.tiltAnimation&&jQueryCrosssell(this).addClass("bcsell-zoom").addClass("bcsell-transform-anim")}),jQueryCrosssell(".bcsell-item").on("mouseleave",function(s){var e=document.elementFromPoint(s.clientX,s.clientY);if(null==e||jQueryCrosssell(e).parents(".bcsell-item.bcsell-hover").length||1==buddhaCrosssell.previewMode&&jQueryCrosssell(".sp-container:not(.sp-hidden)").length>0)return buddhaCrosssell.ignoreTiltEvent=!0,void setTimeout(function(){buddhaCrosssell.ignoreTiltEvent=!1},50);jQueryCrosssell(".bcsell-hover").removeClass("bcsell-hover").removeClass("bcsell-zoom")}),jQueryCrosssell(window).on("scroll",debounce(function(){var s=jQueryCrosssell("#buddha-crosssell:not(.bcsell-cart-widget)");jQueryCrosssell(window).scrollTop()+jQueryCrosssell(window).height()-200>s.position().top&&s.addClass("bcsell-fade")},200)),jQueryCrosssell(window).on("resize",debounce(function(){buddhaCrosssell.adjustWidgetStyle()},200))},buddhaCrosssell.adjustWidgetStyle=function(){var s=jQueryCrosssell("#buddha-crosssell:not(.bcsell-cart-widget)").width(),e="";if(s<750)e="      #buddha-crosssell .bcsell-item {width:230px !important; }       ";else if(s<900)e="      #buddha-crosssell .bcsell-item {width:230px !important; }       #buddha-crosssell .bcsell-list {padding: 0 10% !important;}       ";else if(s<1160){var l=(s-120)/4-1;l=l<230?l:230;var t=l/230*320;e="        #buddha-crosssell .bcsell-item {width: "+l+"px !important; height: "+t+"px !important; margin: 20px 20px !important;}         #buddha-crosssell .bcsell-item-0 {margin-left: 0px !important;}         #buddha-crosssell .bcsell-item-3 {margin-right: 0px !important;}     "}else s<1440&&(e="#buddha-crosssell .bcsell-item {width:230px !important; }");jQueryCrosssell("#bcsellResizeStyle").remove(),jQueryCrosssell("head").append('<style id="bcsellResizeStyle">'+e+"</style")},buddhaCrosssell.refreshProductReviewRating=function(s,e,l,t){l=l.replace(/(^\w+:|^)\/\//,"");var r=".bcsell-section-"+s+" .bcsell-item-"+e,o={product_id:t,shop:l,version:"v4"};if(buddhaCrosssell.productsReviewInstalled)jQueryCrosssell.ajax({url:"//productreviews.shopifycdn.com/proxy/v4/reviews/product",data:o,dataType:"jsonp",timeout:2e3,success:function(s){var e=(s.product.match(/spr-icon-star"/g)||[]).length,l=(s.product.match(/spr-icon-star-half-alt/g)||[]).length;if(e>0){var t=(e+l/2)/5*100;jQueryCrosssell(r+" .bcsell-product-rating-stars-active").attr("style","width: "+t+"%;")}else jQueryCrosssell(r+" .bcsell-product-rating-stars-active").attr("style","width: 100%;")},error:function(){jQueryCrosssell(r+" .bcsell-product-rating-stars-active").attr("style","width: 100%;")}});else if(1==buddhaCrosssell.previewMode)if(buddhaCrosssell.previewProduct.ratingStars>0){var a=buddhaCrosssell.previewProduct.ratingStars/5*100;jQueryCrosssell(r+" .bcsell-product-rating-stars-active").attr("style","width: "+a+"%;")}else jQueryCrosssell(r+" .bcsell-product-rating-stars-active").attr("style","width: 0;");else jQueryCrosssell(r+" .bcsell-product-rating-stars").attr("style","display: none;")},buddhaCrosssell.refreshVariants=function(s,e,l){var t=".bcsell-section-"+s+" .bcsell-item-"+e,r=buddhaCrosssell.widgets[s][e].variants,o=[];switch(l){case 1:o=Object.keys(r);break;case 2:var a=jQueryCrosssell(t+" #bcsell-select-1 :selected").html();void 0!==r[a]&&(o=Object.keys(r[a]));break;case 3:var a=jQueryCrosssell(t+" #bcsell-select-1 :selected").html(),d=jQueryCrosssell(t+" #bcsell-select-2 :selected").html();void 0!==r[a]&&void 0!==r[a][d]&&(o=Object.keys(r[a][d]))}o.sort(function(s,e){return s-e}),jQueryCrosssell(t+" #bcsell-select-"+l).empty();for(var i=0;i<o.length;i++)jQueryCrosssell(t+" #bcsell-select-"+l).append('<option value="'+o[i]+'">'+o[i]+"</option>")},buddhaCrosssell.refreshPrice=function(s,e){var l=".bcsell-section-"+s+" .bcsell-item-"+e,t=getWidgetVariantInfo(s,e);if(null!=t){if(null!=t[2]&&t[2]>0&&t[2]>t[1]){var r=formatMoney(t[2],buddhaCrosssell.moneyFormat);jQueryCrosssell(l+" .bcsell-product-price-old-panel").html(r)}var o=formatMoney(t[1],buddhaCrosssell.moneyFormat);jQueryCrosssell(l+" .bcsell-product-price-panel").html(o)}},buddhaCrosssell.scrollToWidgets=function(){var s=window.location.hash,e="";if(0==s.indexOf("#buddha-crosssell-preview-")&&(e="[class*=bcsell-section-"+s.substr(26)+"]"),""!=e||"#buddha-crosssell-hash-show-widget"==s)if(jQueryCrosssell(window).scrollTop()<500){var l=jQueryCrosssell("#buddha-crosssell:not(.bcsell-cart-widget) "+e).offset().top;jQueryCrosssell("html, body").animate({scrollTop:l},1500),setTimeout(function(){"#buddha-crosssell-hash-show-widget"==s&&jQueryCrosssell(".bcsell-item-0").first().addClass("bcsell-hover");var t=jQueryCrosssell("#buddha-crosssell:not(.bcsell-cart-widget) "+e).offset().top;(t-l<=-50||t-l>=50)&&jQueryCrosssell("html, body").animate({scrollTop:t},500)},1300)}else"#buddha-crosssell-hash-show-widget"==s&&jQueryCrosssell(".bcsell-item-0").first().addClass("bcsell-hover")},buddhaCrosssell.addToCart=function(s,e){var l=getWidgetVariantInfo(s,e);null!=l&&jQueryCrosssell.ajax({type:"POST",url:buddhaCrosssell.shopUrl+"/cart/add.js",data:{quantity:1,id:l[0]},success:function(s){"undefined"!=typeof HsCartDrawer?HsCartDrawer.getSlideCart():location.href=buddhaCrosssell.shopUrl+"/cart"},error:function(s,e,l){"undefined"!=typeof HsCartDrawer?HsCartDrawer.getSlideCart():location.href=buddhaCrosssell.shopUrl+"/cart"}})},buddhaCrosssell.load=function(){buddhaCrosssell.imageResolution="480x",buddhaCrosssell.zoomAnimation=!0,buddhaCrosssell.slideAnimation=!0,buddhaCrosssell.tiltAnimation=!0,buddhaCrosssell.showOutOfStockProducts=!0,buddhaCrosssell.lazyload=!1,void 0!==buddhaCrosssell.themeFixesBefore&&buddhaCrosssell.themeFixesBefore(),void 0!==buddhaCrosssell.customerFixesBefore&&buddhaCrosssell.customerFixesBefore(),buddhaCrosssell.widgets={},buddhaCrosssell.switchImagesIntervals={},buddhaCrosssell.touchState="idle",buddhaCrosssell.ignoreTiltEvent=!1,buddhaCrosssell.buildWidgets(),buddhaCrosssell.adjustWidgetStyle(),buddhaCrosssell.addEvents()},buddhaCrosssell.initApp=function(s){function e(){0==--r&&(jQueryCrosssell.ajaxSetup({cache:!1}),buddhaCrosssell.load())}var l=!1;if(buddhaCrosssell.productsReviewInstalled=!1,buddhaCrosssell.previewMode=!1,jQueryCrosssell("script").each(function(){-1!=jQueryCrosssell(this).text().indexOf("crosssell-init.js?")&&(l=!0),-1!=jQueryCrosssell(this).text().indexOf("productreviews.shopifycdn.com")&&(buddhaCrosssell.productsReviewInstalled=!0)}),void 0!==s)buddhaCrosssell.previewMode=!0;else{if(0==l)return;var t=window.location.href
;if(-1!=t.indexOf("https://megamenu.buddhaapps.com/iframeWebsite")||-1!=t.indexOf("https://megamenu/iframeWebsite")||-1!=t.indexOf("https://megamenu-dev/iframeWebsite"))return void console.log("Crosssell disabled:: cannot query products in iframe")}var r=0;if(void 0!==buddhaCrosssell.loadDbScripts){buddhaCrosssell.alsoBoughtDb=[],r=buddhaCrosssell.loadDbScripts.length,jQueryCrosssell.ajaxSetup({cache:!0});for(var o=0;o<r;o++)jQueryCrosssell.getScript(buddhaCrosssell.loadDbScripts[o],e)}else buddhaCrosssell.load()},function(s){"function"==typeof define&&define.amd?define(["jquery"],s):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(e,l){return void 0===l&&(l="undefined"!=typeof window?require("jquery"):require("jquery")(e)),s(l),l}:s(jQueryCrosssell)}(function(s){return s.fn.tilt=function(e){var l=function(){this.ticking||(requestAnimationFrame(c.bind(this)),this.ticking=!0)},t=function(){var e=this;s(this).on("mousemove",d),s(this).on("mouseenter",o),this.settings.reset&&s(this).on("mouseleave",i),this.settings.glare&&s(window).on("resize",h.bind(e))},r=function(){var e=this;void 0!==this.timeout&&clearTimeout(this.timeout),s(this).css({transition:this.settings.speed+"ms "+this.settings.easing}),this.settings.glare&&this.glareElement.css({transition:"opacity "+this.settings.speed+"ms "+this.settings.easing}),this.timeout=setTimeout(function(){s(e).css({transition:""}),e.settings.glare&&e.glareElement.css({transition:""})},this.settings.speed)},o=function(e){buddhaCrosssell.ignoreTiltEvent||(this.ticking=!1,s(this).css({"will-change":"transform"}),r.call(this),s(this).trigger("tilt.mouseEnter"))},a=function(e){return void 0===e&&(e={pageX:s(this).offset().left+s(this).outerWidth()/2,pageY:s(this).offset().top+s(this).outerHeight()/2}),{x:e.pageX,y:e.pageY}},d=function(s){buddhaCrosssell.ignoreTiltEvent||(this.mousePositions=a(s),l.call(this))},i=function(){buddhaCrosssell.ignoreTiltEvent||(r.call(this),this.reset=!0,l.call(this),s(this).trigger("tilt.mouseLeave"))},n=function(){var e=s(this).outerWidth(),l=s(this).outerHeight(),t=s(this).offset().left,r=s(this).offset().top,o=(this.mousePositions.x-t)/e,a=(this.mousePositions.y-r)/l;return{tiltX:(this.settings.maxTilt/2-o*this.settings.maxTilt).toFixed(2),tiltY:(a*this.settings.maxTilt-this.settings.maxTilt/2).toFixed(2),percentageX:100*o,percentageY:100*a,angle:Math.atan2(this.mousePositions.x-(t+e/2),-(this.mousePositions.y-(r+l/2)))*(180/Math.PI)}},c=function(){if(this.transforms=n.call(this),this.reset)return this.reset=!1,s(this).css("transform","perspective("+this.settings.perspective+"px) rotateX(0deg) rotateY(0deg)"),void(this.settings.glare&&(this.glareElement.css("transform","rotate(180deg) translate(-50%, -50%)"),this.glareElement.css("opacity","0")));s(this).css("transform","perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.disableAxis?0:this.transforms.tiltY)+"deg) rotateY("+("y"===this.settings.disableAxis?0:this.transforms.tiltX)+"deg) scale3d("+this.settings.scale+","+this.settings.scale+","+this.settings.scale+")"),this.settings.glare&&(this.glareElement.css("transform","rotate("+this.transforms.angle+"deg) translate(-50%, -50%)"),this.glareElement.css("opacity",""+this.transforms.percentageY*this.settings.maxGlare/100)),s(this).trigger("change",[this.transforms]),this.ticking=!1},u=function(){var e=this.settings.glarePrerender;if(e||s(this).append('<div class="js-tilt-glare"><div class="js-tilt-glare-inner"></div></div>'),this.glareElementWrapper=s(this).find(".js-tilt-glare"),this.glareElement=s(this).find(".js-tilt-glare-inner"),!e){var l={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"};this.glareElementWrapper.css(l).css({overflow:"hidden","pointer-events":"none"}),this.glareElement.css({position:"absolute",top:"50%",left:"50%","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",width:""+2*s(this).outerWidth(),height:""+2*s(this).outerWidth(),transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"})}},h=function(){this.glareElement.css({width:""+2*s(this).outerWidth(),height:""+2*s(this).outerWidth()})};return s.fn.tilt.destroy=function(){s(this).each(function(){s(this).find(".js-tilt-glare").remove(),s(this).css({"will-change":"",transform:""}),s(this).off("mousemove mouseenter mouseleave")})},s.fn.tilt.getValues=function(){var e=[];return s(this).each(function(){this.mousePositions=a.call(this),e.push(n.call(this))}),e},s.fn.tilt.reset=function(){s(this).each(function(){var e=this;this.mousePositions=a.call(this),this.settings=s(this).data("settings"),i.call(this),setTimeout(function(){e.reset=!1},this.settings.transition)})},this.each(function(){var l=this;this.settings=s.extend({maxTilt:s(this).is("[data-tilt-max]")?s(this).data("tilt-max"):20,perspective:s(this).is("[data-tilt-perspective]")?s(this).data("tilt-perspective"):300,easing:s(this).is("[data-tilt-easing]")?s(this).data("tilt-easing"):"cubic-bezier(.03,.98,.52,.99)",scale:s(this).is("[data-tilt-scale]")?s(this).data("tilt-scale"):"1",speed:s(this).is("[data-tilt-speed]")?s(this).data("tilt-speed"):"400",transition:!s(this).is("[data-tilt-transition]")||s(this).data("tilt-transition"),disableAxis:s(this).is("[data-tilt-disable-axis]")?s(this).data("tilt-disable-axis"):null,axis:s(this).is("[data-tilt-axis]")?s(this).data("tilt-axis"):null,reset:!s(this).is("[data-tilt-reset]")||s(this).data("tilt-reset"),glare:!!s(this).is("[data-tilt-glare]")&&s(this).data("tilt-glare"),maxGlare:s(this).is("[data-tilt-maxglare]")?s(this).data("tilt-maxglare"):1},e),null!==this.settings.axis&&(console.warn("Tilt.js: the axis setting has been renamed to disableAxis. See https://github.com/gijsroge/tilt.js/pull/26 for more information"),this.settings.disableAxis=this.settings.axis),this.init=function(){s(l).data("settings",l.settings),l.settings.glare&&u.call(l),t.call(l)},this.init()})},s("[data-tilt]").tilt(),!0});
}
                    function loadjQueryCrosssell() {
                        var xhr = new XMLHttpRequest();
                        xhr.onreadystatechange = function() {
                            if (xhr.readyState == XMLHttpRequest.DONE) {
                                var data = xhr.responseText;
                                jQueryCrosssell = data.replace(/jQuery/g,"jQueryCrosssell");
                                eval(jQueryCrosssell);
                                if (typeof jQuery !== "undefined") {  
                                    $ = jQuery.noConflict();
                                }
                                buddhaCrosssell.loadScripts(jQueryCrosssell);
                                if (buddhaCrosssell.template == "cart") {
                                    /* get product handle from cart items */
                                    jQueryCrosssell.getJSON("/cart.js", function(cart) {
                                        if (cart.items.length > 0) {
                                            buddhaCrosssell.productHandle = cart.items[0].handle;
                                        }
                                        var numSections = buddhaCrosssell.initWidgetSections();
                                        if (numSections > 0) {
                                            buddhaCrosssell.initApp();
                                        }
                                    });
                                } else {
                                    var numSections = buddhaCrosssell.initWidgetSections();
                                    if (numSections > 0) {
                                        buddhaCrosssell.initApp();
                                    }
                                }
                            }
                        };
                        xhr.open("GET", "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js", true);
                        xhr.send(null);
                    }

                    if (typeof jQuery == "undefined") {  
                        loadjQueryCrosssell();
                    } else {
                        var vernums = jQuery.fn.jquery.split(".");
                        if ((parseInt(vernums[0]) == 1 && parseInt(vernums[1]) >= 7) || parseInt(vernums[0]) > 1) {
                            var jQueryCrosssell = jQuery;
                            buddhaCrosssell.loadScripts(jQueryCrosssell);
                            if (buddhaCrosssell.template == "cart") {
                                /* get product handle from cart items */
                                jQueryCrosssell.getJSON("/cart.js", function(cart) {
                                    if (cart.items.length > 0) {
                                        buddhaCrosssell.productHandle = cart.items[0].handle;
                                    }
                                    var numSections = buddhaCrosssell.initWidgetSections();
                                    if (numSections > 0) {
                                        buddhaCrosssell.initApp();
                                    }
                                });
                            } else {
                                var numSections = buddhaCrosssell.initWidgetSections();
                                if (numSections > 0) {
                                    buddhaCrosssell.initApp();
                                }
                            }
                        } else {
                            loadjQueryCrosssell();
                        }
                    }