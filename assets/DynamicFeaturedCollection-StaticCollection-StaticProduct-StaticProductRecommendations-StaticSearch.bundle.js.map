{"version":3,"sources":["webpack:///./source/scripts/components/RichText.js","webpack:///./source/scripts/components/MessageBanner.js","webpack:///./source/scripts/components/Youtube.js","webpack:///./source/scripts/components/Vimeo.js","webpack:///./source/scripts/components/Video.js","webpack:///./source/scripts/components/ProductClickToZoom.js","webpack:///./source/scripts/components/ProductGallery.js","webpack:///./source/scripts/components/ProductDetails.js","webpack:///./source/scripts/helpers/Images.js","webpack:///./source/scripts/components/AddToCartFlyout.js","webpack:///./source/scripts/Layout.js","webpack:///./source/scripts/helpers/Quantity.js","webpack:///./source/scripts/Forms.js"],"names":["RichText","$el","_initExternalLinks","groupedContent","length","GroupedContent","get","layout","intelliparse","fitvids","unload","anchors","find","filter","i","el","href","indexOf","location","hostname","attr","MessageBanner","$window","$","window","$document","document","$body","body","$bannerTemplate","$banners","header","querySelector","events","on","event","_handleDocumentClick","target","_closeEsc","off","message","type","$banner","clone","addClass","html","append","_bindEvents","_show","$visibleBanners","each","index","banner","_hide","push","preventDefault","e","key","dismissBanners","one","removeClass","_removeBanner","forEach","splice","remove","$parent","parents","api","apiLoadedCallbacks","apiLoaded","onYouTubeIframeAPIReady","apiLoadedCallback","Youtube","videoUrl","regex","id","match","onApiLoaded","_onApiLoaded","bind","isReady","onReady","_onReady","onReadyCallback","onStateChange","_onStateChange","onPlayCallback","$script","Promise","resolve","player","playVideo","pauseVideo","mute","destroy","YT","Player","videoId","playerVars","modestbranding","showinfo","controls","rel","state","data","PlayerState","BUFFERING","VimeoPlayer","urlParts","split","onProgress","_onProgress","onProgressCallback","play","pause","setVolume","catch","Vimeo","ready","then","Video","options","platform","getAttribute","trim","playButton","videoEl","onPlayClick","_onPlayClick","onPauseClick","_onPauseClick","autoplay","_autoplay","video","videoData","childNodes","addEventListener","classList","add","setTimeout","removeEventListener","ProductGallery","settings","slides","originalThumbnails","startIndex","selectGalleryIndex","photoswipeDialog","thumbContainer","closeButton","selectedSlide","innerHTML","thumbnails","selectedIndex","thumb","thumbIndex","contains","newThumb","cloneNode","appendChild","rimg","watch","selectedThumb","EventHandler","photoswipeSlides","slide","hasAttribute","src","dataset","zoom","msrc","h","imageHeight","w","imageWidth","bottomBarHeight","isGreaterThanBreakpoint","photoswipeOptions","barsSize","top","bottom","fullscreenEl","zoomEl","shareEl","counterEl","arrowEl","preloaderEl","closeOnScroll","showHideOpacity","history","loop","clickToCloseNonZoomable","timeToIdle","timeToIdleOutside","click_to_zoom","isLessThanBreakpoint","getThumbBoundsFn","pageYScroll","pageYOffset","documentElement","scrollTop","bounds","getBoundingClientRect","x","left","y","width","photoswipe","PhotoSwipe","photoswipeUi","register","close","goTo","mouseUsed","closeOnVerticalDrag","listen","getCurrentIndex","slideIndex","_adjustMobileThumbPosition","removeTrapFocus","focus","unregisterAll","closeEsc","parentNode","init","trapFocus","thumbBounds","thumbWrapperBounds","scrollLeft","offsetLeft","isQuickshop","slider","querySelectorAll","videoSlides","zoomButton","thumbnailsWrapper","selectedThumbnail","selectedVideo","Array","prototype","call","variantChange","_onVariantChange","_screenResize","_thumbnailClicked","onBreakpointChange","productZoom","zoomClicked","stopPropagation","_openProductZoom","hover_zoom","_setupHoverZoom","_setupFlickity","_adjustGalleryPositioning","_disableFlickity","drift","_disableHoverZoom","flickity","select","_selectSlide","imageIndex","productImageIndex","parseInt","enable_video_autoplay","variant","featured_image","_changeSelectedIndex","selectedImage","setAttribute","Drift","paneContainer","inlinePane","hoverBoundingBox","handleTouch","onShow","productMain","productAlt","onHide","disable","Flickity","accessibility","adaptiveHeight","cellSelector","contain","friction","freeScroll","initialIndex","lazyLoad","percentPosition","prevNextButtons","pageDots","selectedAttraction","setGallerySize","wrapAround","flickityEvent","_setSlideHeight","blur","swiped","unregister","button","containerHeight","storedImageHeight","height","style","thumbnail_position","firstChild","activeButton","activeElement","insertBefore","leftmostBounds","thumbStyle","currentStyle","getComputedStyle","thumbMargin","marginLeft","wrapped","some","maxWidth","firstElementChild","ProductClicktoZoom","offBreakpointChange","unwatch","ProductDetails","$formArea","$details","context","product","useHistory","sectionId","initialVariant","variantHelper","atcCallbacks","$form","$productAtcButton","$productVariants","$productOptions","detailsLink","detailsBaseHref","variantFields","$price","$priceMoney","$compareAtPrice","$compareAtPriceMoney","$badge","$badgeMoneySaved","$badgePercentSaved","$sku","forms","Forms","images","gallery","_initOptions","_switchVariant","_AddToCartFlyout","ShopifyVariants","mixedControls","selectVariant","firstLoad","val","_updatePrice","_updateSKU","_updateBadge","_updateButton","_updateSwatchLabel","_updateFullDetailsLink","url","handle","param","replaceState","hasComparePrice","compare_at_price","price","toggleClass","text","Shopify","formatMoney","money_format","CurrencyConverter","update","sku","parent","priceSaved","toggle","percentileSaved","Math","round","available","product_available","prop","product_unavailable","swatches_enable","swatchLabel","innerText","optionSwatchValue","formData","serializeArray","$atcButton","moneyFormat","cartRedirection","cart_redirection","AddToCartFlyout","Images","size","imageArray","loadImage","getSizedImageUrl","path","image","Image","removeProtocol","prefix","suffix","console","warn","replace","flyOutSelector","$atcTemplate","itemId","atcFlyOut","_onInit","_onError","_onSuccess","_onCloseAll","messageBanner","headerAnnouncement","$header","callbacks","extend","onInit","onError","onSuccess","onClose","_closeFlyOuts","_disableButton","_updateCart","_removeFlyOuts","$flyOut","quantityField","name","quantity","value","ajax","dataType","done","response","imageUrl","product_title","variant_options","join","$productPriceQuantity","secondResponse","lineItem","items","item","line_level_discount_allocations","concat","final_price","$productPriceValue","original_price","$productPriceDiscounted","show","hide","$productDiscounts","discountItemTemplate","children","first","empty","discount","$listItem","discount_application","title","$amount","amount","$subTotal","total_price","item_count","trigger","_openFlyOut","fail","errorText","responseText","JSON","parse","description","error","status","statusText","_enableButton","_closeFlyOut","$excludeFlyOut","is","_removeFlyOut","documentClickEventTarget","eventHandlers","previousBreakpoint","getBreakpoints","getPropertyValue","getBreakpoint","currentBreakpoint","eventHandler","previous","current","breakpoint","inclusive","breakpoints","comparison","isBreakpoint","Quantity","$inputParent","$input","$selectParent","$select","_watchSelect","_watchInput","baseValue","currentTarget","isNaN","_validateValue","removeAttr","selector","filledClass","fieldSelector","quantityItems","$quantityWrapper","_toggleFilled","_checkFilled","quantityItem","hasClass","$target","isFilled"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;;IAEqBA,Q;;;AACnB,oBAAYC,GAAZ,EAAiB;AAAA;;AACf,SAAKA,GAAL,GAAWA,GAAX;;AACA,SAAKC,kBAAL;;AACA,SAAKC,cAAL,GAAsB,IAAtB;;AAEA,QAAI,KAAKF,GAAL,CAASG,MAAb,EAAqB;AACnB,WAAKD,cAAL,GAAsB,IAAIE,sDAAJ,CAAmBJ,GAAG,CAACK,GAAJ,CAAQ,CAAR,CAAnB,EAA+B;AACnDC,cAAM,EAAE,MAD2C;AAEnDC,oBAAY,EAAE;AAFqC,OAA/B,CAAtB;AAKAC,oDAAO,CAAC,MAAD,CAAP;AACD;AACF;;;;6BAEQ;AACP,UAAI,KAAKN,cAAT,EAAyB;AACvB,aAAKA,cAAL,CAAoBO,MAApB;AACD;AACF;AAED;;;;;;;;yCAKqB;AACnB,UAAMC,OAAO,GAAG,KAAKV,GAAL,CAASW,IAAT,CAAc,iBAAd,EAAiCC,MAAjC,CAAwC,UAACC,CAAD,EAAIC,EAAJ;AAAA,eAAWA,EAAE,CAACC,IAAH,CAAQC,OAAR,CAAgBC,QAAQ,CAACC,QAAzB,MAAuC,CAAC,CAAnD;AAAA,OAAxC,CAAhB;AACAR,aAAO,CAACS,IAAR,CAAa,QAAb,EAAuB,QAAvB;AACD;;;;;;;;;;;;;;;;;;;;;;;ACjCH;;IAEqBC,a;;;AACnB,2BAAc;AAAA;;AAAA;;AACZ,SAAKC,OAAL,GAAeC,6CAAC,CAACC,MAAD,CAAhB;AACA,SAAKC,SAAL,GAAiBF,6CAAC,CAACG,QAAD,CAAlB;AACA,SAAKC,KAAL,GAAaJ,6CAAC,CAACG,QAAQ,CAACE,IAAV,CAAd;AACA,SAAKC,eAAL,GAAuBN,6CAAC,CAAC,wCAAD,CAAxB;AACA,SAAKO,QAAL,GAAgB,EAAhB;AAEA,SAAKC,MAAL,GAAcL,QAAQ,CAACM,aAAT,CAAuB,oBAAvB,CAAd;AACA,SAAKC,MAAL,GAAc,EAAd;AAEA,SAAKR,SAAL,CAAeS,EAAf,CAAkB,iDAAlB,EAAqE,UAAAC,KAAK,EAAI;AAC5E,WAAI,CAACC,oBAAL,CAA0BD,KAAK,CAACE,MAAhC;AACD,KAFD;AAIA,SAAKf,OAAL,CAAaY,EAAb,CAAgB,wBAAhB,EAA0C,UAAAC,KAAK;AAAA,aAAI,KAAI,CAACG,SAAL,CAAeH,KAAf,CAAJ;AAAA,KAA/C;AACD;;;;6BAEQ;AACP,WAAKV,SAAL,CAAec,GAAf,CAAmB,iDAAnB;AACA,WAAKjB,OAAL,CAAaiB,GAAb,CAAiB,wBAAjB;AACD;;;4BAEOC,Q,EAASC,I,EAAM;AACrB,UAAMC,OAAO,GAAG,KAAKb,eAAL,CAAqBc,KAArB,EAAhB;AAEAD,aAAO,CACJE,QADH,oBACwBH,IADxB,GAEG7B,IAFH,CAEQ,+BAFR,EAGGiC,IAHH,CAGQL,QAHR;AAKAjB,mDAAC,CAAC,KAAKQ,MAAN,CAAD,CAAee,MAAf,CAAsBJ,OAAtB;;AACA,WAAKK,WAAL,CAAiBL,OAAjB;;AACA,WAAKM,KAAL,CAAWN,OAAX;AACD;;;qCAEgB;AAAA;;AACf,UAAMO,eAAe,GAAG1B,6CAAC,CAAC,+BAAD,CAAzB;AAEA0B,qBAAe,CAACC,IAAhB,CAAqB,UAACC,KAAD,EAAQC,MAAR,EAAmB;AACtC,cAAI,CAACC,KAAL,CAAW9B,6CAAC,CAAC6B,MAAD,CAAZ,EAAsBD,KAAtB;AACD,OAFD;AAGD;;;gCAEWT,O,EAAS;AAAA;;AACnB,WAAKT,MAAL,CAAYqB,IAAZ,CAAiB,CACfZ,OAAO,CAACR,EAAR,CAAW,sBAAX,EAAmC,6BAAnC,EAAkE,UAAAC,KAAK,EAAI;AACzEA,aAAK,CAACoB,cAAN;;AACA,cAAI,CAACF,KAAL,CAAWX,OAAX;AACD,OAHD,CADe,EAKf,KAAKpB,OAAL,CAAaY,EAAb,CAAgB,wBAAhB,EAA0C,UAAAsB,CAAC,EAAI;AAC7C,YAAIA,CAAC,CAACC,GAAF,KAAU,QAAd,EAAwB;AACtB,gBAAI,CAACJ,KAAL,CAAWX,OAAX;AACD;AACF,OAJD,CALe,CAAjB;AAWD;;;8BAESc,C,EAAG;AACX,UAAIA,CAAC,CAACC,GAAF,KAAU,QAAd,EAAwB;AACtB,aAAKC,cAAL;AACD;AACF;;;0BAEKhB,O,EAAS;AACb,WAAKZ,QAAL,CAAcwB,IAAd,CAAmBZ,OAAnB;AAEAA,aAAO,CACJE,QADH,CACY,wBADZ,EAEGe,GAFH,CAEO,OAFP,EAEgB,YAAM;AAClBjB,eAAO,CACJkB,WADH,CACe,wBADf,EAEGhB,QAFH,CAEY,SAFZ,EAGGL,GAHH,CAGO,OAHP;AAID,OAPH;AAQD;;;0BAEKG,O,EAAoB;AAAA;;AAAA,UAAXS,KAAW,uEAAH,CAAG;AACxBT,aAAO,CACJE,QADH,CACY,yBADZ,EAEGe,GAFH,CAEO,OAFP,EAEgB,YAAM;AAClBjB,eAAO,CACJkB,WADH,CACe,iCADf,EAEGrB,GAFH,CAEO,OAFP;;AAGA,cAAI,CAACsB,aAAL,CAAmBnB,OAAnB,EAA4BS,KAA5B;AACD,OAPH;AAQD;;;kCAEaT,O,EAASS,K,EAAO;AAC5B,UAAI,KAAKlB,MAAL,CAAYkB,KAAZ,CAAJ,EAAwB;AACtB,aAAKlB,MAAL,CAAYkB,KAAZ,EAAmBW,OAAnB,CAA2B,UAAA7D,GAAG;AAAA,iBAAIA,GAAG,CAACsC,GAAJ,CAAQ,iBAAR,CAAJ;AAAA,SAA9B;AACA,aAAKN,MAAL,CAAY8B,MAAZ,CAAmBZ,KAAnB,EAA0B,CAA1B;AACD;;AAED,WAAKrB,QAAL,CAAciC,MAAd,CAAqBZ,KAArB,EAA4B,CAA5B;AACAT,aAAO,CAACsB,MAAR;AACD;;;yCAEoB3B,M,EAAQ;AAC3B,UAAM4B,OAAO,GAAG1C,6CAAC,CAACc,MAAD,CAAD,CAAU6B,OAAV,CAAkB,uBAAlB,CAAhB;AACA,UAAID,OAAO,CAAC7D,MAAZ,EAAoB;AAEpB,WAAKsD,cAAL;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;ACzGH;AAEA,IAAMS,GAAG,GAAG,oCAAZ;AACA,IAAIC,kBAAkB,GAAG,EAAzB;AACA,IAAIC,SAAS,GAAG,KAAhB;;AAEA7C,MAAM,CAAC8C,uBAAP,GAAiC,YAAM;AACrCF,oBAAkB,CAACN,OAAnB,CAA2B,UAAAS,iBAAiB;AAAA,WAAIA,iBAAiB,EAArB;AAAA,GAA5C;AACAH,oBAAkB,GAAG,EAArB;AACAC,WAAS,GAAG,IAAZ;AACD,CAJD;;IAMqBG,e;;;AACnB,yBAA8B;AAAA,QAAhBzD,EAAgB,QAAhBA,EAAgB;AAAA,QAAZ0D,QAAY,QAAZA,QAAY;;AAAA;;AAC5B,QAAMC,KAAK,GAAG,4FAAd,CAD4B,CACgF;;AAE5G,SAAK3D,EAAL,GAAUA,EAAV;AACA,SAAK4D,EAAL,GAAUF,QAAQ,CAACG,KAAT,CAAeF,KAAf,EAAsB,CAAtB,KAA4B,IAAtC;AAEA,SAAKG,WAAL,GAAmB,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAnB;AAEA,SAAKC,OAAL,GAAe,KAAf;AACA,SAAKC,OAAL,GAAe,KAAKC,QAAL,CAAcH,IAAd,CAAmB,IAAnB,CAAf;AACA,SAAKI,eAAL,GAAuB,IAAvB;AAEA,SAAKC,aAAL,GAAqB,KAAKC,cAAL,CAAoBN,IAApB,CAAyB,IAAzB,CAArB;AACA,SAAKO,cAAL,GAAsB,IAAtB;;AAEA,QAAIjB,SAAJ,EAAe;AACb,WAAKS,YAAL;AACD,KAFD,MAEO;AACLV,wBAAkB,CAACd,IAAnB,CAAwB,KAAKuB,WAA7B;AACAU,sBAAO,CAACpB,GAAD,CAAP;AACD;AACF;;;;2BAEM;AAAA;;AACL,aAAO,IAAIqB,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,aAAI,CAACH,cAAL,GAAsBG,OAAtB;;AAEA,YAAI,KAAI,CAACT,OAAT,EAAkB;AAChB,eAAI,CAACU,MAAL,CAAYC,SAAZ;AACD,SAFD,MAEO;AACL,eAAI,CAACR,eAAL,GAAuB,YAAM;AAAE,iBAAI,CAACO,MAAL,CAAYC,SAAZ;AAA0B,WAAzD;AACD;AACF,OARM,CAAP;AASD;;;4BAEO;AAAA;;AACN,aAAO,IAAIH,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,cAAI,CAACH,cAAL,GAAsBG,OAAtB;;AAEA,YAAI,MAAI,CAACT,OAAT,EAAkB;AAChB,gBAAI,CAACU,MAAL,CAAYE,UAAZ;AACD,SAFD,MAEO;AACL,gBAAI,CAACT,eAAL,GAAuB,YAAM;AAAE,kBAAI,CAACO,MAAL,CAAYE,UAAZ;AAA2B,WAA1D;AACD;AACF,OARM,CAAP;AASD;;;+BAEU;AAAA;;AACT,aAAO,IAAIJ,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,cAAI,CAACH,cAAL,GAAsBG,OAAtB;;AAEA,YAAI,MAAI,CAACT,OAAT,EAAkB;AAChB,gBAAI,CAACU,MAAL,CAAYC,SAAZ;;AACA,gBAAI,CAACD,MAAL,CAAYG,IAAZ;AACD,SAHD,MAGO;AACL,gBAAI,CAACV,eAAL,GAAuB,YAAM;AAC3B,kBAAI,CAACO,MAAL,CAAYC,SAAZ;;AACA,kBAAI,CAACD,MAAL,CAAYG,IAAZ;AACD,WAHD;AAID;AACF,OAZM,CAAP;AAaD;;;6BAEQ;AACP,WAAKH,MAAL,CAAYI,OAAZ;AACD;;;mCAEc;AACb,WAAKJ,MAAL,GAAc,IAAIK,EAAE,CAACC,MAAP,CAAc,KAAKjF,EAAnB,EAAuB;AACnCkF,eAAO,EAAE,KAAKtB,EADqB;AAEnCuB,kBAAU,EAAE;AACVC,wBAAc,EAAE,IADN;AAEVC,kBAAQ,EAAE,KAFA;AAGVC,kBAAQ,EAAE,KAHA;AAIVC,aAAG,EAAE;AAJK,SAFuB;AAQnCrE,cAAM,EAAE;AACNgD,iBAAO,EAAE,KAAKA,OADR;AAENG,uBAAa,EAAE,KAAKA;AAFd;AAR2B,OAAvB,CAAd;AAaD;;;+BAEU;AACT,WAAKJ,OAAL,GAAe,IAAf;;AAEA,UAAI,KAAKG,eAAT,EAA0B;AACxB,aAAKA,eAAL;AACD;AACF;;;mCAEchD,K,EAAO;AACpB,UAAMoE,KAAK,GAAGpE,KAAK,CAACqE,IAApB;;AACA,UACE,KAAKlB,cAAL,IACGiB,KAAK,KAAKR,EAAE,CAACU,WAAH,CAAeC,SAF9B,EAGE;AACA,aAAKpB,cAAL;AACA,aAAKA,cAAL,GAAsB,IAAtB;AACD;AACF;;;;;;;;;;;;;;ACjHH;AAEA,IAAMnB,SAAG,GAAG,wCAAZ;AACA,IAAIE,eAAS,GAAG,KAAhB;;IAEqBsC,iB;;;AACnB,6BAA8B;AAAA,QAAhB5F,EAAgB,QAAhBA,EAAgB;AAAA,QAAZ0D,QAAY,QAAZA,QAAY;;AAAA;;AAC5B,SAAK1D,EAAL,GAAUA,EAAV;AACA,QAAM6F,QAAQ,GAAGnC,QAAQ,CAACoC,KAAT,CAAe,GAAf,CAAjB;AAEA,SAAKlC,EAAL,GAAUiC,QAAQ,CAACA,QAAQ,CAACxG,MAAT,GAAkB,CAAnB,CAAlB;AACA,SAAK+E,eAAL,GAAuB,IAAvB;AAEA,SAAKN,WAAL,GAAmB,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAnB;AAEA,SAAK+B,UAAL,GAAkB,KAAKC,WAAL,CAAiBhC,IAAjB,CAAsB,IAAtB,CAAlB;AACA,SAAKiC,kBAAL,GAA0B,IAA1B;;AAEA,QAAI3C,eAAJ,EAAe;AACb,WAAKS,YAAL;AACD,KAFD,MAEO;AACLS,sBAAO,CAACpB,SAAD,EAAM,KAAKU,WAAX,CAAP;AACD;AACF;;;;2BAEM;AAAA;;AACL,aAAO,IAAIW,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,aAAI,CAACuB,kBAAL,GAA0BvB,OAA1B;;AAEA,YAAIpB,eAAJ,EAAe;AACb,eAAI,CAACqB,MAAL,CAAYxD,EAAZ,CAAe,MAAf,EAAuB,KAAI,CAAC4E,UAA5B;;AACA,eAAI,CAACpB,MAAL,CAAYuB,IAAZ;AACD,SAHD,MAGO;AACL,eAAI,CAAC9B,eAAL,GAAuB,YAAM;AAC3B,iBAAI,CAACO,MAAL,CAAYxD,EAAZ,CAAe,MAAf,EAAuB,KAAI,CAAC4E,UAA5B;;AACA,iBAAI,CAACpB,MAAL,CAAYuB,IAAZ;AACD,WAHD;AAID;AACF,OAZM,CAAP;AAaD;;;4BAEO;AAAA;;AACN,aAAO,IAAIzB,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,cAAI,CAACuB,kBAAL,GAA0BvB,OAA1B;;AAEA,YAAIpB,eAAJ,EAAe;AACb,gBAAI,CAACqB,MAAL,CAAYxD,EAAZ,CAAe,OAAf,EAAwB,MAAI,CAAC4E,UAA7B;;AACA,gBAAI,CAACpB,MAAL,CAAYwB,KAAZ;AACD,SAHD,MAGO;AACL,gBAAI,CAAC/B,eAAL,GAAuB,YAAM;AAC3B,kBAAI,CAACO,MAAL,CAAYxD,EAAZ,CAAe,OAAf,EAAwB,MAAI,CAAC4E,UAA7B;;AACA,kBAAI,CAACpB,MAAL,CAAYwB,KAAZ;AACD,WAHD;AAID;AACF,OAZM,CAAP;AAaD;;;+BAEU;AAAA;;AACT,aAAO,IAAI1B,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,cAAI,CAACuB,kBAAL,GAA0BvB,OAA1B;;AAEA,YAAIpB,eAAJ,EAAe;AACb,gBAAI,CAACqB,MAAL,CAAYxD,EAAZ,CAAe,MAAf,EAAuB,MAAI,CAAC4E,UAA5B;;AACA,gBAAI,CAACpB,MAAL,CAAYyB,SAAZ,CAAsB,CAAtB;;AACA,gBAAI,CAACzB,MAAL,CAAYuB,IAAZ;AACD,SAJD,MAIO;AACL,gBAAI,CAAC9B,eAAL,GAAuB,YAAM;AAC3B,kBAAI,CAACO,MAAL,CAAYxD,EAAZ,CAAe,MAAf,EAAuB,MAAI,CAAC4E,UAA5B;;AACA,kBAAI,CAACpB,MAAL,CAAYyB,SAAZ,CAAsB,CAAtB;;AACA,kBAAI,CAACzB,MAAL,CAAYuB,IAAZ;AACD,WAJD;AAKD;AACF,OAdM,CAAP;AAeD;;;6BAEQ;AACP,WAAKvB,MAAL,CACGhF,MADH,GAEG0G,KAFH;AAGD;;;mCAEc;AACb,WAAK1B,MAAL,GAAc,IAAIlE,MAAM,CAAC6F,KAAP,CAAarB,MAAjB,CAAwB,KAAKjF,EAA7B,EAAiC;AAAE4D,UAAE,EAAE,KAAKA;AAAX,OAAjC,CAAd;AAEA,WAAKe,MAAL,CACG4B,KADH,GAEGC,IAFH,GAGGH,KAHH;AAKA/C,qBAAS,GAAG,IAAZ;;AAEA,UAAI,KAAKc,eAAT,EAA0B;AACxB,aAAKA,eAAL;AACD;AACF;;;kCAEa;AACZ,WAAKO,MAAL,CAAYnD,GAAZ,CAAgB,MAAhB,EAAwB,KAAKuE,UAA7B;AACA,WAAKpB,MAAL,CAAYnD,GAAZ,CAAgB,OAAhB,EAAyB,KAAKuE,UAA9B;;AAEA,UAAI,KAAKE,kBAAT,EAA6B;AAC3B,aAAKA,kBAAL;AACA,aAAKA,kBAAL,GAA0B,IAA1B;AACD;AACF;;;;;;;;;;;;;;;ACxGH;AACA;;IAEqBQ,W;;;AACnB,iBAAYzG,EAAZ,EAAgB0G,OAAhB,EAAyB;AAAA;;AACvB,SAAK1G,EAAL,GAAUA,EAAV;AACA,SAAK0G,OAAL,GAAeA,OAAf;AACA,SAAKC,QAAL,GAAgB3G,EAAE,CAAC4G,YAAH,CAAgB,YAAhB,EAA8BC,IAA9B,EAAhB;AACA,SAAKC,UAAL,GAAkB9G,EAAE,CAACiB,aAAH,CAAiB,0BAAjB,CAAlB;AACA,SAAK8F,OAAL,GAAe/G,EAAE,CAACiB,aAAH,CAAiB,sBAAjB,CAAf;AAEA,SAAK+F,WAAL,GAAmB,KAAKC,YAAL,CAAkBjD,IAAlB,CAAuB,IAAvB,CAAnB;AACA,SAAKkD,YAAL,GAAoB,KAAKC,aAAL,CAAmBnD,IAAnB,CAAwB,IAAxB,CAApB;AACA,SAAKoD,QAAL,GAAgB,KAAKC,SAAL,CAAerD,IAAf,CAAoB,IAApB,CAAhB;AAEA,SAAKsD,KAAL,GAAa,IAAb;AAEA,SAAKC,SAAL,GAAiB;AACfvH,QAAE,EAAE,KAAK+G,OAAL,CAAaS,UAAb,CAAwB,CAAxB,CADW;AAEf9D,cAAQ,EAAE,KAAKqD,OAAL,CAAaH,YAAb,CAA0B,gBAA1B;AAFK,KAAjB;;AAKA,YAAQ,KAAKD,QAAb;AACE,WAAK,SAAL;AACE,aAAKW,KAAL,GAAa,IAAI7D,eAAJ,CAAY,KAAK8D,SAAjB,CAAb;AACA;;AACF,WAAK,OAAL;AACE,aAAKD,KAAL,GAAa,IAAIhB,iBAAJ,CAAU,KAAKiB,SAAf,CAAb;AACA;;AACF;AACE,aAAKD,KAAL,GAAa,IAAb;AACA;AATJ;;AAYA,QAAI,KAAKR,UAAT,EAAqB;AACnB,UAAI,KAAKJ,OAAL,IAAgB,KAAKA,OAAL,CAAaU,QAAjC,EAA2C;AACzC,aAAKA,QAAL;AACD;;AAED,WAAKN,UAAL,CAAgBW,gBAAhB,CAAiC,OAAjC,EAA0C,KAAKT,WAA/C;AACD;AACF;;;;mCAEc;AAAA;;AACb,WAAKhH,EAAL,CAAQ0H,SAAR,CAAkBC,GAAlB,CAAsB,eAAtB;AAEA,WAAKL,KAAL,CAAWpB,IAAX,GACGM,IADH,CACQ,YAAM;AACV,aAAI,CAACxG,EAAL,CAAQ0H,SAAR,CAAkBC,GAAlB,CAAsB,qBAAtB;;AAEAC,kBAAU,CAAC,YAAM;AACf,eAAI,CAAC5H,EAAL,CAAQ0H,SAAR,CAAkBzE,MAAlB,CAAyB,eAAzB;;AACA,eAAI,CAACjD,EAAL,CAAQ0H,SAAR,CAAkBzE,MAAlB,CAAyB,qBAAzB;;AACA,eAAI,CAACjD,EAAL,CAAQ0H,SAAR,CAAkBC,GAAlB,CAAsB,eAAtB;AACD,SAJS,EAIP,GAJO,CAAV;AAKD,OATH;AAUD;;;oCAEe;AACd,WAAKL,KAAL,CAAWnB,KAAX;AACD;;;gCAEW;AAAA;;AACV,WAAKnG,EAAL,CAAQ0H,SAAR,CAAkBC,GAAlB,CAAsB,eAAtB;AAEA,WAAKL,KAAL,CAAWF,QAAX,GACGZ,IADH,CACQ,YAAM;AACV,cAAI,CAACxG,EAAL,CAAQ0H,SAAR,CAAkBC,GAAlB,CAAsB,qBAAtB;;AAEAC,kBAAU,CAAC,YAAM;AACf,gBAAI,CAAC5H,EAAL,CAAQ0H,SAAR,CAAkBzE,MAAlB,CAAyB,eAAzB;;AACA,gBAAI,CAACjD,EAAL,CAAQ0H,SAAR,CAAkBzE,MAAlB,CAAyB,qBAAzB;;AACA,gBAAI,CAACjD,EAAL,CAAQ0H,SAAR,CAAkBC,GAAlB,CAAsB,eAAtB;AACD,SAJS,EAIP,GAJO,CAAV;AAKD,OATH;AAUD;;;6BAEQ;AACP,UAAI,KAAKb,UAAT,EAAqB;AACnB,aAAKA,UAAL,CAAgBe,mBAAhB,CAAoC,OAApC,EAA6C,KAAKb,WAAlD;AACD;;AAED,UAAI,KAAKM,KAAT,EAAgB;AACd,aAAKA,KAAL,CAAW3H,MAAX;AACD;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrFH;AACA;AACA;AACA;AAKA;AAEA;;IAEqBmI,iC;;;AACnB,gCAMG;AAAA;;AAAA,QALDC,QAKC,QALDA,QAKC;AAAA,QAJDC,MAIC,QAJDA,MAIC;AAAA,QAHDC,kBAGC,QAHDA,kBAGC;AAAA,QAFDC,UAEC,QAFDA,UAEC;AAAA,QADDC,kBACC,QADDA,kBACC;;AAAA;;AACD,SAAKJ,QAAL,GAAgBA,QAAhB;AAEA,SAAKK,gBAAL,GAAwBzH,QAAQ,CAACM,aAAT,CAAuB,mBAAvB,CAAxB;AACA,SAAKoH,cAAL,GAAsB,KAAKD,gBAAL,CAAsBnH,aAAtB,CAAoC,0BAApC,CAAtB;AACA,SAAKqH,WAAL,GAAmB,KAAKF,gBAAL,CAAsBnH,aAAtB,CAAoC,sBAApC,CAAnB;AACA,SAAKsH,aAAL,GAAqBP,MAAM,CAACE,UAAD,CAA3B;AAEA,SAAKG,cAAL,CAAoBG,SAApB,GAAgC,EAAhC;AACA,SAAKC,UAAL,GAAkB,EAAlB;AAEA,QAAIC,aAAa,GAAGR,UAApB,CAXC,CAaD;;AACAD,sBAAkB,CAAClF,OAAnB,CAA2B,UAAC4F,KAAD,EAAQC,UAAR,EAAuB;AAChD,UAAID,KAAK,CAACjB,SAAN,CAAgBmB,QAAhB,CAAyB,kCAAzB,CAAJ,EAAkE;AAChE,YAAI,KAAI,CAACH,aAAL,GAAqBE,UAAzB,EAAqCF,aAAa;AAClD;AACD;;AACD,UAAMI,QAAQ,GAAGH,KAAK,CAACI,SAAN,CAAgB,IAAhB,CAAjB;;AACA,WAAI,CAACV,cAAL,CAAoBW,WAApB,CAAgCF,QAAhC;;AACA,WAAI,CAACL,UAAL,CAAgBlG,IAAhB,CAAqBuG,QAArB;AACD,KARD;AAUAG,+BAAI,CAACC,KAAL,CAAW,KAAKb,cAAhB;AAEA,SAAKc,aAAL,GAAqB,KAAKd,cAAL,CAAoBpH,aAApB,CAAkC,sBAAlC,CAArB;AAEA,SAAKC,MAAL,GAAc,IAAIkI,sBAAJ,EAAd,CA5BC,CA8BD;;AACA,QAAMC,gBAAgB,GAAG,EAAzB;AAEArB,UAAM,CAACjF,OAAP,CAAe,UAAAuG,KAAK,EAAI;AACtB,UAAIA,KAAK,CAACC,YAAN,CAAmB,0BAAnB,CAAJ,EAAoD;AACpDF,sBAAgB,CAAC9G,IAAjB,CAAsB;AACpBiH,WAAG,EAAEF,KAAK,CAACG,OAAN,CAAcC,IADC;AAEpBC,YAAI,EAAEL,KAAK,CAACG,OAAN,CAAcC,IAFA;AAGpBE,SAAC,EAAEN,KAAK,CAACG,OAAN,CAAcI,WAHG;AAIpBC,SAAC,EAAER,KAAK,CAACG,OAAN,CAAcM;AAJG,OAAtB;AAMD,KARD,EAjCC,CA2CD;;AACA,QAAMC,eAAe,GAAGxK,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,IAA4C,CAA5C,GAAgD,EAAxE;AAEA,QAAMC,iBAAiB,GAAG;AACxB9H,WAAK,EAAEsG,aADiB;AAExByB,cAAQ,EAAE;AAAEC,WAAG,EAAE,CAAP;AAAUC,cAAM,EAAEL;AAAlB,OAFc;AAGxBM,kBAAY,EAAE,KAHU;AAIxBC,YAAM,EAAE,KAJgB;AAKxBC,aAAO,EAAE,KALe;AAMxBC,eAAS,EAAE,KANa;AAOxBC,aAAO,EAAE,KAPe;AAQxBC,iBAAW,EAAE,KARW;AASxBC,mBAAa,EAAE,KATS;AAUxBC,qBAAe,EAAE,IAVO;AAWxBC,aAAO,EAAE,KAXe;AAYxBC,UAAI,EAAE,IAZkB;AAaxBC,6BAAuB,EAAE,KAbD;AAcxBC,gBAAU,EAAE,KAdY;AAexBC,uBAAiB,EAAE;AAfK,KAA1B;;AAkBA,QAAI,KAAKnD,QAAL,CAAcoD,aAAd,KAAgC,QAAhC,IACE3L,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,KAA6C,KAAKlC,QAAL,CAAcoD,aAAd,KAAgC,SAD/E,IAEE3L,yBAAM,CAAC4L,oBAAP,CAA4B,GAA5B,KAAoC,KAAKrD,QAAL,CAAcoD,aAAd,KAAgC,QAF1E,EAEqF;AACnFjB,uBAAiB,CAACmB,gBAAlB,GAAqC,YAAM;AACzC,YAAMC,WAAW,GAAG7K,MAAM,CAAC8K,WAAP,IAAsB5K,QAAQ,CAAC6K,eAAT,CAAyBC,SAAnE;;AACA,YAAMC,MAAM,GAAG,KAAI,CAACnD,aAAL,CAAmBtH,aAAnB,CAAiC,aAAjC,EAAgD0K,qBAAhD,EAAf;;AACA,eAAO;AAAEC,WAAC,EAAEF,MAAM,CAACG,IAAZ;AAAkBC,WAAC,EAAEJ,MAAM,CAACtB,GAAP,GAAakB,WAAlC;AAA+CxB,WAAC,EAAE4B,MAAM,CAACK;AAAzD,SAAP;AACD,OAJD;AAKD;;AAED,SAAKC,UAAL,GAAkB,IAAIC,oBAAJ,CAChB,KAAK7D,gBADW,EAEhB8D,+BAFgB,EAGhB7C,gBAHgB,EAIhBa,iBAJgB,CAAlB;AAOA,SAAKhJ,MAAL,CAAYiL,QAAZ,CAAqB,KAAK7D,WAA1B,EAAuC,OAAvC,EAAgD;AAAA,aAAM,KAAI,CAAC0D,UAAL,CAAgBI,KAAhB,EAAN;AAAA,KAAhD;AAEA,SAAK3D,UAAL,CAAgB1F,OAAhB,CAAwB,UAAC4F,KAAD,EAAQvG,KAAR,EAAkB;AACxC,WAAI,CAAClB,MAAL,CAAYiL,QAAZ,CAAqBxD,KAArB,EAA4B,OAA5B,EAAqC,YAAM;AACzC,aAAI,CAACqD,UAAL,CAAgBK,IAAhB,CAAqBjK,KAArB;AACD,OAFD;AAGD,KAJD,EAnFC,CAyFD;AACA;AACA;;AACA,QAAI,KAAK4J,UAAL,CAAgBtF,OAAhB,CAAwB4F,SAA5B,EAAuC;AACrC,WAAKN,UAAL,CAAgBtF,OAAhB,CAAwB6F,mBAAxB,GAA8C,KAA9C;AACD,KAFD,MAEO;AACL,WAAKP,UAAL,CAAgBQ,MAAhB,CAAuB,WAAvB,EAAoC,YAAM;AACxC,aAAI,CAACR,UAAL,CAAgBtF,OAAhB,CAAwB6F,mBAAxB,GAA8C,KAA9C;AACD,OAFD;AAGD;;AAED,SAAKP,UAAL,CAAgBQ,MAAhB,CAAuB,aAAvB,EAAsC,YAAM;AAC1C,UAAMpK,KAAK,GAAG,KAAI,CAAC4J,UAAL,CAAgBS,eAAhB,EAAd;;AACA,UAAI,KAAI,CAACtD,aAAT,EAAwB;AACtB,aAAI,CAACA,aAAL,CAAmBzB,SAAnB,CAA6BzE,MAA7B,CAAoC,qBAApC;AACD;;AACD,WAAI,CAACkG,aAAL,GAAqB,KAAI,CAACV,UAAL,CAAgBrG,KAAhB,CAArB;;AACA,WAAI,CAAC+G,aAAL,CAAmBzB,SAAnB,CAA6BC,GAA7B,CAAiC,qBAAjC;;AAEA,UAAM+E,UAAU,GAAG,KAAI,CAACvD,aAAL,CAAmBvC,YAAnB,CAAgC,wBAAhC,CAAnB;;AACA,UAAM0C,KAAK,GAAGtB,MAAM,CAAC0E,UAAD,CAApB;;AAEA,WAAI,CAACC,0BAAL;;AAEAxE,wBAAkB,CAACuE,UAAD,CAAlB;AACA,WAAI,CAACnE,aAAL,GAAqBe,KAArB;AACD,KAfD;AAiBA,SAAK0C,UAAL,CAAgBQ,MAAhB,CAAuB,OAAvB,EAAgC,YAAM;AACpCI,mDAAe,CAAC,KAAI,CAACxE,gBAAN,CAAf;;AACA,WAAI,CAACG,aAAL,CAAmBsE,KAAnB;AACD,KAHD;AAKA,SAAKb,UAAL,CAAgBQ,MAAhB,CAAuB,SAAvB,EAAkC,YAAM;AACtC,WAAI,CAACtL,MAAL,CAAY4L,aAAZ;AACD,KAFD,EA1HC,CA8HD;;AACA,SAAK5L,MAAL,CAAYiL,QAAZ,CAAqB,KAAK9D,cAA1B,EAA0C,YAA1C,EAAwD,YAAM;AAC5D,UAAI7I,yBAAM,CAAC4L,oBAAP,CAA4B,GAA5B,CAAJ,EAAsC;AACpC,aAAI,CAACY,UAAL,CAAgBtF,OAAhB,CAAwBkE,aAAxB,GAAwC,IAAxC;AACD;AACF,KAJD;AAMA,SAAK1J,MAAL,CAAYiL,QAAZ,CAAqB,KAAK9D,cAA1B,EAA0C,YAA1C,EAAwD,YAAM;AAC5D,UAAI7I,yBAAM,CAAC4L,oBAAP,CAA4B,GAA5B,CAAJ,EAAsC;AACpC,aAAI,CAACY,UAAL,CAAgBtF,OAAhB,CAAwBkE,aAAxB,GAAwC,KAAxC;AACD;AACF,KAJD,EArIC,CA2ID;AACA;;AACA,QAAMmC,QAAQ,GAAG,SAAXA,QAAW,CAAAtK,CAAC,EAAI;AACpB,UAAIA,CAAC,CAACC,GAAF,KAAU,QAAd,EAAwB;AACtBsF,cAAM,CAAC,CAAD,CAAN,CAAUgF,UAAV,CAAqB/L,aAArB,CAAmC,uBAAnC,EAA4D4L,KAA5D;AACD;AACF,KAJD;;AAMA,SAAK3L,MAAL,CAAYiL,QAAZ,CAAqB1L,MAArB,EAA6B,SAA7B,EAAwC,UAAAgC,CAAC;AAAA,aAAIsK,QAAQ,CAACtK,CAAD,CAAZ;AAAA,KAAzC;AAEA,SAAKuJ,UAAL,CAAgBiB,IAAhB;AAEAC,2CAAS,CAAC,KAAK9E,gBAAN,CAAT;;AAEA,SAAKuE,0BAAL;AACD;;;;iDAE4B;AAC3B;AACA;AACA,UAAInN,yBAAM,CAAC4L,oBAAP,CAA4B,GAA5B,CAAJ,EAAsC;AACpC,YAAM+B,WAAW,GAAG,KAAKhE,aAAL,CAAmBwC,qBAAnB,EAApB;AACA,YAAMyB,kBAAkB,GAAG,KAAK/E,cAAL,CAAoBsD,qBAApB,EAA3B;;AAEA,YAAIwB,WAAW,CAACtB,IAAZ,GAAmBsB,WAAW,CAACpB,KAA/B,GAAuCqB,kBAAkB,CAACrB,KAA9D,EAAqE;AACnE,eAAK1D,cAAL,CAAoBgF,UAApB,GAAiC,KAAKlE,aAAL,CAAmBmE,UAAnB,GAC7BH,WAAW,CAACpB,KADiB,GACTqB,kBAAkB,CAACrB,KADV,GACkB,EADnD;AAED,SAHD,MAGO,IAAI,KAAK5C,aAAL,CAAmBmE,UAAnB,GAAgC,KAAKjF,cAAL,CAAoBgF,UAAxD,EAAoE;AACzE,eAAKhF,cAAL,CAAoBgF,UAApB,GAAiC,KAAKlE,aAAL,CAAmBmE,UAAnB,GAAgC,EAAjE;AACD;AACF;AACF;;;6BAEQ;AACP,WAAKtB,UAAL,CAAgBjH,OAAhB;AACD;;;;;;;;;;;;;;ACjMH;AACA;AACA;AACA;AAEA;AACA;AACA;;IAEqB+C,6B;;;AACnB,gCAA2C;AAAA;;AAAA,QAA7B9H,EAA6B,QAA7BA,EAA6B;AAAA,QAAzB+H,QAAyB,QAAzBA,QAAyB;AAAA,QAAfwF,WAAe,QAAfA,WAAe;;AAAA;;AACzC,SAAKvN,EAAL,GAAUA,EAAV;AACA,SAAK+H,QAAL,GAAgBA,QAAhB;AACA,SAAKwF,WAAL,GAAmBA,WAAW,IAAI,KAAlC;AAEA,SAAKC,MAAL,GAAc,KAAKxN,EAAL,CAAQiB,aAAR,CAAsB,uBAAtB,CAAd;AACA,SAAK+G,MAAL,GAAc,KAAKwF,MAAL,CAAYC,gBAAZ,CAA6B,sBAA7B,CAAd;AACA,SAAKC,WAAL,GAAmB,KAAKF,MAAL,CAAYC,gBAAZ,CAA6B,4BAA7B,CAAnB;AACA,SAAKE,UAAL,GAAkB,KAAKH,MAAL,CAAYvM,aAAZ,CAA0B,uBAA1B,CAAlB;AACA,SAAK2M,iBAAL,GAAyB,KAAK5N,EAAL,CAAQiB,aAAR,CAAsB,kCAAtB,CAAzB;AACA,SAAKwH,UAAL,GAAkB,KAAKzI,EAAL,CAAQyN,gBAAR,CAAyB,0BAAzB,CAAlB;AAEA,SAAKlF,aAAL,GAAqB,KAAKiF,MAAL,CAAYvM,aAAZ,CAA0B,kBAA1B,CAArB;AACA,SAAK4M,iBAAL,GAAyB,KAAKD,iBAAL,CAAuB3M,aAAvB,CAAqC,sBAArC,CAAzB;AACA,SAAK6M,aAAL,GAAqB,IAArB;AACA,SAAKpF,aAAL,GAAqBqF,KAAK,CAACC,SAAN,CAAgB9N,OAAhB,CAAwB+N,IAAxB,CAA6B,KAAKjG,MAAlC,EAA0C,KAAKO,aAA/C,CAArB;AAEA,SAAK2F,aAAL,GAAqB,KAAKC,gBAAL,CAAsBnK,IAAtB,CAA2B,IAA3B,CAArB;AACA,SAAKoK,aAAL,GAAqB,KAAKA,aAAL,CAAmBpK,IAAnB,CAAwB,IAAxB,CAArB;AAEA,SAAK9C,MAAL,GAAc,IAAIkI,sBAAJ,EAAd;AAEA,SAAKlI,MAAL,CAAYiL,QAAZ,CAAqB,KAAKyB,iBAA1B,EAA6C,OAA7C,EAAsD,UAAAnL,CAAC;AAAA,aAAI,KAAI,CAAC4L,iBAAL,CAAuB5L,CAAvB,CAAJ;AAAA,KAAvD;AACAjD,6BAAM,CAAC8O,kBAAP,CAA0B,KAAKF,aAA/B;;AAEA,QAAI,KAAKrG,QAAL,CAAcoD,aAAd,KAAgC,UAApC,EAAgD;AAC9C,WAAKoD,WAAL,GAAmB,IAAnB;;AAEA,UAAMC,WAAW,GAAG,SAAdA,WAAc,CAAA/L,CAAC,EAAI;AACvBA,SAAC,CAACgM,eAAF;;AACA,aAAI,CAACC,gBAAL;AACD,OAHD;;AAKA,WAAKxN,MAAL,CAAYiL,QAAZ,CAAqB,KAAKwB,UAA1B,EAAsC,OAAtC,EAA+C,UAAAlL,CAAC;AAAA,eAAI+L,WAAW,CAAC/L,CAAD,CAAf;AAAA,OAAhD;AACA,WAAKvB,MAAL,CAAYiL,QAAZ,CAAqB,KAAKqB,MAA1B,EAAkC,OAAlC,EAA2C,UAAA/K,CAAC;AAAA,eAAI+L,WAAW,CAAC/L,CAAD,CAAf;AAAA,OAA5C;AACD;;AAED,QAAI,KAAK8F,aAAL,CAAmBgB,YAAnB,CAAgC,0BAAhC,CAAJ,EAAiE;AAC/D,UAAMxC,OAAO,GAAG,KAAKwB,aAAL,CAAmBtH,aAAnB,CAAiC,cAAjC,CAAhB;AACA,WAAK6M,aAAL,GAAqB,IAAIrH,wBAAJ,CAAUM,OAAV,CAArB;AACD,KAHD,MAGO,IAAI,KAAKgB,QAAL,CAAc4G,UAAd,KAA6B,UAAjC,EAA6C;AAClD,UAAInP,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,CAAJ,EAA+C;AAC7C,aAAK2E,eAAL;AACD;AACF;;AAED,QAAIpP,yBAAM,CAAC4L,oBAAP,CAA4B,GAA5B,CAAJ,EAAsC;AACpC,WAAKyD,cAAL;AACD;;AAED,QAAI,KAAKtB,WAAT,EAAsB;AACpBtE,iCAAI,CAACC,KAAL,CAAW,KAAKlJ,EAAhB;AACD;;AAED,SAAK8O,yBAAL;AACD;;;;oCAEe;AACd,UAAItP,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,CAAJ,EAA+C;AAC7C,aAAK8E,gBAAL;AACD,OAFD,MAEO;AACL,aAAKF,cAAL;AACD;;AAED,UAAIrP,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,KAA6C,CAAC,KAAK+E,KAAvD,EAA8D;AAC5D,aAAKJ,eAAL;AACD,OAFD,MAEO,IAAIpP,yBAAM,CAAC4L,oBAAP,CAA4B,GAA5B,CAAJ,EAAsC;AAC3C,aAAK6D,iBAAL;AACD;;AAED,WAAKH,yBAAL;AACD;;;yCAEoB1M,K,EAAO;AAC1B,UAAI,KAAK8M,QAAT,EAAmB;AACjB,aAAKA,QAAL,CAAcC,MAAd,CAAqB/M,KAArB;AACD,OAFD,MAEO;AACL,YAAMkH,KAAK,GAAG,KAAKtB,MAAL,CAAY5F,KAAZ,CAAd;;AACA,aAAKgN,YAAL,CAAkB9F,KAAlB;AACD;AACF;;;iCAEYA,K,EAAO;AAClB,WAAKf,aAAL,CAAmBb,SAAnB,CAA6BzE,MAA7B,CAAoC,iBAApC;AACA,WAAKsF,aAAL,GAAqBe,KAArB;AACA,WAAKf,aAAL,CAAmBb,SAAnB,CAA6BC,GAA7B,CAAiC,iBAAjC;AAEA,UAAM0H,UAAU,GAAG,KAAK9G,aAAL,CAAmBkB,OAAnB,CAA2B6F,iBAA9C;AACA,WAAK5G,aAAL,GAAqB6G,QAAQ,CAACF,UAAD,EAAa,EAAb,CAA7B;AAEA,WAAKxB,iBAAL,CAAuBnG,SAAvB,CAAiCzE,MAAjC,CAAwC,qBAAxC;AACA,WAAK4K,iBAAL,GAAyB,KAAKpF,UAAL,CAAgB4G,UAAhB,CAAzB;AACA,WAAKxB,iBAAL,CAAuBnG,SAAvB,CAAiCC,GAAjC,CAAqC,qBAArC;;AAEA,UAAI,KAAKmG,aAAT,EAAwB;AACtB,aAAKA,aAAL,CAAmBnO,MAAnB;AACD;;AACD,WAAKmO,aAAL,GAAqB,IAArB;;AAEA,WAAKmB,iBAAL;;AAEA,UAAI,KAAK1G,aAAL,CAAmBgB,YAAnB,CAAgC,0BAAhC,CAAJ,EAAiE;AAC/D,YAAMxC,OAAO,GAAG,KAAKwB,aAAL,CAAmBtH,aAAnB,CAAiC,cAAjC,CAAhB;AACA,aAAK6M,aAAL,GAAqB,IAAIrH,wBAAJ,CAAUM,OAAV,CAArB;AACA,aAAK+G,aAAL,CAAmB5G,YAAnB;;AACA,YAAI,KAAKa,QAAL,CAAcyH,qBAAlB,EAAyC;AACvC,eAAK1B,aAAL,CAAmB1G,QAAnB;AACD;AACF,OAPD,MAOO,IAAI,KAAKW,QAAL,CAAc4G,UAAd,KAA6B,UAAjC,EAA6C;AAClD,YAAInP,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,CAAJ,EAA+C;AAC7C,eAAK2E,eAAL;AACD;AACF;;AAED,WAAKE,yBAAL;AACD;;;qCAEgBW,O,EAAS;AACxB,UAAI,CAACA,OAAO,CAACC,cAAb,EAA6B;AAC3B;AACD;;AAED,UAAMpG,KAAK,GAAG,KAAKkE,MAAL,CAAYvM,aAAZ,iCAAkDwO,OAAO,CAACC,cAAR,CAAuB9L,EAAzE,SAAd;;AACA,WAAK+L,oBAAL,CAA0BrG,KAAK,CAACG,OAAN,CAAc6F,iBAAxC;AACD;;;sCAEiB;AAAA;;AAChB,UAAI3O,QAAQ,CAAC6K,eAAT,CAAyB9D,SAAzB,CAAmCmB,QAAnC,CAA4C,WAA5C,CAAJ,EAA8D;AAE9D,UAAM+G,aAAa,GAAG,KAAKrH,aAAL,CAAmBtH,aAAnB,CAAiC,aAAjC,CAAtB;AACA2O,mBAAa,CAACC,YAAd,CAA2B,WAA3B,EAAwC,KAAKtH,aAAL,CAAmB3B,YAAnB,CAAgC,WAAhC,CAAxC;AAEA,WAAKoI,KAAL,GAAa,IAAIc,wBAAJ,CAAUF,aAAV,EAAyB;AACpCG,qBAAa,EAAE,KAAKhI,QAAL,CAAc4G,UAAd,KAA6B,UAA7B,GACX,KAAK3O,EAAL,CAAQiB,aAAR,CAAsB,qBAAtB,CADW,GAEX,KAAKsH,aAH2B;AAIpCyH,kBAAU,EAAE,KAJwB;AAKpCC,wBAAgB,EAAE,KAAKlI,QAAL,CAAc4G,UAAd,KAA6B,UALX;AAMpCuB,mBAAW,EAAE,KANuB;AAOpCC,cAAM,EAAE,kBAAM;AACZ,cAAI,MAAI,CAACpI,QAAL,CAAc4G,UAAd,KAA6B,UAAjC,EAA6C;AAC3C,gBAAMyB,WAAW,GAAGzP,QAAQ,CAACM,aAAT,CAAuB,eAAvB,CAApB;AACA,gBAAMoP,UAAU,GAAG1P,QAAQ,CAACM,aAAT,CAAuB,oBAAvB,CAAnB;AACAmP,uBAAW,CAAC1I,SAAZ,CAAsBC,GAAtB,CAA0B,uBAA1B;AACA,gBAAI0I,UAAJ,EAAgBA,UAAU,CAAC3I,SAAX,CAAqBC,GAArB,CAAyB,uBAAzB;AACjB;AACF,SAdmC;AAepC2I,cAAM,EAAE,kBAAM;AACZ,cAAI,MAAI,CAACvI,QAAL,CAAc4G,UAAd,KAA6B,UAAjC,EAA6C;AAC3C,gBAAMyB,WAAW,GAAGzP,QAAQ,CAACM,aAAT,CAAuB,eAAvB,CAApB;AACA,gBAAMoP,UAAU,GAAG1P,QAAQ,CAACM,aAAT,CAAuB,oBAAvB,CAAnB;AACAmP,uBAAW,CAAC1I,SAAZ,CAAsBzE,MAAtB,CAA6B,uBAA7B;AACA,gBAAIoN,UAAJ,EAAgBA,UAAU,CAAC3I,SAAX,CAAqBzE,MAArB,CAA4B,uBAA5B;AACjB;AACF;AAtBmC,OAAzB,CAAb;AAwBD;;;wCAEmB;AAClB,UAAI,KAAK+L,KAAT,EAAgB;AACd,aAAKA,KAAL,CAAWuB,OAAX;AACA,aAAKvB,KAAL,GAAa,IAAb;AACD;AACF;;;qCAEgB;AAAA;;AACf,UAAI,KAAKE,QAAT,EAAmB;AAEnB,WAAKA,QAAL,GAAgB,IAAIsB,YAAJ,CAAa,KAAKhD,MAAlB,EAA0B;AACxCiD,qBAAa,EAAE,KADyB;AAExCC,sBAAc,EAAE,IAFwB;AAGxCC,oBAAY,EAAE,yBAH0B;AAIxCC,eAAO,EAAE,IAJ+B;AAKxCC,gBAAQ,EAAE,GAL8B;AAMxCC,kBAAU,EAAE,KAN4B;AAOxCC,oBAAY,EAAE,KAAKrI,aAPqB;AAQxCsI,gBAAQ,EAAE,KAR8B;AASxCC,uBAAe,EAAE,KATuB;AAUxCC,uBAAe,EAAE,KAVuB;AAWxCC,gBAAQ,EAAE,KAX8B;AAYxCC,0BAAkB,EAAE,GAZoB;AAaxCC,sBAAc,EAAE,KAbwB;AAcxCC,kBAAU,EAAE;AAd4B,OAA1B,CAAhB;AAiBA,WAAKC,aAAL,GAAqB,KAAKrQ,MAAL,CAAYiL,QAAZ,CAAqB,KAAKqB,MAA1B,EAAkC,WAAlC,EAA+C,YAAM;AACxE,cAAI,CAACgE,eAAL;AACD,OAFoB,CAArB;AAIA,WAAKtC,QAAL,CAAc/N,EAAd,CAAiB,QAAjB,EAA2B,UAAAiB,KAAK,EAAI;AAClC,cAAI,CAACgN,YAAL,CAAkB,MAAI,CAACpH,MAAL,CAAY5F,KAAZ,CAAlB;AACD,OAFD;AAIA,WAAK8M,QAAL,CAAc/N,EAAd,CAAiB,aAAjB,EAAgC,YAAM;AACpC;AACA,cAAI,CAACqM,MAAL,CAAYiE,IAAZ;AACD,OAHD,EA5Be,CAiCf;AACA;;AACA,UAAI,KAAK1J,QAAL,CAAcoD,aAAd,KAAgC,UAAhC,IACCxK,QAAQ,CAAC6K,eAAT,CAAyB9D,SAAzB,CAAmCmB,QAAnC,CAA4C,UAA5C,CADL,EAC8D;AAC5D,aAAKqG,QAAL,CAAc/N,EAAd,CAAiB,SAAjB,EAA4B,YAAM;AAChC,gBAAI,CAACuQ,MAAL,GAAc,IAAd;AACD,SAFD;AAGD;;AAED,WAAKF,eAAL;AACD;;;uCAEkB;AACjB,UAAI,KAAKtC,QAAT,EAAmB;AACjB,aAAK1B,MAAL,CAAY9F,SAAZ,CAAsBzE,MAAtB,CAA6B,kBAA7B;AACA,aAAKiM,QAAL,CAAcnK,OAAd;AACA,aAAKmK,QAAL,GAAgB,IAAhB;AACA,aAAKhO,MAAL,CAAYyQ,UAAZ,CAAuB,KAAKJ,aAA5B;AACD;AACF;;;sCAEiB9O,C,EAAG;AACnB,UAAImP,MAAJ,CADmB,CAGnB;AACA;;AACA,UAAInP,CAAC,CAACnB,MAAF,CAASoG,SAAT,CAAmBmB,QAAnB,CAA4B,oCAA5B,CAAJ,EAAuE;AACrE+I,cAAM,GAAGnP,CAAC,CAACnB,MAAX;AACD,OAFD,MAEO,IAAImB,CAAC,CAACnB,MAAF,CAAS0L,UAAT,CAAoBA,UAApB,CAA+BtF,SAA/B,CACRmB,QADQ,CACC,oCADD,CAAJ,EAC4C;AACjD+I,cAAM,GAAGnP,CAAC,CAACnB,MAAF,CAAS0L,UAAT,CAAoBA,UAA7B;AACD,OAHM,MAGA;AACL;AACD;;AAED,WAAK2C,oBAAL,CAA0BiC,MAAM,CAAChL,YAAP,CAAoB,wBAApB,CAA1B;AACD;;;sCAEiB;AAChB,WAAKgH,iBAAL,CAAuBlG,SAAvB,CAAiCzE,MAAjC,CAAwC,SAAxC,EADgB,CAGhB;;AACA,UAAM4O,eAAe,GAAG,KAAKC,iBAAL,IACnB,KAAKvJ,aAAL,CAAmBoD,qBAAnB,GAA2CoG,MADhD;AAEA,WAAKD,iBAAL,GAAyB,IAAzB;AAEA,WAAKtE,MAAL,CAAYwE,KAAZ,CAAkBD,MAAlB,aAA8BF,eAA9B;AACD;;;gDAE2B;AAAA;;AAC1B,UAAI,KAAK9J,QAAL,CAAckK,kBAAd,KAAqC,MAAzC,EAAiD;AAC/C,YAAI,KAAK1E,WAAT,EAAsB;AACpB,cAAI/N,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,CAAJ,EAA+C;AAC7C,iBAAKjK,EAAL,CAAQ0H,SAAR,CAAkBC,GAAlB,CAAsB,8BAAtB;AACD,WAFD,MAEO;AACL,iBAAKmK,iBAAL,GAAyB,KAAKvJ,aAAL,CAAmBoD,qBAAnB,GAA2CoG,MAApE;AACA,iBAAK/R,EAAL,CAAQ0H,SAAR,CAAkBzE,MAAlB,CAAyB,8BAAzB;AACD;AACF,SAR8C,CAU/C;AACA;AACA;AACA;;;AACA,YAAIzD,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,KACEzK,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,KAA6C,CAAC,KAAKsD,WADzD,EACuE;AACrE,cAAI,KAAKvN,EAAL,CAAQkS,UAAR,KAAuB,KAAKtE,iBAAhC,EAAmD;AACjD,gBAAMuE,YAAY,GAAGxR,QAAQ,CAACyR,aAA9B;AACA,iBAAKpS,EAAL,CAAQqS,YAAR,CAAqB,KAAKzE,iBAA1B,EAA6C,KAAKJ,MAAlD;AACA2E,wBAAY,CAACtF,KAAb,GAHiD,CAG3B;AACvB,WALoE,CAOrE;AACA;;;AACAjF,oBAAU,CAAC,YAAM;AACf,gBAAM0K,cAAc,GAAG,MAAI,CAAC7J,UAAL,CAAgB,CAAhB,EAAmBkD,qBAAnB,EAAvB;;AACA,gBAAM4G,UAAU,GAAG,MAAI,CAAC9J,UAAL,CAAgB,CAAhB,EAAmB+J,YAAnB,IACd/R,MAAM,CAACgS,gBAAP,CAAwB,MAAI,CAAChK,UAAL,CAAgB,CAAhB,CAAxB,CADL;AAEA,gBAAMiK,WAAW,GAAInD,QAAQ,CAACgD,UAAU,CAACI,UAAZ,EAAwB,EAAxB,CAAT,GAAwC,CAA5D;AACA,gBAAMC,OAAO,GAAG7E,KAAK,CAACC,SAAN,CAAgB6E,IAAhB,CAAqB5E,IAArB,CAA0B,MAAI,CAACxF,UAA/B,EACd,UAAAE,KAAK;AAAA,qBAAIA,KAAK,CAACgD,qBAAN,GAA8BE,IAA9B,GAAqCyG,cAAc,CAACzG,IAAxD;AAAA,aADS,CAAhB;;AAEA,gBAAI+G,OAAJ,EAAa;AACX,oBAAI,CAAChF,iBAAL,CAAuBoE,KAAvB,CAA6BjG,KAA7B,aAAwC,CAACuG,cAAc,CAACvG,KAAf,GAAuB2G,WAAxB,IAAuC,CAA/E;AACA,oBAAI,CAAC9E,iBAAL,CAAuBoE,KAAvB,CAA6Bc,QAA7B,aAA2C,CAACR,cAAc,CAACvG,KAAf,GAAuB2G,WAAxB,IAAuC,CAAlF;AACD;;AACD,kBAAI,CAAClB,eAAL;AACD,WAZS,EAYP,GAZO,CAAV;AAaD,SAvBD,MAuBO;AACL,cAAI,KAAKxR,EAAL,CAAQ+S,iBAAR,KAA8B,KAAKnF,iBAAvC,EAA0D;AACxD,iBAAK5N,EAAL,CAAQgJ,WAAR,CAAoB,KAAK4E,iBAAzB;AACD;;AACD,eAAKA,iBAAL,CAAuBoE,KAAvB,CAA6BjG,KAA7B,GAAqC,EAArC;AACA,eAAK6B,iBAAL,CAAuBoE,KAAvB,CAA6Bc,QAA7B,GAAwC,EAAxC;;AACA,eAAKtB,eAAL;AACD;;AAED,YAAIhS,yBAAM,CAAC4L,oBAAP,CAA4B,GAA5B,CAAJ,EAAsC;AACpC,eAAKuB,0BAAL;AACD;AACF,OAjDD,MAiDO;AACL,aAAK6E,eAAL;;AACA,aAAK7E,0BAAL;AACD;AACF;;;iDAE4B;AAC3B;AACA;AACA,UAAInN,yBAAM,CAAC4L,oBAAP,CAA4B,GAA5B,CAAJ,EAAsC;AACpC,YAAM+B,WAAW,GAAG,KAAKU,iBAAL,CAAuBlC,qBAAvB,EAApB;AACA,YAAMyB,kBAAkB,GAAG,KAAKQ,iBAAL,CAAuBjC,qBAAvB,EAA3B;;AAEA,YAAI,KAAKkC,iBAAL,CAAuBP,UAAvB,GAAoCH,WAAW,CAACpB,KAAhD,GACA,KAAK6B,iBAAL,CAAuBP,UADvB,GACoCD,kBAAkB,CAACrB,KAD3D,EACkE;AAChE,eAAK6B,iBAAL,CAAuBP,UAAvB,GAAoC,KAAKQ,iBAAL,CAAuBP,UAAvB,GAChCH,WAAW,CAACpB,KADoB,GACZqB,kBAAkB,CAACrB,KADP,GACe,EADnD;AAED,SAJD,MAIO,IAAI,KAAK8B,iBAAL,CAAuBP,UAAvB,GAAoC,KAAKM,iBAAL,CAAuBP,UAA/D,EAA2E;AAChF,eAAKO,iBAAL,CAAuBP,UAAvB,GAAoC,KAAKQ,iBAAL,CAAuBP,UAAvB,GAAoC,EAAxE;AACD;AACF;AACF;;;uCAEkB;AAAA;;AACjB,UAAI,KAAKoE,MAAT,EAAiB;AACf,aAAKA,MAAL,GAAc,KAAd;AACA;AACD;;AAED,UAAI,KAAKnJ,aAAL,CAAmBgB,YAAnB,CAAgC,0BAAhC,KACE/J,yBAAM,CAACyK,uBAAP,CAA+B,GAA/B,EAAoC,IAApC,KAA6C,KAAKlC,QAAL,CAAcoD,aAAd,KAAgC,QAD/E,IAEE3L,yBAAM,CAAC4L,oBAAP,CAA4B,GAA5B,KAAoC,KAAKrD,QAAL,CAAcoD,aAAd,KAAgC,SAF1E,EAEsF;AACpF;AACD;;AAED,WAAKoD,WAAL,GAAmB,IAAIyE,iCAAJ,CAAuB;AACxCjL,gBAAQ,EAAE,KAAKA,QADyB;AAExCC,cAAM,EAAE,KAAKA,MAF2B;AAGxCC,0BAAkB,EAAE,KAAKQ,UAHe;AAIxCP,kBAAU,EAAE,KAAKQ,aAJuB;AAKxCP,0BAAkB,EAAE,4BAAA/F,KAAK;AAAA,iBAAI,MAAI,CAACuN,oBAAL,CAA0BvN,KAA1B,CAAJ;AAAA;AALe,OAAvB,CAAnB;AAOD;;;6BAEQ;AACP,WAAKlB,MAAL,CAAY4L,aAAZ;AAEAtN,+BAAM,CAACyT,mBAAP,CAA2B,KAAK7E,aAAhC;;AAEA,UAAI,KAAKb,WAAT,EAAsB;AACpBtE,mCAAI,CAACiK,OAAL,CAAa,KAAKlT,EAAlB;AACD;;AAED,UAAI,KAAK8N,aAAT,EAAwB;AACtB,aAAKA,aAAL,CAAmBnO,MAAnB;AACD;;AAED,WAAKsP,iBAAL;;AACA,WAAKF,gBAAL;;AAEA,UAAI,KAAKR,WAAT,EAAsB;AACpB,aAAKA,WAAL,CAAiB5O,MAAjB;AACD;AACF;;;;;;;;;;;;;;;AClXH;AACA;AACA;AACA;AACA;AACA;;IAEqBwT,6B;;;AACnB,0BAAYzM,OAAZ,EAAqB;AAAA;;AACnB,SAAKnG,OAAL,GAAeC,gBAAC,CAACC,MAAD,CAAhB;AACA,SAAK2S,SAAL,GAAiB1M,OAAO,CAAC0M,SAAzB;AACA,SAAKC,QAAL,GAAgB3M,OAAO,CAAC2M,QAAxB;AACA,SAAKC,OAAL,GAAe5M,OAAO,CAAC4M,OAAvB;AACA,SAAKvL,QAAL,GAAgBrB,OAAO,CAACqB,QAAxB;AACA,SAAKwL,OAAL,GAAe7M,OAAO,CAAC6M,OAAvB;AACA,SAAKC,UAAL,GAAkB9M,OAAO,CAAC8M,UAA1B;AACA,SAAKC,SAAL,GAAiB/M,OAAO,CAAC+M,SAAzB;AACA,SAAKC,cAAL,GAAsBhN,OAAO,CAACgN,cAAR,IAA0B,IAAhD;AAEA,SAAKC,aAAL,GAAqB,IAArB;AAEA,SAAKC,YAAL,GAAoBlN,OAAO,CAACkN,YAA5B,CAbmB,CAenB;;AACA,SAAKC,KAAL,GAAa,KAAKT,SAAL,CAAevT,IAAf,CAAoB,qBAApB,CAAb;AACA,SAAKiU,iBAAL,GAAyB,KAAKV,SAAL,CAAevT,IAAf,CAAoB,oBAApB,CAAzB;AACA,SAAKkU,gBAAL,GAAwB,KAAKF,KAAL,CAAWhU,IAAX,CAAgB,iBAAhB,CAAxB;AACA,SAAKmU,eAAL,GAAuB,KAAKH,KAAL,CAAWhU,IAAX,CAAgB,uBAAhB,CAAvB;AACA,SAAKoU,WAAL,GAAmB,KAAKb,SAAL,CAAe,CAAf,EAAkBnS,aAAlB,CAAgC,6BAAhC,CAAnB;;AACA,QAAI,KAAKgT,WAAT,EAAsB;AACpB,WAAKC,eAAL,GAAuB,KAAKD,WAAL,CAAiBrN,YAAjB,CAA8B,MAA9B,CAAvB;AACD;;AAED,SAAKuN,aAAL,GAAqB;AACnBC,YAAM,EAAE,KAAKf,QAAL,CAAcxT,IAAd,CAAmB,cAAnB,CADW;AAEnBwU,iBAAW,EAAE,KAAKhB,QAAL,CAAcxT,IAAd,CAAmB,qBAAnB,CAFM;AAGnByU,qBAAe,EAAE,KAAKjB,QAAL,CAAcxT,IAAd,CAAmB,yBAAnB,CAHE;AAInB0U,0BAAoB,EAAE,KAAKlB,QAAL,CAAcxT,IAAd,CAAmB,gCAAnB,CAJH;AAKnB2U,YAAM,EAAE,KAAKnB,QAAL,CAAcxT,IAAd,CAAmB,oBAAnB,CALW;AAMnB4U,sBAAgB,EAAE,KAAKpB,QAAL,CAAcxT,IAAd,CAAmB,0BAAnB,CANC;AAOnB6U,wBAAkB,EAAE,KAAKrB,QAAL,CAAcxT,IAAd,CAAmB,4BAAnB,CAPD;AAQnB8U,UAAI,EAAE,KAAKtB,QAAL,CAAcxT,IAAd,CAAmB,oBAAnB;AARa,KAArB;AAWA,SAAK+U,KAAL,GAAa,IAAIC,wBAAJ,CAAU,KAAKhB,KAAf,CAAb;;AAEA,QAAI,KAAKN,OAAL,IAAgB,KAAKA,OAAL,CAAauB,MAAb,CAAoBzV,MAAxC,EAAgD;AAC9C,WAAK0V,OAAL,GAAe,IAAIjN,6BAAJ,CAAmB;AAChC9H,UAAE,EAAE0G,OAAO,CAACqO,OADoB;AAEhChN,gBAAQ,EAAE,KAAKA,QAFiB;AAGhCwF,mBAAW,EAAE7G,OAAO,CAAC6G;AAHW,OAAnB,CAAf;AAKD;;AAED,SAAKvL,WAAL;;AACA,SAAKgT,YAAL;AACD;;;;6BAEQ;AACP,WAAKnB,KAAL,CAAWrS,GAAX,4BAAmC,KAAKiS,SAAxC;AACA,WAAKlT,OAAL,CAAaiB,GAAb,4BAAqC,KAAKiS,SAA1C;AACA,WAAKmB,KAAL,CAAWjV,MAAX;;AAEA,UAAI,KAAKgU,aAAT,EAAwB;AACtB,aAAKA,aAAL,CAAmBhU,MAAnB;AACD;;AAED,UAAI,KAAKoV,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAapV,MAAb;AACD;AACF;;;kCAEa;AAAA;;AACZ,WAAKY,OAAL,CAAaY,EAAb,2DAAmE,KAAKsS,SAAxE,GAAqF,UAACrS,KAAD,EAAQqE,IAAR;AAAA,eAAiB,KAAI,CAACwP,cAAL,CAAoB7T,KAApB,EAA2BqE,IAA3B,CAAjB;AAAA,OAArF;AACA,WAAKoO,KAAL,CAAW1S,EAAX,kCAAwC,KAAKsS,SAA7C,GAA0D,UAAArS,KAAK;AAAA,eAAI,KAAI,CAAC8T,gBAAL,CAAsB9T,KAAtB,CAAJ;AAAA,OAA/D;AACD;;;mCAEc;AACb,UAAI,CAAC,KAAK2S,gBAAL,CAAsB1U,MAA3B,EAAmC;AAEnC,WAAKsU,aAAL,GAAqB,IAAIwB,sCAAJ,CACnB,KAAK5B,OADc,EAEnB,KAAKQ,gBAFc,EAGnB,KAAKC,eAHc,EAInB;AAAEoB,qBAAa,EAAE;AAAjB,OAJmB,CAArB;AAOA,WAAKzB,aAAL,CAAmB0B,aAAnB,CAAiC,KAAK3B,cAAtC;AACD;;;mCAEctS,K,EAAOqE,I,EAAM;AAC1B,UAAIA,IAAI,CAAC8N,OAAL,KAAiB,KAAKA,OAA1B,EAAmC;AADT,UAIxB9D,OAJwB,GAMtBhK,IANsB,CAIxBgK,OAJwB;AAAA,UAKxB6F,SALwB,GAMtB7P,IANsB,CAKxB6P,SALwB;;AAQ1B,UAAIA,SAAJ,EAAe;AACb;AACD,OAVyB,CAY1B;;;AACA,WAAKvB,gBAAL,CAAsBwB,GAAtB,CAA0B9P,IAAI,CAACgK,OAAL,CAAa7L,EAAvC;AACA,WAAKmR,OAAL,CAAa7G,aAAb,CAA2BuB,OAA3B,EAd0B,CAgB1B;;AACA,WAAK+F,YAAL,CAAkB/F,OAAlB;;AACA,WAAKgG,UAAL,CAAgBhG,OAAhB;;AACA,WAAKiG,YAAL,CAAkBjG,OAAlB;;AACA,WAAKkG,aAAL,CAAmBlG,OAAnB;;AACA,WAAKmG,kBAAL,CAAwBnG,OAAxB;;AACA,WAAKoG,sBAAL,CAA4BpG,OAA5B;;AAEA,UAAI,KAAK+D,UAAT,EAAqB;AACnB,YAAMsC,GAAG,aAAM,KAAKvC,OAAL,CAAawC,MAAnB,cAA6BvV,gBAAC,CAACwV,KAAF,CAAQ;AAAEvG,iBAAO,EAAEA,OAAO,CAAC7L;AAAnB,SAAR,CAA7B,CAAT;AACAkH,eAAO,CAACmL,YAAR,CAAqB,EAArB,EAAyB,SAAzB,EAAoCH,GAApC;AACD;AACF;;;iCAEYrG,O,EAAS;AACpB;AACA,UAAMyG,eAAe,GACnB,CAAC,CAACzG,OAAO,CAAC0G,gBAAV,IAA8B1G,OAAO,CAAC0G,gBAAR,GAA2B1G,OAAO,CAAC2G,KADnE;AAGA,WAAKjC,aAAL,CAAmBG,eAAnB,CAAmC+B,WAAnC,CAA+C,SAA/C,EAA0DH,eAA1D;AACA,WAAK/B,aAAL,CAAmBI,oBAAnB,CAAwC+B,IAAxC,CACEC,OAAO,CAACC,WAAR,CAAoB/G,OAAO,CAAC0G,gBAA5B,EAA8C,KAAKpO,QAAL,CAAc0O,YAA5D,CADF;AAGAC,oBAAiB,CAACC,MAAlB,CAAyB,KAAKxC,aAAL,CAAmBI,oBAAnB,CAAwC,CAAxC,CAAzB,EAToB,CAWpB;;AACA,WAAKJ,aAAL,CAAmBE,WAAnB,CAA+BiC,IAA/B,CACEC,OAAO,CAACC,WAAR,CAAoB/G,OAAO,CAAC2G,KAA5B,EAAmC,KAAKrO,QAAL,CAAc0O,YAAjD,CADF;AAGAC,oBAAiB,CAACC,MAAlB,CAAyB,KAAKxC,aAAL,CAAmBE,WAAnB,CAA+B,CAA/B,CAAzB;AACD;;;+BAEU5E,O,EAAS;AAClB,UAAIA,OAAO,CAACmH,GAAR,KAAgB,EAApB,EAAwB;AACtB,aAAKzC,aAAL,CAAmBQ,IAAnB,CAAwBkC,MAAxB,GAAiChV,QAAjC,CAA0C,oBAA1C;AACD,OAFD,MAEO;AACL,aAAKsS,aAAL,CAAmBQ,IAAnB,CAAwBkC,MAAxB,GAAiChU,WAAjC,CAA6C,oBAA7C;AACD;;AAED,WAAKsR,aAAL,CAAmBQ,IAAnB,CAAwB2B,IAAxB,CAA6B7G,OAAO,CAACmH,GAArC;AACD;;;iCAEYnH,O,EAAS;AACpB,UAAMqH,UAAU,GAAGrH,OAAO,CAAC0G,gBAAR,GAA2B1G,OAAO,CAAC0G,gBAAR,GAA2B1G,OAAO,CAAC2G,KAA9D,GAAsE,CAAzF;AACA,WAAKjC,aAAL,CAAmBK,MAAnB,CAA0BuC,MAA1B,CAAiC,CAAC,CAACD,UAAnC;;AAEA,UAAI,KAAK3C,aAAL,CAAmBM,gBAAnB,CAAoCpV,MAAxC,EAAgD;AAC9C;AACA,aAAK8U,aAAL,CAAmBM,gBAAnB,CAAoC6B,IAApC,CACEC,OAAO,CAACC,WAAR,CAAoBM,UAApB,EAAgC,KAAK/O,QAAL,CAAc0O,YAA9C,CADF;AAGAC,sBAAiB,CAACC,MAAlB,CAAyB,KAAKxC,aAAL,CAAmBM,gBAAnB,CAAoC,CAApC,CAAzB;AACD;;AAED,UAAI,KAAKN,aAAL,CAAmBO,kBAAnB,CAAsCrV,MAA1C,EAAkD;AAChD;AACA,YAAM2X,eAAe,GAAGC,IAAI,CAACC,KAAL,CAAYJ,UAAU,GAAG,GAAd,GAAqBrH,OAAO,CAAC0G,gBAAxC,CAAxB;AACA,aAAKhC,aAAL,CAAmBO,kBAAnB,CAAsC4B,IAAtC,CAA2CU,eAA3C;AACD;AACF;;;kCAEavH,O,EAAS;AACrB,UAAIA,OAAO,CAAC0H,SAAZ,EAAuB;AACrB,aAAKrD,iBAAL,CAAuBwC,IAAvB,CAA4B,KAAKhD,OAAL,CAAa8D,iBAAzC;AACA,aAAKtD,iBAAL,CACGjR,WADH,CACe,UADf,EAEGwU,IAFH,CAEQ,UAFR,EAEoB,KAFpB;AAGD,OALD,MAKO;AACL,aAAKvD,iBAAL,CAAuBwC,IAAvB,CAA4B,KAAKhD,OAAL,CAAagE,mBAAzC;AACA,aAAKxD,iBAAL,CACGjS,QADH,CACY,UADZ,EAEGwV,IAFH,CAEQ,UAFR,EAEoB,IAFpB;AAGD;AACF;;;uCAEkB5H,O,EAAS;AAC1B,UAAI,KAAK1H,QAAL,CAAcwP,eAAlB,EAAmC;AACjC,YAAMC,WAAW,GAAG,KAAK3D,KAAL,CAAW,CAAX,EAAc5S,aAAd,CAA4B,4BAA5B,CAApB;;AACA,YAAIuW,WAAJ,EAAiB;AACfA,qBAAW,CAACC,SAAZ,GAAwBhI,OAAO,CAAC/I,OAAR,CAAgB6I,QAAQ,CAACiI,WAAW,CAAC/N,OAAZ,CAAoBiO,iBAArB,EAAwC,EAAxC,CAAxB,CAAxB;AACD;AACF;AACF;;;2CAEsBjI,O,EAAS;AAC9B,UAAI,KAAKwE,WAAT,EAAsB;AACpB,aAAKA,WAAL,CAAiBpE,YAAjB,CAA8B,MAA9B,YAAyC,KAAKqE,eAA9C,sBAAyEzE,OAAO,CAAC7L,EAAjF;AACD;AACF;;;qCAEgBxC,K,EAAO;AACtBA,WAAK,CAACoB,cAAN;AAEA,UAAMmV,QAAQ,GAAG,KAAK9D,KAAL,CAAW+D,cAAX,EAAjB;AAEA,UAAMlR,OAAO,GAAG;AACdmR,kBAAU,EAAE,KAAK/D,iBADH;AAEd/L,gBAAQ,EAAE;AACR+P,qBAAW,EAAE,KAAK/P,QAAL,CAAc0O,YADnB;AAERsB,yBAAe,EAAE,KAAKhQ,QAAL,CAAciQ;AAFvB;AAFI,OAAhB;AAQAC,wCAAe,CAAChL,IAAhB,CAAqB0K,QAArB,EAA+BjR,OAA/B,EAAwC,KAAKkN,YAA7C;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IClNkBsE,M;;;;;;;;;;AACnB;;;;;;4BAMQpD,M,EAAQqD,I,EAAM;AACpB,UAAIC,UAAU,GAAGtD,MAAjB;;AACA,UAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9BsD,kBAAU,GAAG,CAACtD,MAAD,CAAb;AACD;;AAED,WAAK,IAAI/U,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqY,UAAU,CAAC/Y,MAA/B,EAAuCU,CAAC,EAAxC,EAA4C;AAC1C,aAAKsY,SAAL,CAAe,KAAKC,gBAAL,CAAsBF,UAAU,CAACrY,CAAD,CAAhC,EAAqCoY,IAArC,CAAf;AACD;AACF;AAED;;;;;;;;8BAKUI,I,EAAM;AACd,UAAMC,KAAK,GAAG,IAAIC,KAAJ,EAAd;AACAD,WAAK,CAAChP,GAAN,GAAY+O,IAAZ;AACA,aAAOC,KAAP;AACD;AAED;;;;;;;;;;uCAOmC;AAAA,UAAlBhP,GAAkB,uEAAZ,IAAY;AAAA,UAAN2O,IAAM;;AACjC,UAAI,CAACA,IAAL,EAAW;AACT,eAAO,IAAP;AACD;;AAED,UAAIA,IAAI,KAAK,QAAb,EAAuB;AACrB,eAAO,KAAKO,cAAL,CAAoBlP,GAApB,CAAP;AACD;;AAED,UAAM3F,KAAK,GAAG2F,GAAG,CAAC3F,KAAJ,CAAU,sDAAV,CAAd;;AAEA,UAAIA,KAAJ,EAAW;AACT,YAAM8U,MAAM,GAAGnP,GAAG,CAAC1D,KAAJ,CAAUjC,KAAK,CAAC,CAAD,CAAf,CAAf;AACA,YAAM+U,MAAM,GAAG/U,KAAK,CAAC,CAAD,CAApB;AAEA,eAAO,KAAK6U,cAAL,WAAuBC,MAAM,CAAC,CAAD,CAA7B,cAAoCR,IAApC,SAA2CS,MAA3C,EAAP;AACD;;AAEDC,aAAO,CAACC,IAAR,cAAmBX,IAAnB,yBAAsC3O,GAAtC;AACA,aAAO,IAAP;AACD;;;mCAEc+O,I,EAAM;AACnB,aAAOA,IAAI,CAACQ,OAAL,CAAa,WAAb,EAA0B,EAA1B,CAAP;AACD;;;;;;;;;;;;;;AC5DH;AACA;AACA;AAKA;AACA;;IAEMd,+B;;;AACJ,6BAAc;AAAA;;AACZ,SAAKN,QAAL,GAAgB,EAAhB;AACA,SAAK5P,QAAL,GAAgB,EAAhB;AACA,SAAK7G,MAAL,GAAc,EAAd;AACA,SAAKgX,MAAL,GAAc,IAAIA,MAAJ,EAAd;AACA,SAAKc,cAAL,GAAsB,mBAAtB;AACA,SAAKC,YAAL,GAAoBzY,gBAAC,4BAAqB,KAAKwY,cAA1B,EAArB;AACA,SAAK5G,aAAL,GAAqB,IAArB;AACA,SAAK8G,MAAL,GAAc,IAAd;AAEA,SAAKC,SAAL,GAAiBxY,QAAQ,CAACM,aAAT,CAAuB,KAAK+X,cAA5B,CAAjB;AAEA,SAAKI,OAAL,GAAe,KAAKA,OAAL,CAAapV,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKqV,QAAL,GAAgB,KAAKA,QAAL,CAAcrV,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKsV,UAAL,GAAkB,KAAKA,UAAL,CAAgBtV,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKuV,WAAL,GAAmB,KAAKA,WAAL,CAAiBvV,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAK3C,oBAAL,GAA4B,KAAKA,oBAAL,CAA0B2C,IAA1B,CAA+B,IAA/B,CAA5B;AAEA,SAAKzC,SAAL,GAAiB,KAAKA,SAAL,CAAeyC,IAAf,CAAoB,IAApB,CAAjB;AAEA,SAAKwV,aAAL,GAAqB,IAAIlZ,gCAAJ,EAArB;AAEA,SAAKU,MAAL,GAAcL,QAAQ,CAACM,aAAT,CAAuB,oBAAvB,CAAd;AACA,SAAKwY,kBAAL,GAA0B9Y,QAAQ,CAACM,aAAT,CAAuB,iCAAvB,CAA1B;AACA,SAAKyY,OAAL,GAAelZ,gBAAC,CAAC,KAAKQ,MAAN,CAAhB;AACA,SAAKJ,KAAL,GAAaJ,gBAAC,CAACG,QAAQ,CAACE,IAAV,CAAd;AACD;;;;yBAEI8W,Q,EAAUjR,O,EAAyB;AAAA,UAAhBiT,SAAgB,uEAAJ,EAAI;AACtC,WAAKhC,QAAL,GAAgBA,QAAhB,CADsC,CAGtC;;AACA,WAAKgC,SAAL,GAAiBnZ,gBAAC,CAACoZ,MAAF,CAAS;AACxBC,cAAM,EAAE,KAAKT,OADW;AAExBU,eAAO,EAAE,KAAKT,QAFU;AAGxBU,iBAAS,EAAE,KAAKT,UAHQ;AAIxBU,eAAO,EAAE,KAAKT;AAJU,OAAT,EAKdI,SALc,CAAjB;AAJsC,UAW9B9B,UAX8B,GAWfnR,OAXe,CAW9BmR,UAX8B;AAatC,WAAK9P,QAAL,GAAgBvH,gBAAC,CAACoZ,MAAF,CAAS;AACvB9B,mBAAW,EAAE,IADU;AAEvBC,uBAAe,EAAE;AAFM,OAAT,EAGbrR,OAAO,CAACqB,QAHK,CAAhB,CAbsC,CAkBtC;;AACA,WAAKkS,aAAL;;AAEA,WAAKN,SAAL,CAAeE,MAAf;AAEA,WAAKzH,aAAL,GAAqBzR,QAAQ,CAACyR,aAA9B;;AAEA,WAAK8H,cAAL,CAAoBrC,UAApB;;AACA,WAAKsC,WAAL,CAAiBtC,UAAjB;AACD;;;6BAEQ;AACP,WAAK2B,aAAL,CAAmB7W,cAAnB;;AACA,WAAKyX,cAAL;;AACA,aAAO,KAAKlC,MAAZ;AACD;;;gCAEWL,U,EAAY;AAAA;;AACtB,UAAMwC,OAAO,GAAG,KAAKpB,YAAL,CAAkBrX,KAAlB,EAAhB;AAEA,UAAM0Y,aAAa,GAAG,KAAK3C,QAAL,CAAc7X,MAAd,CAAqB,UAAA2F,IAAI;AAAA,eAAIA,IAAI,CAAC8U,IAAL,KAAc,UAAlB;AAAA,OAAzB,CAAtB;AACA,UAAMC,QAAQ,GAAGF,aAAa,CAAC,CAAD,CAAb,CAAiBG,KAAlC;AAEAja,sBAAC,CAACka,IAAF,CAAO;AACLhZ,YAAI,EAAE,MADD;AAELoU,WAAG,EAAE,cAFA;AAGLrQ,YAAI,EAAEjF,gBAAC,CAACwV,KAAF,CAAQ,KAAK2B,QAAb,CAHD;AAILgD,gBAAQ,EAAE;AAJL,OAAP,EAMGC,IANH,CAMQ,UAAAC,QAAQ,EAAI;AAChB,aAAI,CAAC3B,MAAL,GAAc2B,QAAQ,CAACjX,EAAvB;;AAEA,YAAIiX,QAAQ,CAACrC,KAAb,EAAoB;AAClB,cAAMsC,QAAQ,GAAG,KAAI,CAAC5C,MAAL,CAAYI,gBAAZ,CAA6BuC,QAAQ,CAACrC,KAAtC,EAA6C,MAA7C,CAAjB;;AACA,eAAI,CAACN,MAAL,CAAYG,SAAZ,CAAsByC,QAAtB;;AAEAT,iBAAO,CAACxa,IAAR,CAAa,iCAAb,EACGiC,IADH,sBACqBgZ,QADrB,sBACuCD,QAAQ,CAACE,aADhD;AAED;;AAEDV,eAAO,CAACxa,IAAR,CAAa,iCAAb,EACGyW,IADH,CACQuE,QAAQ,CAACE,aADjB;AAGA;;;;;AAIA,YAAIF,QAAQ,CAACG,eAAT,CAAyB,CAAzB,MAAgC,OAAhC,IAA2CH,QAAQ,CAACG,eAAT,CAAyB,CAAzB,MAAgC,eAA/E,EAAgG;AAC9FX,iBAAO,CAACxa,IAAR,CAAa,mCAAb,EACGyW,IADH,CACQuE,QAAQ,CAACG,eAAT,CAAyBC,IAAzB,CAA8B,IAA9B,CADR;AAED;AAED;;;;;;AAIA,YAAMC,qBAAqB,GAAGb,OAAO,CAACxa,IAAR,CAAa,0CAAb,CAA9B;AACAqb,6BAAqB,CAAC5E,IAAtB,WAA8BkE,QAA9B;AAEAha,wBAAC,CAACka,IAAF,CAAO;AACLhZ,cAAI,EAAE,KADD;AAELoU,aAAG,EAAE,UAFA;AAGL6E,kBAAQ,EAAE;AAHL,SAAP,EAKGC,IALH,CAKQ,UAAAO,cAAc,EAAI;AACtB,cAAI,KAAI,CAACpT,QAAL,CAAcgQ,eAAlB,EAAmC;AACjC5X,oBAAQ,CAACF,IAAT,GAAgB,OAAhB;AACA;AACD;;AAED,eAAI,CAAC0Z,SAAL,CAAeI,SAAf,GANsB,CAQtB;;;AACA,eAAI,CAACpC,QAAL,GAAgB,EAAhB;AAEA,cAAIyD,QAAQ,GAAG,IAAf;AACAD,wBAAc,CAACE,KAAf,CAAqBtY,OAArB,CAA6B,UAAAuY,IAAI,EAAI;AACnC,gBAAIA,IAAI,CAAC1X,EAAL,KAAY,KAAI,CAACsV,MAArB,EAA6B;AAC3B,kBAAI,CAACkC,QAAL,EAAe;AACbA,wBAAQ,GAAGE,IAAX;AACD,eAFD,MAEO;AACL;AACA;AACA;AACA;AACAF,wBAAQ,CAACG,+BAAT,GAA2CH,QAAQ,CAChDG,+BADwC,CACRC,MADQ,CACDF,IAAI,CAACC,+BADJ,CAA3C;AAEAH,wBAAQ,CAACK,WAAT,GAAuBL,QAAQ,CAACK,WAAT,GAAuBH,IAAI,CAACG,WAA5B,GACnBL,QAAQ,CAACK,WADU,GAEnBH,IAAI,CAACG,WAFT;AAGAL,wBAAQ,CAACZ,QAAT,IAAqBc,IAAI,CAACd,QAA1B;AACD;AACF;AACF,WAjBD;AAmBA,cAAMkB,kBAAkB,GAAGrB,OAAO,CAACxa,IAAR,CAAa,uCAAb,CAA3B;AACA6b,4BAAkB,CAACpF,IAAnB,CACEC,OAAO,CAACC,WAAR,CAAoB4E,QAAQ,CAACO,cAA7B,EAA6C,KAAI,CAAC5T,QAAL,CAAc+P,WAA3D,CADF,EAhCsB,CAoCtB;;AACApB,wBAAiB,CAACC,MAAlB,CAAyB+E,kBAAkB,CAAC,CAAD,CAA3C;AAEA,cAAME,uBAAuB,GAAGvB,OAAO,CAACxa,IAAR,CAAa,4CAAb,CAAhC;;AACA,cAAIub,QAAQ,CAACK,WAAT,GAAuBL,QAAQ,CAACO,cAApC,EAAoD;AAClDC,mCAAuB,CAACtF,IAAxB,CACEC,OAAO,CAACC,WAAR,CAAoB4E,QAAQ,CAACK,WAA7B,EAA0C,KAAI,CAAC1T,QAAL,CAAc+P,WAAxD,CADF,EADkD,CAIlD;;AACApB,0BAAiB,CAACC,MAAlB,CAAyBiF,uBAAuB,CAAC,CAAD,CAAhD;AAEAA,mCAAuB,CAACC,IAAxB;AACAH,8BAAkB,CAAC7Z,QAAnB,CAA4B,gBAA5B;AACD,WATD,MASO;AACL+Z,mCAAuB,CAACE,IAAxB;AACAJ,8BAAkB,CAAC7Y,WAAnB,CAA+B,gBAA/B;AACD;;AAED,cAAMkZ,iBAAiB,GAAG1B,OAAO,CAACxa,IAAR,CAAa,qCAAb,CAA1B;;AACA,cAAIub,QAAQ,CAACG,+BAAT,CAAyClc,MAAzC,GAAkD,CAAtD,EAAyD;AACvD,gBAAM2c,oBAAoB,GAAGD,iBAAiB,CAACE,QAAlB,GAA6BC,KAA7B,EAA7B;AACAH,6BAAiB,CAACI,KAAlB;AAEAf,oBAAQ,CAACG,+BAAT,CAAyCxY,OAAzC,CAAiD,UAAAqZ,QAAQ,EAAI;AAC3D,kBAAMC,SAAS,GAAGL,oBAAoB,CAACpa,KAArB,EAAlB;AACAya,uBAAS,CAACxc,IAAV,CAAe,iBAAf,EAAkCiC,IAAlC,CAAuCsa,QAAQ,CAACE,oBAAT,CAA8BC,KAArE;AACA,kBAAMC,OAAO,GAAGH,SAAS,CAACxc,IAAV,CAAe,kBAAf,CAAhB;AACA2c,qBAAO,CAAC1a,IAAR,CAAasa,QAAQ,CAACK,MAAtB;AACAV,+BAAiB,CAACha,MAAlB,CAAyBsa,SAAzB;AACA3F,4BAAiB,CAACC,MAAlB,CAAyB6F,OAAO,CAAC,CAAD,CAAhC;AACD,aAPD;AASAT,6BAAiB,CAACF,IAAlB;AACD,WAdD,MAcO;AACLE,6BAAiB,CAACD,IAAlB;AACD;;AAED,cAAMY,SAAS,GAAGrC,OAAO,CAACxa,IAAR,CAAa,iCAAb,CAAlB;AACA6c,mBAAS,CAACpG,IAAV,CACEC,OAAO,CAACC,WAAR,CAAoB2E,cAAc,CAACwB,WAAnC,EAAgD,KAAI,CAAC5U,QAAL,CAAc+P,WAA9D,CADF;AAGApB,wBAAiB,CAACC,MAAlB,CAAyB+F,SAAS,CAAC,CAAD,CAAlC;AAEArC,iBAAO,CACJxa,IADH,CACQ,+BADR,EAEGA,IAFH,CAEQ,MAFR,EAEgByW,IAFhB,CAEqB6E,cAAc,CAACyB,UAFpC;;AAIA,eAAI,CAAClD,OAAL,CAAa3X,MAAb,CAAoBsY,OAApB,EAnFsB,CAqFtB;;;AACA7Z,0BAAC,CAACC,MAAD,CAAD,CAAUoc,OAAV,CAAkB,kBAAlB,EAAsC;AAAEhC,oBAAQ,EAAEM;AAAZ,WAAtC;;AAEA,eAAI,CAACnZ,WAAL,CAAiBqY,OAAjB;;AACA,eAAI,CAACyC,WAAL,CAAiBzC,OAAjB,EAA0BxC,UAA1B;AACD,SA/FH;AAgGD,OApIH,EAqIGkF,IArIH,CAqIQ,UAAAlC,QAAQ,EAAI;AAChB,YAAImC,SAAJ;;AACA,YAAI;AACF,cAAMC,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWtC,QAAQ,CAACoC,YAApB,CAArB;AACAD,mBAAS,GAAGC,YAAY,CAACG,WAAzB;AACD,SAHD,CAGE,OAAOC,KAAP,EAAc;AACdL,mBAAS,aAAMnC,QAAQ,CAACyC,MAAf,cAAyBzC,QAAQ,CAAC0C,UAAlC,CAAT;;AACA,cAAI1C,QAAQ,CAACyC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BN,qBAAS,aAAMA,SAAN,qCAAT;AACD;AACF;;AAED,aAAI,CAACQ,aAAL,CAAmB3F,UAAnB;;AACA,aAAI,CAAC8B,SAAL,CAAeG,OAAf,CAAuBkD,SAAvB;AACD,OAnJH;AAoJD;;;6BAEQK,K,EAAO;AACd,WAAK7D,aAAL,CAAmB/X,OAAnB,CAA2B4b,KAA3B,EAAkC,OAAlC;AACD;;;8BAES;AACR,WAAK7D,aAAL,CAAmB7W,cAAnB;AACD;;;iCAEY;AACX;;;;;AAMD;;;kCAEa;AACZ;;;;;AAMD;;;gCAEW0X,O,EAAS;AAAA;;AACnB,WAAKnZ,MAAL,CAAYqB,IAAZ,CAAiB,CACf8X,OAAO,CAAClZ,EAAR,CAAW,kBAAX,EAA+B,yBAA/B,EAA0D,UAAAC,KAAK,EAAI;AACjEA,aAAK,CAACoB,cAAN;;AACA,cAAI,CAACib,YAAL,CAAkBpD,OAAlB;AACD,OAHD,CADe,EAKf7Z,gBAAC,CAACG,QAAD,CAAD,CAAYQ,EAAZ,CAAe,yCAAf,EAA0D,KAAKE,oBAA/D,CALe,CAAjB;AAOD;AAED;;;;;;;;oCAKqC;AAAA;;AAAA,UAAvBqc,cAAuB,uEAAN,IAAM;AACnCld,sBAAC,CAAC,KAAKwY,cAAN,CAAD,CAAuBlZ,MAAvB,CAA8B,sBAA9B,EAAsDqC,IAAtD,CAA2D,UAACC,KAAD,EAAQpC,EAAR,EAAe;AACxE,YAAMqa,OAAO,GAAG7Z,gBAAC,CAACR,EAAD,CAAjB;;AAEA,YAAI0d,cAAc,IAAIrD,OAAO,CAACsD,EAAR,CAAWD,cAAX,CAAtB,EAAkD;AAChD;AACD;;AAED,cAAI,CAACD,YAAL,CAAkBpD,OAAlB,EAA2BjY,KAA3B;AACD,OARD;;AAUA,UAAI,CAACsb,cAAL,EAAqB;AACnB,aAAK/D,SAAL,CAAeK,OAAf;AACD;;AAEDvZ,YAAM,CAACoH,mBAAP,CAA2B,SAA3B,EAAsC,KAAKtG,SAA3C;AACD;;;gCAEW8Y,O,EAASxC,U,EAAY;AAAA;;AAC/B;;;;AAIA,WAAKoC,aAAL,CAAmBI,OAAnB;;AAEAA,aAAO,CACJxY,QADH,CACY,wBADZ,EAEGe,GAFH,CAEO,OAFP,EAEgB,YAAM;AAClByX,eAAO,CACJxX,WADH,CACe,wBADf,EAEGhB,QAFH,CAEY,SAFZ,EAGGL,GAHH,CAGO,OAHP;AAKA6Y,eAAO,CAACha,IAAR,CAAa,oBAAb,EAAmC,IAAnC;AAEA6M,+CAAS,CAACmN,OAAO,CAAC,CAAD,CAAR,CAAT;AAEA5Z,cAAM,CAACgH,gBAAP,CAAwB,SAAxB,EAAmC,MAAI,CAAClG,SAAxC;;AAEA,cAAI,CAACic,aAAL,CAAmB3F,UAAnB;AACD,OAfH;AAgBD;;;8BAESpV,C,EAAG;AACX,UAAIA,CAAC,CAACC,GAAF,KAAU,QAAd,EAAwB;AACtB,aAAKuX,aAAL;AACD;AACF;AAED;;;;;;;;;;mCAOwC;AAAA;;AAAA,UAA3BI,OAA2B,uEAAjB,IAAiB;AAAA,UAAXjY,KAAW,uEAAH,CAAG;;AACtC,UAAI,CAACiY,OAAL,EAAc;AACZ;AACD;;AAEDA,aAAO,CACJxY,QADH,CACY,yBADZ,EAEGe,GAFH,CAEO,OAFP,EAEgB,YAAM;AAClByX,eAAO,CACJxX,WADH,CACe,iCADf,EAEGD,GAFH,CAEO,OAFP,EAEgB,YAAM;AAClByX,iBAAO,CAAC7Y,GAAR,CAAY,OAAZ;;AACA,gBAAI,CAACoc,aAAL,CAAmBvD,OAAnB,EAA4BjY,KAA5B,EAFkB,CAIlB;AACA;;;AACA,cAAI,MAAI,CAACyb,wBAAL,IAAiC,qBAAqB,MAAI,CAACA,wBAAL,CAA8BpU,OAAxF,EAAiG;AAC/F,kBAAI,CAACoU,wBAAL,CAA8BhR,KAA9B;AACD,WAFD,MAEO,IAAI,MAAI,CAACuF,aAAT,EAAwB;AAC7B,kBAAI,CAACA,aAAL,CAAmBvF,KAAnB;AACD;;AAEDD,uDAAe,CAACyN,OAAO,CAAC,CAAD,CAAR,CAAf;;AACA,gBAAI,CAACV,SAAL,CAAeK,OAAf;AACD,SAhBH;AAiBD,OApBH;AAqBD;;;qCAEgB;AAAA;;AACfxZ,sBAAC,CAAC,KAAKwY,cAAN,CAAD,CAAuBlZ,MAAvB,CAA8B,sBAA9B,EAAsDqC,IAAtD,CAA2D,UAACC,KAAD,EAAQpC,EAAR,EAAe;AACxE,cAAI,CAAC4d,aAAL,CAAmBpd,gBAAC,CAACR,EAAD,CAApB,EAA0BoC,KAA1B;AACD,OAFD;AAGD;AAED;;;;;;;;;;kCAOciY,O,EAASjY,K,EAAO;AAC5B,UAAI,KAAKlB,MAAL,CAAYkB,KAAZ,CAAJ,EAAwB;AACtB,aAAKlB,MAAL,CAAYkB,KAAZ,EAAmBW,OAAnB,CAA2B,UAAA7D,GAAG;AAAA,iBAAIA,GAAG,CAACsC,GAAJ,CAAQ,aAAR,CAAJ;AAAA,SAA9B;AACA,aAAKN,MAAL,CAAY8B,MAAZ,CAAmBZ,KAAnB,EAA0B,CAA1B;AACD;;AAED,UAAIiY,OAAJ,EAAa;AACXA,eAAO,CAACpX,MAAR;AACD;AACF;;;mCAEc4U,U,EAAY;AACzBA,gBAAU,CACPhW,QADH,CACY,YADZ,EAEGwV,IAFH,CAEQ,UAFR,EAEoB,IAFpB;AAGD;;;kCAEaQ,U,EAAY;AACxBA,gBAAU,CACPR,IADH,CACQ,UADR,EACoB,KADpB,EAEGxU,WAFH,CAEe,YAFf;AAGD;;;yCAEoBzB,K,EAAO;AAAA,UAClBE,MADkB,GACPF,KADO,CAClBE,MADkB;AAE1B,UAAM4B,OAAO,GAAG1C,gBAAC,CAACc,MAAD,CAAD,CAAU6B,OAAV,CAAkB,mBAAlB,CAAhB;;AAEA,UAAID,OAAO,CAAC7D,MAAZ,EAAoB;AAClB;AACD;;AAED,WAAKwe,wBAAL,GAAgCvc,MAAhC;;AACA,WAAK2Y,aAAL;AACD;;;;;;AAGY,8FAAIhC,+BAAJ,EAAf,E;;;;;;;;ACpZA;AAAA;AAAA;AAEA,IAAM6F,aAAa,GAAG,EAAtB;AACA,IAAIC,kBAAkB,GAAG,IAAzB;;AAEA,SAASC,cAAT,GAA0B;AACxB,SAAOvd,MAAM,CACVgS,gBADI,CACa9R,QAAQ,CAAC6K,eADtB,EACuC,SADvC,EAEJyS,gBAFI,CAEa,SAFb,EAGJlF,OAHI,CAGI,IAHJ,EAGU,EAHV,EAIJjT,KAJI,CAIE,GAJF,CAAP;AAKD;;AAED,SAASoY,aAAT,GAAyB;AACvB,SAAOzd,MAAM,CACVgS,gBADI,CACa9R,QAAQ,CAAC6K,eADtB,EACuC,QADvC,EAEJyS,gBAFI,CAEa,SAFb,EAGJlF,OAHI,CAGI,IAHJ,EAGU,EAHV,CAAP;AAID;;AAEDvY,6CAAC,CAACC,MAAD,CAAD,CAAUU,EAAV,CAAa,QAAb,EAAuB,UAAAC,KAAK,EAAI;AAC9B,MAAM+c,iBAAiB,GAAGD,aAAa,EAAvC;;AAEA,MAAIH,kBAAkB,KAAKI,iBAA3B,EAA8C;AAC5CL,iBAAa,CAAC/a,OAAd,CAAsB,UAAAqb,YAAY,EAAI;AACpCA,kBAAY,CAAChd,KAAD,EAAQ;AAClBid,gBAAQ,EAAEN,kBADQ;AAElBO,eAAO,EAAEH;AAFS,OAAR,CAAZ;AAID,KALD;AAMD;;AAEDJ,oBAAkB,GAAGI,iBAArB;AACD,CAbD;;AAeA,SAAS/S,oBAAT,CAA8BmT,UAA9B,EAA6D;AAAA,MAAnBC,SAAmB,uEAAP,KAAO;AAC3D,MAAMC,WAAW,GAAGT,cAAc,EAAlC;AACA,MAAMG,iBAAiB,GAAGD,aAAa,EAAvC;AACA,MAAMQ,UAAU,GAAGD,WAAW,CAACve,OAAZ,CAAoBie,iBAApB,IAAyCM,WAAW,CAACve,OAAZ,CAAoBqe,UAApB,CAA5D;AAEA,SAAOC,SAAS,GAAGE,UAAU,IAAI,CAAjB,GAAqBA,UAAU,GAAG,CAAlD;AACD;;AAED,SAASzU,uBAAT,CAAiCsU,UAAjC,EAAgE;AAAA,MAAnBC,SAAmB,uEAAP,KAAO;AAC9D,MAAMC,WAAW,GAAGT,cAAc,EAAlC;AACA,MAAMG,iBAAiB,GAAGD,aAAa,EAAvC;AACA,MAAMQ,UAAU,GAAGD,WAAW,CAACve,OAAZ,CAAoBie,iBAApB,IAAyCM,WAAW,CAACve,OAAZ,CAAoBqe,UAApB,CAA5D;AAEA,SAAOC,SAAS,GAAGE,UAAU,IAAI,CAAjB,GAAqBA,UAAU,GAAG,CAAlD;AACD;;AAED,SAASC,YAAT,GAAsC;AACpC,MAAMR,iBAAiB,GAAGD,aAAa,EAAvC;;AADoC,oCAAbO,WAAa;AAAbA,eAAa;AAAA;;AAEpC,SAAOA,WAAW,CAAC5L,IAAZ,CAAiB,UAAA0L,UAAU;AAAA,WAAIA,UAAU,KAAKJ,iBAAnB;AAAA,GAA3B,CAAP;AACD;;AAED,SAAS7P,kBAAT,CAA4B8P,YAA5B,EAA0C;AACxC,MAAIN,aAAa,CAAC5d,OAAd,CAAsBke,YAAtB,MAAwC,CAAC,CAA7C,EAAgD;AAC9CN,iBAAa,CAACvb,IAAd,CAAmB6b,YAAnB;AACD;AACF;;AAED,SAASnL,mBAAT,CAA6BmL,YAA7B,EAA2C;AACzC,MAAMhc,KAAK,GAAG0b,aAAa,CAAC5d,OAAd,CAAsBke,YAAtB,CAAd;;AAEA,MAAIhc,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChB0b,iBAAa,CAAC9a,MAAd,CAAqBZ,KAArB,EAA4B,CAA5B;AACD;AACF;;AAEc;AACbgJ,sBAAoB,EAApBA,oBADa;AAEbnB,yBAAuB,EAAvBA,uBAFa;AAGb0U,cAAY,EAAZA,YAHa;AAIbrQ,oBAAkB,EAAlBA,kBAJa;AAKb2E,qBAAmB,EAAnBA;AALa,CAAf,E;;;;;;;;;;;;;;;;;;;;ICtEqB2L,Q;;;AACnB,oBAAY5e,EAAZ,EAAgB;AAAA;;AACd,SAAKd,GAAL,GAAWsB,CAAC,CAACR,EAAD,CAAZ;AACA,SAAK6e,YAAL,GAAoB,KAAK3f,GAAL,CAASW,IAAT,CAAc,wBAAd,CAApB;AACA,SAAKif,MAAL,GAAc,KAAK5f,GAAL,CAASW,IAAT,CAAc,uBAAd,CAAd;AACA,SAAKkf,aAAL,GAAqB,KAAK7f,GAAL,CAASW,IAAT,CAAc,yBAAd,CAArB;AACA,SAAKmf,OAAL,GAAe,KAAK9f,GAAL,CAASW,IAAT,CAAc,wBAAd,CAAf;AAEA,SAAKof,YAAL,GAAoB,KAAKA,YAAL,CAAkBjb,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKkb,WAAL,GAAmB,KAAKA,WAAL,CAAiBlb,IAAjB,CAAsB,IAAtB,CAAnB;AAEA,SAAKgb,OAAL,CAAa7d,EAAb,CAAgB,iBAAhB,EAAmC,KAAK8d,YAAxC;AACA,SAAKH,MAAL,CAAY3d,EAAZ,CAAe,iBAAf,EAAkC,KAAK+d,WAAvC;AACD;;;;6BAEQ;AACP,WAAKhgB,GAAL,CAASsC,GAAT,CAAa,WAAb;AACD;;;mCAEcJ,K,EAAO;AACpB,UAAM+d,SAAS,GAAG5P,QAAQ,CAACnO,KAAK,CAACge,aAAN,CAAoB3E,KAArB,EAA4B,EAA5B,CAA1B;AAEA,aAAO4E,KAAK,CAACF,SAAD,CAAL,GAAmB,CAAnB,GAAuBA,SAA9B;AACD;;;iCAEY/d,K,EAAO;AAClB,UAAMqZ,KAAK,GAAG,KAAK6E,cAAL,CAAoBle,KAApB,CAAd,CADkB,CAGlB;;;AACA,WAAK0d,MAAL,CAAYvJ,GAAZ,CAAgBkF,KAAhB,EAAuBoC,OAAvB,CAA+B,QAA/B,EAJkB,CAMlB;;AACA,UAAIpC,KAAK,IAAI,EAAb,EAAiB;AACf,aAAKoE,YAAL,CACGhc,WADH,CACe,QADf,EAEGhB,QAFH,CAEY,SAFZ;AAIA,aAAKid,MAAL,CACGjS,KADH,GAEG0S,UAFH,CAEc,UAFd,EAGGpQ,MAHH;AAKA,aAAK4P,aAAL,CACGlc,WADH,CACe,SADf,EAEGhB,QAFH,CAEY,QAFZ;AAIA,aAAKmd,OAAL,CAAa3e,IAAb,CAAkB,UAAlB,EAA8B,IAA9B;AACD;AACF;;;gCAEWe,K,EAAO;AACjB,WAAK0d,MAAL,CAAYvJ,GAAZ,CAAgB,KAAK+J,cAAL,CAAoBle,KAApB,CAAhB;AACD;;;;;;;;;;;;;;;ACpDH;AACA;;IAEqByT,W;;;AACnB,iBAAY7U,EAAZ,EAAgD;AAAA;;AAAA,QAAhCwf,QAAgC,uEAArB,mBAAqB;;AAAA;;AAC9C,SAAKtgB,GAAL,GAAWsB,gBAAC,CAACR,EAAD,CAAZ;AACA,SAAKyf,WAAL,GAAmB,mBAAnB;AACA,SAAKC,aAAL,GAAqBF,QAArB;AAEA,SAAKG,aAAL,GAAqB,EAArB;AACA,SAAKC,gBAAL,GAAwB,KAAK1gB,GAAL,CAASW,IAAT,CAAc,yBAAd,CAAxB;AAEA,SAAKggB,aAAL,GAAqB,KAAKA,aAAL,CAAmB7b,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAK9E,GAAL,CAASiC,EAAT,CAAY,aAAZ,EAA2B,KAAKue,aAAhC,EAA+C,KAAKG,aAApD;AACA,SAAK3gB,GAAL,CAASiC,EAAT,CAAY,YAAZ,EAA0B,KAAKue,aAA/B,EAA8C,KAAKG,aAAnD;;AAEA,SAAKC,YAAL;;AAEA,QAAI,KAAKF,gBAAL,CAAsBvgB,MAA1B,EAAkC;AAChC,WAAKugB,gBAAL,CAAsBzd,IAAtB,CAA2B,UAACpC,CAAD,EAAIC,EAAJ,EAAW;AACpC,aAAI,CAAC2f,aAAL,CAAmBpd,IAAnB,CACE,IAAIqc,QAAJ,CAAa5e,EAAb,CADF;AAGD,OAJD;AAKD;AACF;;;;6BAEQ;AACP,WAAKd,GAAL,CAASsC,GAAT,CAAa,QAAb;AAEA,WAAKme,aAAL,CAAmB5c,OAAnB,CAA2B,UAAAgd,YAAY,EAAI;AACzCA,oBAAY,CAACpgB,MAAb;AACD,OAFD;AAGD;;;mCAEc;AAAA;;AACb,WAAKT,GAAL,CAASW,IAAT,CAAc,KAAK6f,aAAnB,EAAkCvd,IAAlC,CAAuC,UAACpC,CAAD,EAAIC,EAAJ,EAAW;AAChD,YAAIQ,gBAAC,CAACR,EAAD,CAAD,CAAMggB,QAAN,CAAe,MAAI,CAACP,WAApB,CAAJ,EAAsC;;AAEtC,cAAI,CAACI,aAAL,CAAmB,IAAnB,EAAyB7f,EAAzB;AACD,OAJD;AAKD;;;oCAEuC;AAAA,UAA1BoB,KAA0B,uEAAlB,IAAkB;AAAA,UAAZpB,EAAY,uEAAP,KAAO;AACtC,UAAMsB,MAAM,GAAGF,KAAK,GAAGA,KAAK,CAACge,aAAT,GAAyBpf,EAA7C;AACA,UAAMigB,OAAO,GAAGzf,gBAAC,CAACc,MAAD,CAAjB;AAFsC,UAG9BmZ,KAH8B,GAGpBnZ,MAHoB,CAG9BmZ,KAH8B;AAKtC,UAAIyF,QAAQ,GAAGzF,KAAK,CAACpb,MAAN,GAAe,CAA9B;;AAEA,UAAI;AACF6gB,gBAAQ,GAAGA,QAAQ,IAAID,OAAO,CAACtC,EAAR,CAAW,mBAAX,CAAvB;AACAsC,eAAO,CAAC5J,WAAR,CAAoB,KAAKoJ,WAAzB,EAAsCS,QAAtC;AACD,OAHD,CAGE,OAAOzd,CAAP,EAAU;AACVwd,eAAO,CAAC5J,WAAR,CAAoB,KAAKoJ,WAAzB,EAAsCS,QAAtC;AACD;AACF","file":"DynamicFeaturedCollection-StaticCollection-StaticProduct-StaticProductRecommendations-StaticSearch.bundle.js","sourcesContent":["import fitvids from 'fitvids';\nimport GroupedContent from 'grouped-content';\n\nexport default class RichText {\n  constructor($el) {\n    this.$el = $el;\n    this._initExternalLinks();\n    this.groupedContent = null;\n\n    if (this.$el.length) {\n      this.groupedContent = new GroupedContent($el.get(0), {\n        layout: 'tabs',\n        intelliparse: false,\n      });\n\n      fitvids('.rte');\n    }\n  }\n\n  unload() {\n    if (this.groupedContent) {\n      this.groupedContent.unload();\n    }\n  }\n\n  /**\n   * Open links within an RTE field in a new window if they point to external domains\n   *\n   * @private\n   */\n  _initExternalLinks() {\n    const anchors = this.$el.find('a[href^=\"http\"]').filter((i, el) => el.href.indexOf(location.hostname) === -1);\n    anchors.attr('target', '_blank');\n  }\n}\n","import $ from 'jquery';\n\nexport default class MessageBanner {\n  constructor() {\n    this.$window = $(window);\n    this.$document = $(document);\n    this.$body = $(document.body);\n    this.$bannerTemplate = $('[data-templates] [data-message-banner]');\n    this.$banners = [];\n\n    this.header = document.querySelector('[data-site-header]');\n    this.events = [];\n\n    this.$document.on('touchstart.message-banner, click.message-banner', event => {\n      this._handleDocumentClick(event.target);\n    });\n\n    this.$window.on('keydown.message-banner', event => this._closeEsc(event));\n  }\n\n  unload() {\n    this.$document.off('touchstart.message-banner, click.message-banner');\n    this.$window.off('keydown.message-banner');\n  }\n\n  message(message, type) {\n    const $banner = this.$bannerTemplate.clone();\n\n    $banner\n      .addClass(`message--${type}`)\n      .find('[data-message-banner-content]')\n      .html(message);\n\n    $(this.header).append($banner);\n    this._bindEvents($banner);\n    this._show($banner);\n  }\n\n  dismissBanners() {\n    const $visibleBanners = $('[data-message-banner]:visible');\n\n    $visibleBanners.each((index, banner) => {\n      this._hide($(banner), index);\n    });\n  }\n\n  _bindEvents($banner) {\n    this.events.push([\n      $banner.on('click.message-banner', '[data-message-banner-close]', event => {\n        event.preventDefault();\n        this._hide($banner);\n      }),\n      this.$window.on('keydown.message-banner', e => {\n        if (e.key === 'Escape') {\n          this._hide($banner);\n        }\n      }),\n    ]);\n  }\n\n  _closeEsc(e) {\n    if (e.key === 'Escape') {\n      this.dismissBanners();\n    }\n  }\n\n  _show($banner) {\n    this.$banners.push($banner);\n\n    $banner\n      .addClass('animating animating-in')\n      .one('trend', () => {\n        $banner\n          .removeClass('animating animating-in')\n          .addClass('visible')\n          .off('trend');\n      });\n  }\n\n  _hide($banner, index = 0) {\n    $banner\n      .addClass('animating animating-out')\n      .one('trend', () => {\n        $banner\n          .removeClass('animating animating-out visible')\n          .off('trend');\n        this._removeBanner($banner, index);\n      });\n  }\n\n  _removeBanner($banner, index) {\n    if (this.events[index]) {\n      this.events[index].forEach($el => $el.off('.message-banner'));\n      this.events.splice(index, 1);\n    }\n\n    this.$banners.splice(index, 1);\n    $banner.remove();\n  }\n\n  _handleDocumentClick(target) {\n    const $parent = $(target).parents('[data-message-banner]');\n    if ($parent.length) return;\n\n    this.dismissBanners();\n  }\n}\n","import $script from 'scriptjs';\n\nconst api = 'https://www.youtube.com/iframe_api';\nlet apiLoadedCallbacks = [];\nlet apiLoaded = false;\n\nwindow.onYouTubeIframeAPIReady = () => {\n  apiLoadedCallbacks.forEach(apiLoadedCallback => apiLoadedCallback());\n  apiLoadedCallbacks = [];\n  apiLoaded = true;\n};\n\nexport default class Youtube {\n  constructor({ el, videoUrl }) {\n    const regex = /(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/ ]{11})/i; // eslint-disable-line no-useless-escape\n\n    this.el = el;\n    this.id = videoUrl.match(regex)[1] || null;\n\n    this.onApiLoaded = this._onApiLoaded.bind(this);\n\n    this.isReady = false;\n    this.onReady = this._onReady.bind(this);\n    this.onReadyCallback = null;\n\n    this.onStateChange = this._onStateChange.bind(this);\n    this.onPlayCallback = null;\n\n    if (apiLoaded) {\n      this._onApiLoaded();\n    } else {\n      apiLoadedCallbacks.push(this.onApiLoaded);\n      $script(api);\n    }\n  }\n\n  play() {\n    return new Promise(resolve => {\n      this.onPlayCallback = resolve;\n\n      if (this.isReady) {\n        this.player.playVideo();\n      } else {\n        this.onReadyCallback = () => { this.player.playVideo(); };\n      }\n    });\n  }\n\n  pause() {\n    return new Promise(resolve => {\n      this.onPlayCallback = resolve;\n\n      if (this.isReady) {\n        this.player.pauseVideo();\n      } else {\n        this.onReadyCallback = () => { this.player.pauseVideo(); };\n      }\n    });\n  }\n\n  autoplay() {\n    return new Promise(resolve => {\n      this.onPlayCallback = resolve;\n\n      if (this.isReady) {\n        this.player.playVideo();\n        this.player.mute();\n      } else {\n        this.onReadyCallback = () => {\n          this.player.playVideo();\n          this.player.mute();\n        };\n      }\n    });\n  }\n\n  unload() {\n    this.player.destroy();\n  }\n\n  _onApiLoaded() {\n    this.player = new YT.Player(this.el, {\n      videoId: this.id,\n      playerVars: {\n        modestbranding: true,\n        showinfo: false,\n        controls: false,\n        rel: 0,\n      },\n      events: {\n        onReady: this.onReady,\n        onStateChange: this.onStateChange,\n      },\n    });\n  }\n\n  _onReady() {\n    this.isReady = true;\n\n    if (this.onReadyCallback) {\n      this.onReadyCallback();\n    }\n  }\n\n  _onStateChange(event) {\n    const state = event.data;\n    if (\n      this.onPlayCallback\n      && state === YT.PlayerState.BUFFERING\n    ) {\n      this.onPlayCallback();\n      this.onPlayCallback = null;\n    }\n  }\n}\n","import $script from 'scriptjs';\n\nconst api = 'https://player.vimeo.com/api/player.js';\nlet apiLoaded = false;\n\nexport default class VimeoPlayer {\n  constructor({ el, videoUrl }) {\n    this.el = el;\n    const urlParts = videoUrl.split('/');\n\n    this.id = urlParts[urlParts.length - 1];\n    this.onReadyCallback = null;\n\n    this.onApiLoaded = this._onApiLoaded.bind(this);\n\n    this.onProgress = this._onProgress.bind(this);\n    this.onProgressCallback = null;\n\n    if (apiLoaded) {\n      this._onApiLoaded();\n    } else {\n      $script(api, this.onApiLoaded);\n    }\n  }\n\n  play() {\n    return new Promise(resolve => {\n      this.onProgressCallback = resolve;\n\n      if (apiLoaded) {\n        this.player.on('play', this.onProgress);\n        this.player.play();\n      } else {\n        this.onReadyCallback = () => {\n          this.player.on('play', this.onProgress);\n          this.player.play();\n        };\n      }\n    });\n  }\n\n  pause() {\n    return new Promise(resolve => {\n      this.onProgressCallback = resolve;\n\n      if (apiLoaded) {\n        this.player.on('pause', this.onProgress);\n        this.player.pause();\n      } else {\n        this.onReadyCallback = () => {\n          this.player.on('pause', this.onProgress);\n          this.player.pause();\n        };\n      }\n    });\n  }\n\n  autoplay() {\n    return new Promise(resolve => {\n      this.onProgressCallback = resolve;\n\n      if (apiLoaded) {\n        this.player.on('play', this.onProgress);\n        this.player.setVolume(0);\n        this.player.play();\n      } else {\n        this.onReadyCallback = () => {\n          this.player.on('play', this.onProgress);\n          this.player.setVolume(0);\n          this.player.play();\n        };\n      }\n    });\n  }\n\n  unload() {\n    this.player\n      .unload()\n      .catch();\n  }\n\n  _onApiLoaded() {\n    this.player = new window.Vimeo.Player(this.el, { id: this.id });\n\n    this.player\n      .ready()\n      .then()\n      .catch();\n\n    apiLoaded = true;\n\n    if (this.onReadyCallback) {\n      this.onReadyCallback();\n    }\n  }\n\n  _onProgress() {\n    this.player.off('play', this.onProgress);\n    this.player.off('pause', this.onProgress);\n\n    if (this.onProgressCallback) {\n      this.onProgressCallback();\n      this.onProgressCallback = null;\n    }\n  }\n}\n","import Youtube from './Youtube';\nimport Vimeo from './Vimeo';\n\nexport default class Video {\n  constructor(el, options) {\n    this.el = el;\n    this.options = options;\n    this.platform = el.getAttribute('data-video').trim();\n    this.playButton = el.querySelector('[data-video-play-button]');\n    this.videoEl = el.querySelector('[data-video-element]');\n\n    this.onPlayClick = this._onPlayClick.bind(this);\n    this.onPauseClick = this._onPauseClick.bind(this);\n    this.autoplay = this._autoplay.bind(this);\n\n    this.video = null;\n\n    this.videoData = {\n      el: this.videoEl.childNodes[0],\n      videoUrl: this.videoEl.getAttribute('data-video-url'),\n    };\n\n    switch (this.platform) {\n      case 'youtube':\n        this.video = new Youtube(this.videoData);\n        break;\n      case 'vimeo':\n        this.video = new Vimeo(this.videoData);\n        break;\n      default:\n        this.video = null;\n        break;\n    }\n\n    if (this.playButton) {\n      if (this.options && this.options.autoplay) {\n        this.autoplay();\n      }\n\n      this.playButton.addEventListener('click', this.onPlayClick);\n    }\n  }\n\n  _onPlayClick() {\n    this.el.classList.add('video-loading');\n\n    this.video.play()\n      .then(() => {\n        this.el.classList.add('video-transitioning');\n\n        setTimeout(() => {\n          this.el.classList.remove('video-loading');\n          this.el.classList.remove('video-transitioning');\n          this.el.classList.add('video-playing');\n        }, 200);\n      });\n  }\n\n  _onPauseClick() {\n    this.video.pause();\n  }\n\n  _autoplay() {\n    this.el.classList.add('video-loading');\n\n    this.video.autoplay()\n      .then(() => {\n        this.el.classList.add('video-transitioning');\n\n        setTimeout(() => {\n          this.el.classList.remove('video-loading');\n          this.el.classList.remove('video-transitioning');\n          this.el.classList.add('video-playing');\n        }, 200);\n      });\n  }\n\n  unload() {\n    if (this.playButton) {\n      this.playButton.removeEventListener('click', this.onPlayClick);\n    }\n\n    if (this.video) {\n      this.video.unload();\n    }\n  }\n}\n","import PhotoSwipe from 'photoswipe';\nimport EventHandler from '@pixelunion/events';\nimport rimg from 'rimg-shopify';\nimport {\n  trapFocus,\n  removeTrapFocus,\n} from '@shopify/theme-a11y';\n\nimport photoswipeUi from '../../../node_modules/photoswipe/dist/photoswipe-ui-default';\n\nimport layout from '../Layout';\n\nexport default class ProductGallery {\n  constructor({\n    settings,\n    slides,\n    originalThumbnails,\n    startIndex,\n    selectGalleryIndex,\n  }) {\n    this.settings = settings;\n\n    this.photoswipeDialog = document.querySelector('[data-photoswipe]');\n    this.thumbContainer = this.photoswipeDialog.querySelector('[data-photoswipe-thumbs]');\n    this.closeButton = this.photoswipeDialog.querySelector('.pswp__button--close');\n    this.selectedSlide = slides[startIndex];\n\n    this.thumbContainer.innerHTML = '';\n    this.thumbnails = [];\n\n    let selectedIndex = startIndex;\n\n    // Clone the original thumbnails into the photoswipe dialog\n    originalThumbnails.forEach((thumb, thumbIndex) => {\n      if (thumb.classList.contains('product-gallery--thumbnail-video')) {\n        if (this.selectedIndex > thumbIndex) selectedIndex--;\n        return;\n      }\n      const newThumb = thumb.cloneNode(true);\n      this.thumbContainer.appendChild(newThumb);\n      this.thumbnails.push(newThumb);\n    });\n\n    rimg.watch(this.thumbContainer);\n\n    this.selectedThumb = this.thumbContainer.querySelector('.thumbnail--selected');\n\n    this.events = new EventHandler();\n\n    // Set up options for initializing PhotoSwipe\n    const photoswipeSlides = [];\n\n    slides.forEach(slide => {\n      if (slide.hasAttribute('data-product-image-video')) return;\n      photoswipeSlides.push({\n        src: slide.dataset.zoom,\n        msrc: slide.dataset.zoom,\n        h: slide.dataset.imageHeight,\n        w: slide.dataset.imageWidth,\n      });\n    });\n\n    // Adjust the bottom bar height to allow for the mobile thumbnails\n    const bottomBarHeight = layout.isGreaterThanBreakpoint('L', true) ? 0 : 75;\n\n    const photoswipeOptions = {\n      index: selectedIndex,\n      barsSize: { top: 0, bottom: bottomBarHeight },\n      fullscreenEl: false,\n      zoomEl: false,\n      shareEl: false,\n      counterEl: false,\n      arrowEl: false,\n      preloaderEl: false,\n      closeOnScroll: false,\n      showHideOpacity: true,\n      history: false,\n      loop: true,\n      clickToCloseNonZoomable: false,\n      timeToIdle: false,\n      timeToIdleOutside: false,\n    };\n\n    if (this.settings.click_to_zoom === 'always'\n      || (layout.isGreaterThanBreakpoint('S', true) && this.settings.click_to_zoom === 'desktop')\n      || (layout.isLessThanBreakpoint('S') && this.settings.click_to_zoom === 'mobile')) {\n      photoswipeOptions.getThumbBoundsFn = () => {\n        const pageYScroll = window.pageYOffset || document.documentElement.scrollTop;\n        const bounds = this.selectedSlide.querySelector('[data-rimg]').getBoundingClientRect();\n        return { x: bounds.left, y: bounds.top + pageYScroll, w: bounds.width };\n      };\n    }\n\n    this.photoswipe = new PhotoSwipe(\n      this.photoswipeDialog,\n      photoswipeUi,\n      photoswipeSlides,\n      photoswipeOptions,\n    );\n\n    this.events.register(this.closeButton, 'click', () => this.photoswipe.close());\n\n    this.thumbnails.forEach((thumb, index) => {\n      this.events.register(thumb, 'click', () => {\n        this.photoswipe.goTo(index);\n      });\n    });\n\n    // Photoswipe documentation claims that the closeOnVerticalDrag option is always false if\n    // the mouse is used, which is what we want. Unfortunately that's not how it actually works,\n    // so we need to dynamically update the setting when a mouse is detected.\n    if (this.photoswipe.options.mouseUsed) {\n      this.photoswipe.options.closeOnVerticalDrag = false;\n    } else {\n      this.photoswipe.listen('mouseUsed', () => {\n        this.photoswipe.options.closeOnVerticalDrag = false;\n      });\n    }\n\n    this.photoswipe.listen('afterChange', () => {\n      const index = this.photoswipe.getCurrentIndex();\n      if (this.selectedThumb) {\n        this.selectedThumb.classList.remove('thumbnail--selected');\n      }\n      this.selectedThumb = this.thumbnails[index];\n      this.selectedThumb.classList.add('thumbnail--selected');\n\n      const slideIndex = this.selectedThumb.getAttribute('data-product-thumbnail');\n      const slide = slides[slideIndex];\n\n      this._adjustMobileThumbPosition();\n\n      selectGalleryIndex(slideIndex);\n      this.selectedSlide = slide;\n    });\n\n    this.photoswipe.listen('close', () => {\n      removeTrapFocus(this.photoswipeDialog);\n      this.selectedSlide.focus();\n    });\n\n    this.photoswipe.listen('destroy', () => {\n      this.events.unregisterAll();\n    });\n\n    // Detect if mouse is over the thumbnails, if it is allow scroll left/right\n    this.events.register(this.thumbContainer, 'mouseenter', () => {\n      if (layout.isLessThanBreakpoint('S')) {\n        this.photoswipe.options.closeOnScroll = true;\n      }\n    });\n\n    this.events.register(this.thumbContainer, 'mouseleave', () => {\n      if (layout.isLessThanBreakpoint('S')) {\n        this.photoswipe.options.closeOnScroll = false;\n      }\n    });\n\n    // If a user closes the dialog using the escape key, then we should focus\n    // on the expand button.\n    const closeEsc = e => {\n      if (e.key === 'Escape') {\n        slides[0].parentNode.querySelector('[data-gallery-expand]').focus();\n      }\n    };\n\n    this.events.register(window, 'keydown', e => closeEsc(e));\n\n    this.photoswipe.init();\n\n    trapFocus(this.photoswipeDialog);\n\n    this._adjustMobileThumbPosition();\n  }\n\n  _adjustMobileThumbPosition() {\n    // This brings the thumbnail into view if it is not visible on the screen after\n    // a user swipes to a slide that it is tied to.\n    if (layout.isLessThanBreakpoint('S')) {\n      const thumbBounds = this.selectedThumb.getBoundingClientRect();\n      const thumbWrapperBounds = this.thumbContainer.getBoundingClientRect();\n\n      if (thumbBounds.left + thumbBounds.width > thumbWrapperBounds.width) {\n        this.thumbContainer.scrollLeft = this.selectedThumb.offsetLeft\n          + thumbBounds.width - thumbWrapperBounds.width + 10;\n      } else if (this.selectedThumb.offsetLeft < this.thumbContainer.scrollLeft) {\n        this.thumbContainer.scrollLeft = this.selectedThumb.offsetLeft - 10;\n      }\n    }\n  }\n\n  unload() {\n    this.photoswipe.destroy();\n  }\n}\n","import Drift from 'drift-zoom';\nimport Flickity from 'flickity';\nimport EventHandler from '@pixelunion/events';\nimport rimg from 'rimg-shopify';\n\nimport layout from '../Layout';\nimport Video from './Video';\nimport ProductClicktoZoom from './ProductClickToZoom';\n\nexport default class ProductGallery {\n  constructor({ el, settings, isQuickshop }) {\n    this.el = el;\n    this.settings = settings;\n    this.isQuickshop = isQuickshop || false;\n\n    this.slider = this.el.querySelector('[data-product-slider]');\n    this.slides = this.slider.querySelectorAll('[data-product-image]');\n    this.videoSlides = this.slider.querySelectorAll('[data-product-image-video]');\n    this.zoomButton = this.slider.querySelector('[data-gallery-expand]');\n    this.thumbnailsWrapper = this.el.querySelector('[data-product-slider-pagination]');\n    this.thumbnails = this.el.querySelectorAll('[data-product-thumbnail]');\n\n    this.selectedSlide = this.slider.querySelector('.image--selected');\n    this.selectedThumbnail = this.thumbnailsWrapper.querySelector('.thumbnail--selected');\n    this.selectedVideo = null;\n    this.selectedIndex = Array.prototype.indexOf.call(this.slides, this.selectedSlide);\n\n    this.variantChange = this._onVariantChange.bind(this);\n    this._screenResize = this._screenResize.bind(this);\n\n    this.events = new EventHandler();\n\n    this.events.register(this.thumbnailsWrapper, 'click', e => this._thumbnailClicked(e));\n    layout.onBreakpointChange(this._screenResize);\n\n    if (this.settings.click_to_zoom !== 'disabled') {\n      this.productZoom = null;\n\n      const zoomClicked = e => {\n        e.stopPropagation();\n        this._openProductZoom();\n      };\n\n      this.events.register(this.zoomButton, 'click', e => zoomClicked(e));\n      this.events.register(this.slider, 'click', e => zoomClicked(e));\n    }\n\n    if (this.selectedSlide.hasAttribute('data-product-image-video')) {\n      const videoEl = this.selectedSlide.querySelector('[data-video]');\n      this.selectedVideo = new Video(videoEl);\n    } else if (this.settings.hover_zoom !== 'disabled') {\n      if (layout.isGreaterThanBreakpoint('L', true)) {\n        this._setupHoverZoom();\n      }\n    }\n\n    if (layout.isLessThanBreakpoint('S')) {\n      this._setupFlickity();\n    }\n\n    if (this.isQuickshop) {\n      rimg.watch(this.el);\n    }\n\n    this._adjustGalleryPositioning();\n  }\n\n  _screenResize() {\n    if (layout.isGreaterThanBreakpoint('S', true)) {\n      this._disableFlickity();\n    } else {\n      this._setupFlickity();\n    }\n\n    if (layout.isGreaterThanBreakpoint('L', true) && !this.drift) {\n      this._setupHoverZoom();\n    } else if (layout.isLessThanBreakpoint('L')) {\n      this._disableHoverZoom();\n    }\n\n    this._adjustGalleryPositioning();\n  }\n\n  _changeSelectedIndex(index) {\n    if (this.flickity) {\n      this.flickity.select(index);\n    } else {\n      const slide = this.slides[index];\n      this._selectSlide(slide);\n    }\n  }\n\n  _selectSlide(slide) {\n    this.selectedSlide.classList.remove('image--selected');\n    this.selectedSlide = slide;\n    this.selectedSlide.classList.add('image--selected');\n\n    const imageIndex = this.selectedSlide.dataset.productImageIndex;\n    this.selectedIndex = parseInt(imageIndex, 10);\n\n    this.selectedThumbnail.classList.remove('thumbnail--selected');\n    this.selectedThumbnail = this.thumbnails[imageIndex];\n    this.selectedThumbnail.classList.add('thumbnail--selected');\n\n    if (this.selectedVideo) {\n      this.selectedVideo.unload();\n    }\n    this.selectedVideo = null;\n\n    this._disableHoverZoom();\n\n    if (this.selectedSlide.hasAttribute('data-product-image-video')) {\n      const videoEl = this.selectedSlide.querySelector('[data-video]');\n      this.selectedVideo = new Video(videoEl);\n      this.selectedVideo.onPauseClick();\n      if (this.settings.enable_video_autoplay) {\n        this.selectedVideo.autoplay();\n      }\n    } else if (this.settings.hover_zoom !== 'disabled') {\n      if (layout.isGreaterThanBreakpoint('L', true)) {\n        this._setupHoverZoom();\n      }\n    }\n\n    this._adjustGalleryPositioning();\n  }\n\n  _onVariantChange(variant) {\n    if (!variant.featured_image) {\n      return;\n    }\n\n    const slide = this.slider.querySelector(`[data-product-image=\"${variant.featured_image.id}\"]`);\n    this._changeSelectedIndex(slide.dataset.productImageIndex);\n  }\n\n  _setupHoverZoom() {\n    if (document.documentElement.classList.contains('has-touch')) return;\n\n    const selectedImage = this.selectedSlide.querySelector('[data-rimg]');\n    selectedImage.setAttribute('data-zoom', this.selectedSlide.getAttribute('data-zoom'));\n\n    this.drift = new Drift(selectedImage, {\n      paneContainer: this.settings.hover_zoom === 'separate'\n        ? this.el.querySelector('[data-zoomed-image]')\n        : this.selectedSlide,\n      inlinePane: false,\n      hoverBoundingBox: this.settings.hover_zoom === 'separate',\n      handleTouch: false,\n      onShow: () => {\n        if (this.settings.hover_zoom === 'separate') {\n          const productMain = document.querySelector('.product-main');\n          const productAlt = document.querySelector('.product-form--alt');\n          productMain.classList.add('product-gallery--fade');\n          if (productAlt) productAlt.classList.add('product-gallery--fade');\n        }\n      },\n      onHide: () => {\n        if (this.settings.hover_zoom === 'separate') {\n          const productMain = document.querySelector('.product-main');\n          const productAlt = document.querySelector('.product-form--alt');\n          productMain.classList.remove('product-gallery--fade');\n          if (productAlt) productAlt.classList.remove('product-gallery--fade');\n        }\n      },\n    });\n  }\n\n  _disableHoverZoom() {\n    if (this.drift) {\n      this.drift.disable();\n      this.drift = null;\n    }\n  }\n\n  _setupFlickity() {\n    if (this.flickity) return;\n\n    this.flickity = new Flickity(this.slider, {\n      accessibility: false,\n      adaptiveHeight: true,\n      cellSelector: '.product-gallery--image',\n      contain: true,\n      friction: 0.5,\n      freeScroll: false,\n      initialIndex: this.selectedIndex,\n      lazyLoad: false,\n      percentPosition: false,\n      prevNextButtons: false,\n      pageDots: false,\n      selectedAttraction: 0.1,\n      setGallerySize: false,\n      wrapAround: true,\n    });\n\n    this.flickityEvent = this.events.register(this.slider, 'rimg:load', () => {\n      this._setSlideHeight();\n    });\n\n    this.flickity.on('change', index => {\n      this._selectSlide(this.slides[index]);\n    });\n\n    this.flickity.on('pointerDown', () => {\n      // Removes the focus ring when swiping with touch device\n      this.slider.blur();\n    });\n\n    // We need to disable the product zoom open if a user is swiping\n    // This was an issue on mouse gestures, not on touch\n    if (this.settings.click_to_zoom !== 'disabled'\n      && document.documentElement.classList.contains('no-touch')) {\n      this.flickity.on('dragEnd', () => {\n        this.swiped = true;\n      });\n    }\n\n    this._setSlideHeight();\n  }\n\n  _disableFlickity() {\n    if (this.flickity) {\n      this.slider.classList.remove('flickity-enabled');\n      this.flickity.destroy();\n      this.flickity = null;\n      this.events.unregister(this.flickityEvent);\n    }\n  }\n\n  _thumbnailClicked(e) {\n    let button;\n\n    // The target will be the button itself if the user is using a keyboard to navigate, but\n    // otherwise it will be the image that is clicked on.\n    if (e.target.classList.contains('product-gallery--thumbnail-trigger')) {\n      button = e.target;\n    } else if (e.target.parentNode.parentNode.classList\n      .contains('product-gallery--thumbnail-trigger')) {\n      button = e.target.parentNode.parentNode;\n    } else {\n      return;\n    }\n\n    this._changeSelectedIndex(button.getAttribute('data-product-thumbnail'));\n  }\n\n  _setSlideHeight() {\n    this.thumbnailsWrapper.classList.remove('loading');\n\n    // Use the stored image height for situations where the DOM is in a midway state.\n    const containerHeight = this.storedImageHeight\n      || this.selectedSlide.getBoundingClientRect().height;\n    this.storedImageHeight = null;\n\n    this.slider.style.height = `${containerHeight}px`;\n  }\n\n  _adjustGalleryPositioning() {\n    if (this.settings.thumbnail_position === 'left') {\n      if (this.isQuickshop) {\n        if (layout.isGreaterThanBreakpoint('L', true)) {\n          this.el.classList.add('product-gallery--thumbs-left');\n        } else {\n          this.storedImageHeight = this.selectedSlide.getBoundingClientRect().height;\n          this.el.classList.remove('product-gallery--thumbs-left');\n        }\n      }\n\n      // We need to adjust the width of the thumbnails if they are positioned left\n      // and they wrap into 2 columns. CSS flexbox does not cause the width of the\n      // element to stretch. Looks like it's a problem with flexbox when wrapping columns:\n      // https://stackoverflow.com/questions/33891709/when-flexbox-items-wrap-in-column-mode-container-does-not-grow-its-width\n      if (layout.isGreaterThanBreakpoint('L', true)\n        || (layout.isGreaterThanBreakpoint('S', true) && !this.isQuickshop)) {\n        if (this.el.firstChild !== this.thumbnailsWrapper) {\n          const activeButton = document.activeElement;\n          this.el.insertBefore(this.thumbnailsWrapper, this.slider);\n          activeButton.focus(); // This prevents loss of focus if one of the thumbnails are selected\n        }\n\n        // When switching layouts in the editor sometimes we need to wait for a few milliseconds\n        // before positioning the thumbs.\n        setTimeout(() => {\n          const leftmostBounds = this.thumbnails[0].getBoundingClientRect();\n          const thumbStyle = this.thumbnails[0].currentStyle\n            || window.getComputedStyle(this.thumbnails[0]);\n          const thumbMargin = (parseInt(thumbStyle.marginLeft, 10)) * 2;\n          const wrapped = Array.prototype.some.call(this.thumbnails,\n            thumb => thumb.getBoundingClientRect().left > leftmostBounds.left);\n          if (wrapped) {\n            this.thumbnailsWrapper.style.width = `${(leftmostBounds.width + thumbMargin) * 2}px`;\n            this.thumbnailsWrapper.style.maxWidth = `${(leftmostBounds.width + thumbMargin) * 2}px`;\n          }\n          this._setSlideHeight();\n        }, 100);\n      } else {\n        if (this.el.firstElementChild === this.thumbnailsWrapper) {\n          this.el.appendChild(this.thumbnailsWrapper);\n        }\n        this.thumbnailsWrapper.style.width = '';\n        this.thumbnailsWrapper.style.maxWidth = '';\n        this._setSlideHeight();\n      }\n\n      if (layout.isLessThanBreakpoint('S')) {\n        this._adjustMobileThumbPosition();\n      }\n    } else {\n      this._setSlideHeight();\n      this._adjustMobileThumbPosition();\n    }\n  }\n\n  _adjustMobileThumbPosition() {\n    // This brings the thumbnail into view if it is not visible on the screen after\n    // a user swipes to a slide that it is tied to. Only important on mobile.\n    if (layout.isLessThanBreakpoint('S')) {\n      const thumbBounds = this.selectedThumbnail.getBoundingClientRect();\n      const thumbWrapperBounds = this.thumbnailsWrapper.getBoundingClientRect();\n\n      if (this.selectedThumbnail.offsetLeft + thumbBounds.width\n        - this.thumbnailsWrapper.scrollLeft > thumbWrapperBounds.width) {\n        this.thumbnailsWrapper.scrollLeft = this.selectedThumbnail.offsetLeft\n          + thumbBounds.width - thumbWrapperBounds.width + 10;\n      } else if (this.selectedThumbnail.offsetLeft < this.thumbnailsWrapper.scrollLeft) {\n        this.thumbnailsWrapper.scrollLeft = this.selectedThumbnail.offsetLeft - 10;\n      }\n    }\n  }\n\n  _openProductZoom() {\n    if (this.swiped) {\n      this.swiped = false;\n      return;\n    }\n\n    if (this.selectedSlide.hasAttribute('data-product-image-video')\n      || (layout.isGreaterThanBreakpoint('S', true) && this.settings.click_to_zoom === 'mobile')\n      || (layout.isLessThanBreakpoint('S') && this.settings.click_to_zoom === 'desktop')) {\n      return;\n    }\n\n    this.productZoom = new ProductClicktoZoom({\n      settings: this.settings,\n      slides: this.slides,\n      originalThumbnails: this.thumbnails,\n      startIndex: this.selectedIndex,\n      selectGalleryIndex: index => this._changeSelectedIndex(index),\n    });\n  }\n\n  unload() {\n    this.events.unregisterAll();\n\n    layout.offBreakpointChange(this._screenResize);\n\n    if (this.isQuickshop) {\n      rimg.unwatch(this.el);\n    }\n\n    if (this.selectedVideo) {\n      this.selectedVideo.unload();\n    }\n\n    this._disableHoverZoom();\n    this._disableFlickity();\n\n    if (this.productZoom) {\n      this.productZoom.unload();\n    }\n  }\n}\n","import $ from 'jquery';\nimport CurrencyConverter from 'shopify-currency-converter';\nimport ShopifyVariants from 'shopify-variants';\nimport Forms from '../Forms';\nimport AddToCartFlyout from './AddToCartFlyout';\nimport ProductGallery from './ProductGallery';\n\nexport default class ProductDetails {\n  constructor(options) {\n    this.$window = $(window);\n    this.$formArea = options.$formArea;\n    this.$details = options.$details;\n    this.context = options.context;\n    this.settings = options.settings;\n    this.product = options.product;\n    this.useHistory = options.useHistory;\n    this.sectionId = options.sectionId;\n    this.initialVariant = options.initialVariant || null;\n\n    this.variantHelper = null;\n\n    this.atcCallbacks = options.atcCallbacks;\n\n    // Form\n    this.$form = this.$formArea.find('[data-product-form]');\n    this.$productAtcButton = this.$formArea.find('[data-product-atc]');\n    this.$productVariants = this.$form.find('[data-variants]');\n    this.$productOptions = this.$form.find('[data-product-option]');\n    this.detailsLink = this.$formArea[0].querySelector('[data-product-details-link]');\n    if (this.detailsLink) {\n      this.detailsBaseHref = this.detailsLink.getAttribute('href');\n    }\n\n    this.variantFields = {\n      $price: this.$details.find('[data-price]'),\n      $priceMoney: this.$details.find('[data-price] .money'),\n      $compareAtPrice: this.$details.find('[data-price-compare-at]'),\n      $compareAtPriceMoney: this.$details.find('[data-price-compare-at] .money'),\n      $badge: this.$details.find('[data-badge-sales]'),\n      $badgeMoneySaved: this.$details.find('[data-price-money-saved]'),\n      $badgePercentSaved: this.$details.find('[data-price-percent-saved]'),\n      $sku: this.$details.find('[data-product-sku]'),\n    };\n\n    this.forms = new Forms(this.$form);\n\n    if (this.product && this.product.images.length) {\n      this.gallery = new ProductGallery({\n        el: options.gallery,\n        settings: this.settings,\n        isQuickshop: options.isQuickshop,\n      });\n    }\n\n    this._bindEvents();\n    this._initOptions();\n  }\n\n  unload() {\n    this.$form.off(`.product-details-${this.sectionId}`);\n    this.$window.off(`.product-details-${this.sectionId}`);\n    this.forms.unload();\n\n    if (this.variantHelper) {\n      this.variantHelper.unload();\n    }\n\n    if (this.gallery) {\n      this.gallery.unload();\n    }\n  }\n\n  _bindEvents() {\n    this.$window.on(`shopify-variants:switch-variant.product-details-${this.sectionId}`, (event, data) => this._switchVariant(event, data));\n    this.$form.on(`submit.product-details-${this.sectionId}`, event => this._AddToCartFlyout(event));\n  }\n\n  _initOptions() {\n    if (!this.$productVariants.length) return;\n\n    this.variantHelper = new ShopifyVariants(\n      this.product,\n      this.$productVariants,\n      this.$productOptions,\n      { mixedControls: true },\n    );\n\n    this.variantHelper.selectVariant(this.initialVariant);\n  }\n\n  _switchVariant(event, data) {\n    if (data.product !== this.product) return;\n\n    const {\n      variant,\n      firstLoad,\n    } = data;\n\n    if (firstLoad) {\n      return;\n    }\n\n    // Update main select\n    this.$productVariants.val(data.variant.id);\n    this.gallery.variantChange(variant);\n\n    // Update Variant information\n    this._updatePrice(variant);\n    this._updateSKU(variant);\n    this._updateBadge(variant);\n    this._updateButton(variant);\n    this._updateSwatchLabel(variant);\n    this._updateFullDetailsLink(variant);\n\n    if (this.useHistory) {\n      const url = `${this.product.handle}?${$.param({ variant: variant.id })}`;\n      history.replaceState({}, 'variant', url);\n    }\n  }\n\n  _updatePrice(variant) {\n    // Update compare at price\n    const hasComparePrice = (\n      !!variant.compare_at_price && variant.compare_at_price > variant.price\n    );\n    this.variantFields.$compareAtPrice.toggleClass('visible', hasComparePrice);\n    this.variantFields.$compareAtPriceMoney.text(\n      Shopify.formatMoney(variant.compare_at_price, this.settings.money_format),\n    );\n    CurrencyConverter.update(this.variantFields.$compareAtPriceMoney[0]);\n\n    // Update price\n    this.variantFields.$priceMoney.text(\n      Shopify.formatMoney(variant.price, this.settings.money_format),\n    );\n    CurrencyConverter.update(this.variantFields.$priceMoney[0]);\n  }\n\n  _updateSKU(variant) {\n    if (variant.sku === '') {\n      this.variantFields.$sku.parent().addClass('product-sku--empty');\n    } else {\n      this.variantFields.$sku.parent().removeClass('product-sku--empty');\n    }\n\n    this.variantFields.$sku.text(variant.sku);\n  }\n\n  _updateBadge(variant) {\n    const priceSaved = variant.compare_at_price ? variant.compare_at_price - variant.price : 0;\n    this.variantFields.$badge.toggle(!!priceSaved);\n\n    if (this.variantFields.$badgeMoneySaved.length) {\n      // Update badge if it shows money saved\n      this.variantFields.$badgeMoneySaved.text(\n        Shopify.formatMoney(priceSaved, this.settings.money_format),\n      );\n      CurrencyConverter.update(this.variantFields.$badgeMoneySaved[0]);\n    }\n\n    if (this.variantFields.$badgePercentSaved.length) {\n      // Update badge if it shows percentiles\n      const percentileSaved = Math.round((priceSaved * 100) / variant.compare_at_price);\n      this.variantFields.$badgePercentSaved.text(percentileSaved);\n    }\n  }\n\n  _updateButton(variant) {\n    if (variant.available) {\n      this.$productAtcButton.text(this.context.product_available);\n      this.$productAtcButton\n        .removeClass('disabled')\n        .prop('disabled', false);\n    } else {\n      this.$productAtcButton.text(this.context.product_unavailable);\n      this.$productAtcButton\n        .addClass('disabled')\n        .prop('disabled', true);\n    }\n  }\n\n  _updateSwatchLabel(variant) {\n    if (this.settings.swatches_enable) {\n      const swatchLabel = this.$form[0].querySelector('[data-option-swatch-value]');\n      if (swatchLabel) {\n        swatchLabel.innerText = variant.options[parseInt(swatchLabel.dataset.optionSwatchValue, 10)];\n      }\n    }\n  }\n\n  _updateFullDetailsLink(variant) {\n    if (this.detailsLink) {\n      this.detailsLink.setAttribute('href', `${this.detailsBaseHref}?variant=${variant.id}`);\n    }\n  }\n\n  _AddToCartFlyout(event) {\n    event.preventDefault();\n\n    const formData = this.$form.serializeArray();\n\n    const options = {\n      $atcButton: this.$productAtcButton,\n      settings: {\n        moneyFormat: this.settings.money_format,\n        cartRedirection: this.settings.cart_redirection,\n      },\n    };\n\n    AddToCartFlyout.init(formData, options, this.atcCallbacks);\n  }\n}\n","export default class Images {\n  /**\n   * Preloads an image in memory and uses the browsers cache to store it until needed.\n   *\n   * @param {Array} images - A list of image urls\n   * @param {String} size - A shopify image size attribute\n   */\n  preload(images, size) {\n    let imageArray = images;\n    if (typeof images === 'string') {\n      imageArray = [images];\n    }\n\n    for (let i = 0; i < imageArray.length; i++) {\n      this.loadImage(this.getSizedImageUrl(imageArray[i], size));\n    }\n  }\n\n  /**\n   * Loads and caches an image in the browsers cache.\n   *\n   * @param {string} path - An image url\n   */\n  loadImage(path) {\n    const image = new Image();\n    image.src = path;\n    return image;\n  }\n\n  /**\n   * Adds a Shopify size attribute to a URL\n   *\n   * @param src\n   * @param size\n   * @returns {*}\n   */\n  getSizedImageUrl(src = null, size) {\n    if (!size) {\n      return null;\n    }\n\n    if (size === 'master') {\n      return this.removeProtocol(src);\n    }\n\n    const match = src.match(/\\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\\?v=\\d+)?$/i);\n\n    if (match) {\n      const prefix = src.split(match[0]);\n      const suffix = match[0];\n\n      return this.removeProtocol(`${prefix[0]}_${size}${suffix}`);\n    }\n\n    console.warn(`No ${size} found for '${src}`);\n    return null;\n  }\n\n  removeProtocol(path) {\n    return path.replace(/http(s)?:/, '');\n  }\n}\n","import $ from 'jquery';\nimport CurrencyConverter from 'shopify-currency-converter';\nimport {\n  trapFocus,\n  removeTrapFocus,\n} from '@shopify/theme-a11y';\n\nimport MessageBanner from './MessageBanner';\nimport Images from '../helpers/Images';\n\nclass AddToCartFlyout {\n  constructor() {\n    this.formData = {};\n    this.settings = {};\n    this.events = [];\n    this.Images = new Images();\n    this.flyOutSelector = '[data-atc-banner]';\n    this.$atcTemplate = $(`[data-templates] ${this.flyOutSelector}`);\n    this.activeElement = null;\n    this.itemId = null;\n\n    this.atcFlyOut = document.querySelector(this.flyOutSelector);\n\n    this._onInit = this._onInit.bind(this);\n    this._onError = this._onError.bind(this);\n    this._onSuccess = this._onSuccess.bind(this);\n    this._onCloseAll = this._onCloseAll.bind(this);\n    this._handleDocumentClick = this._handleDocumentClick.bind(this);\n\n    this._closeEsc = this._closeEsc.bind(this);\n\n    this.messageBanner = new MessageBanner();\n\n    this.header = document.querySelector('[data-site-header]');\n    this.headerAnnouncement = document.querySelector('[data-site-header-announcement]');\n    this.$header = $(this.header);\n    this.$body = $(document.body);\n  }\n\n  init(formData, options, callbacks = {}) {\n    this.formData = formData;\n\n    // Allows ATC Flow to be overridden\n    this.callbacks = $.extend({\n      onInit: this._onInit,\n      onError: this._onError,\n      onSuccess: this._onSuccess,\n      onClose: this._onCloseAll,\n    }, callbacks);\n\n    const { $atcButton } = options;\n\n    this.settings = $.extend({\n      moneyFormat: null,\n      cartRedirection: false,\n    }, options.settings);\n\n    // If any FlyOuts are fully open, close them\n    this._closeFlyOuts();\n\n    this.callbacks.onInit();\n\n    this.activeElement = document.activeElement;\n\n    this._disableButton($atcButton);\n    this._updateCart($atcButton);\n  }\n\n  unload() {\n    this.messageBanner.dismissBanners();\n    this._removeFlyOuts();\n    delete this.Images;\n  }\n\n  _updateCart($atcButton) {\n    const $flyOut = this.$atcTemplate.clone();\n\n    const quantityField = this.formData.filter(data => data.name === 'quantity');\n    const quantity = quantityField[0].value;\n\n    $.ajax({\n      type: 'POST',\n      url: '/cart/add.js',\n      data: $.param(this.formData),\n      dataType: 'json',\n    })\n      .done(response => {\n        this.itemId = response.id;\n\n        if (response.image) {\n          const imageUrl = this.Images.getSizedImageUrl(response.image, '200x');\n          this.Images.loadImage(imageUrl);\n\n          $flyOut.find('[data-atc-banner-product-image]')\n            .html(`<img src=\"${imageUrl}\" alt=\"${response.product_title}\">`);\n        }\n\n        $flyOut.find('[data-atc-banner-product-title]')\n          .text(response.product_title);\n\n        /*\n          TODO: Bring in `variant.options`, iterate through to get option\n            name for: <strong>Option name:</strong> Option\n        */\n        if (response.variant_options[0] !== 'Title' && response.variant_options[0] !== 'Default Title') {\n          $flyOut.find('[data-atc-banner-product-options]')\n            .text(response.variant_options.join(', '));\n        }\n\n        /*\n          TODO: Bring in variant, and use that to check compare_at_price\n            to see if the item is on sale\n        */\n        const $productPriceQuantity = $flyOut.find('[data-atc-banner-product-price-quantity]');\n        $productPriceQuantity.text(`${quantity} × `);\n\n        $.ajax({\n          type: 'GET',\n          url: '/cart.js',\n          dataType: 'json',\n        })\n          .done(secondResponse => {\n            if (this.settings.cartRedirection) {\n              location.href = '/cart';\n              return;\n            }\n\n            this.callbacks.onSuccess();\n\n            // Reset formData in case instance is never cleared\n            this.formData = {};\n\n            let lineItem = null;\n            secondResponse.items.forEach(item => {\n              if (item.id === this.itemId) {\n                if (!lineItem) {\n                  lineItem = item;\n                } else {\n                  // If there are 2 lineItems with the same id, it means that there is\n                  // likely a BOGO offer on the product. We need to grab the highest discounted\n                  // price (BOGO will be 0) while also combining with the different discounts on\n                  // the product in the discounts array.\n                  lineItem.line_level_discount_allocations = lineItem\n                    .line_level_discount_allocations.concat(item.line_level_discount_allocations);\n                  lineItem.final_price = lineItem.final_price > item.final_price\n                    ? lineItem.final_price\n                    : item.final_price;\n                  lineItem.quantity += item.quantity;\n                }\n              }\n            });\n\n            const $productPriceValue = $flyOut.find('[data-atc-banner-product-price-value]');\n            $productPriceValue.text(\n              Shopify.formatMoney(lineItem.original_price, this.settings.moneyFormat),\n            );\n\n            // Update price to local currency\n            CurrencyConverter.update($productPriceValue[0]);\n\n            const $productPriceDiscounted = $flyOut.find('[data-atc-banner-product-price-discounted]');\n            if (lineItem.final_price < lineItem.original_price) {\n              $productPriceDiscounted.text(\n                Shopify.formatMoney(lineItem.final_price, this.settings.moneyFormat),\n              );\n              // Update price to local currency\n              CurrencyConverter.update($productPriceDiscounted[0]);\n\n              $productPriceDiscounted.show();\n              $productPriceValue.addClass('original-price');\n            } else {\n              $productPriceDiscounted.hide();\n              $productPriceValue.removeClass('original-price');\n            }\n\n            const $productDiscounts = $flyOut.find('[data-atc-banner-product-discounts]');\n            if (lineItem.line_level_discount_allocations.length > 0) {\n              const discountItemTemplate = $productDiscounts.children().first();\n              $productDiscounts.empty();\n\n              lineItem.line_level_discount_allocations.forEach(discount => {\n                const $listItem = discountItemTemplate.clone();\n                $listItem.find('.discount-title').html(discount.discount_application.title);\n                const $amount = $listItem.find('.discount-amount');\n                $amount.html(discount.amount);\n                $productDiscounts.append($listItem);\n                CurrencyConverter.update($amount[0]);\n              });\n\n              $productDiscounts.show();\n            } else {\n              $productDiscounts.hide();\n            }\n\n            const $subTotal = $flyOut.find('[data-atc-banner-cart-subtotal]');\n            $subTotal.text(\n              Shopify.formatMoney(secondResponse.total_price, this.settings.moneyFormat),\n            );\n            CurrencyConverter.update($subTotal[0]);\n\n            $flyOut\n              .find('[data-atc-banner-cart-button]')\n              .find('span').text(secondResponse.item_count);\n\n            this.$header.append($flyOut);\n\n            // Notifiy Header of new cart count\n            $(window).trigger('cartcount:update', { response: secondResponse });\n\n            this._bindEvents($flyOut);\n            this._openFlyOut($flyOut, $atcButton);\n          });\n      })\n      .fail(response => {\n        let errorText;\n        try {\n          const responseText = JSON.parse(response.responseText);\n          errorText = responseText.description;\n        } catch (error) {\n          errorText = `${response.status} ${response.statusText}`;\n          if (response.status === 401) {\n            errorText = `${errorText}. Try refreshing and logging in.`;\n          }\n        }\n\n        this._enableButton($atcButton);\n        this.callbacks.onError(errorText);\n      });\n  }\n\n  _onError(error) {\n    this.messageBanner.message(error, 'error');\n  }\n\n  _onInit() {\n    this.messageBanner.dismissBanners();\n  }\n\n  _onSuccess() {\n    /*\n      By default, the ATC Flyout doesn't need any additional success callbacks\n\n      The `this.callbacks.onSuccess` is used to allow other views to initiate\n      behaviour when a product has been added to the cart\n     */\n  }\n\n  _onCloseAll() {\n    /*\n      By default, the ATC Flyout doesn't need any additional close callbacks\n\n      The `this.callbacks.onClose` is used to allow other views to initiate\n      behaviour when the atc banner has been closed\n     */\n  }\n\n  _bindEvents($flyOut) {\n    this.events.push([\n      $flyOut.on('click.atc-banner', '[data-atc-banner-close]', event => {\n        event.preventDefault();\n        this._closeFlyOut($flyOut);\n      }),\n      $(document).on('touchstart.atc-banner, click.atc-banner', this._handleDocumentClick),\n    ]);\n  }\n\n  /**\n   * Trigger any existing open FlyOuts to close\n   *\n   * @private\n   */\n  _closeFlyOuts($excludeFlyOut = null) {\n    $(this.flyOutSelector).filter('[data-flyout-active]').each((index, el) => {\n      const $flyOut = $(el);\n\n      if ($excludeFlyOut && $flyOut.is($excludeFlyOut)) {\n        return;\n      }\n\n      this._closeFlyOut($flyOut, index);\n    });\n\n    if (!$excludeFlyOut) {\n      this.callbacks.onClose();\n    }\n\n    window.removeEventListener('keydown', this._closeEsc);\n  }\n\n  _openFlyOut($flyOut, $atcButton) {\n    /*\n     If user has initiated a new ATC Flow before the first has finished,\n     the first FlyOut could have opened after the first attempt to close open flyouts\n    */\n    this._closeFlyOuts($flyOut);\n\n    $flyOut\n      .addClass('animating animating-in')\n      .one('trend', () => {\n        $flyOut\n          .removeClass('animating animating-in')\n          .addClass('visible')\n          .off('trend');\n\n        $flyOut.attr('data-flyout-active', true);\n\n        trapFocus($flyOut[0]);\n\n        window.addEventListener('keydown', this._closeEsc);\n\n        this._enableButton($atcButton);\n      });\n  }\n\n  _closeEsc(e) {\n    if (e.key === 'Escape') {\n      this._closeFlyOuts();\n    }\n  }\n\n  /**\n   * Close an open FlyOut\n   *\n   * @param $flyOut\n   * @param index\n   * @private\n   */\n  _closeFlyOut($flyOut = null, index = 0) {\n    if (!$flyOut) {\n      return;\n    }\n\n    $flyOut\n      .addClass('animating animating-out')\n      .one('trend', () => {\n        $flyOut\n          .removeClass('animating animating-out visible')\n          .one('trend', () => {\n            $flyOut.off('trend');\n            this._removeFlyOut($flyOut, index);\n\n            // if the user clicked onto the search box, close the atc flyout and move focus\n            // to the search instead of going to the previous active element.\n            if (this.documentClickEventTarget && 'liveSearchInput' in this.documentClickEventTarget.dataset) {\n              this.documentClickEventTarget.focus();\n            } else if (this.activeElement) {\n              this.activeElement.focus();\n            }\n\n            removeTrapFocus($flyOut[0]);\n            this.callbacks.onClose();\n          });\n      });\n  }\n\n  _removeFlyOuts() {\n    $(this.flyOutSelector).filter('[data-flyout-active]').each((index, el) => {\n      this._removeFlyOut($(el), index);\n    });\n  }\n\n  /**\n   * Remove the Flyout from the DOM, and clean up listeners\n   *\n   * @param $flyOut\n   * @param index\n   * @private\n   */\n  _removeFlyOut($flyOut, index) {\n    if (this.events[index]) {\n      this.events[index].forEach($el => $el.off('.atc-banner'));\n      this.events.splice(index, 1);\n    }\n\n    if ($flyOut) {\n      $flyOut.remove();\n    }\n  }\n\n  _disableButton($atcButton) {\n    $atcButton\n      .addClass('processing')\n      .prop('disabled', true);\n  }\n\n  _enableButton($atcButton) {\n    $atcButton\n      .prop('disabled', false)\n      .removeClass('processing');\n  }\n\n  _handleDocumentClick(event) {\n    const { target } = event;\n    const $parent = $(target).parents('[data-atc-banner]');\n\n    if ($parent.length) {\n      return;\n    }\n\n    this.documentClickEventTarget = target;\n    this._closeFlyOuts();\n  }\n}\n\nexport default new AddToCartFlyout();\n","import $ from 'jquery';\n\nconst eventHandlers = [];\nlet previousBreakpoint = null;\n\nfunction getBreakpoints() {\n  return window\n    .getComputedStyle(document.documentElement, ':before')\n    .getPropertyValue('content')\n    .replace(/\"/g, '')\n    .split(',');\n}\n\nfunction getBreakpoint() {\n  return window\n    .getComputedStyle(document.documentElement, ':after')\n    .getPropertyValue('content')\n    .replace(/\"/g, '');\n}\n\n$(window).on('resize', event => {\n  const currentBreakpoint = getBreakpoint();\n\n  if (previousBreakpoint !== currentBreakpoint) {\n    eventHandlers.forEach(eventHandler => {\n      eventHandler(event, {\n        previous: previousBreakpoint,\n        current: currentBreakpoint,\n      });\n    });\n  }\n\n  previousBreakpoint = currentBreakpoint;\n});\n\nfunction isLessThanBreakpoint(breakpoint, inclusive = false) {\n  const breakpoints = getBreakpoints();\n  const currentBreakpoint = getBreakpoint();\n  const comparison = breakpoints.indexOf(currentBreakpoint) - breakpoints.indexOf(breakpoint);\n\n  return inclusive ? comparison <= 0 : comparison < 0;\n}\n\nfunction isGreaterThanBreakpoint(breakpoint, inclusive = false) {\n  const breakpoints = getBreakpoints();\n  const currentBreakpoint = getBreakpoint();\n  const comparison = breakpoints.indexOf(currentBreakpoint) - breakpoints.indexOf(breakpoint);\n\n  return inclusive ? comparison >= 0 : comparison > 0;\n}\n\nfunction isBreakpoint(...breakpoints) {\n  const currentBreakpoint = getBreakpoint();\n  return breakpoints.some(breakpoint => breakpoint === currentBreakpoint);\n}\n\nfunction onBreakpointChange(eventHandler) {\n  if (eventHandlers.indexOf(eventHandler) === -1) {\n    eventHandlers.push(eventHandler);\n  }\n}\n\nfunction offBreakpointChange(eventHandler) {\n  const index = eventHandlers.indexOf(eventHandler);\n\n  if (index !== -1) {\n    eventHandlers.splice(index, 1);\n  }\n}\n\nexport default {\n  isLessThanBreakpoint,\n  isGreaterThanBreakpoint,\n  isBreakpoint,\n  onBreakpointChange,\n  offBreakpointChange,\n};\n","export default class Quantity {\n  constructor(el) {\n    this.$el = $(el);\n    this.$inputParent = this.$el.find('.form-field--qty-input');\n    this.$input = this.$el.find('[data-quantity-input]');\n    this.$selectParent = this.$el.find('.form-field--qty-select');\n    this.$select = this.$el.find('[data-quantity-select]');\n\n    this._watchSelect = this._watchSelect.bind(this);\n    this._watchInput = this._watchInput.bind(this);\n\n    this.$select.on('change.quantity', this._watchSelect);\n    this.$input.on('change.quantity', this._watchInput);\n  }\n\n  unload() {\n    this.$el.off('.quantity');\n  }\n\n  _validateValue(event) {\n    const baseValue = parseInt(event.currentTarget.value, 10);\n\n    return isNaN(baseValue) ? 1 : baseValue;\n  }\n\n  _watchSelect(event) {\n    const value = this._validateValue(event);\n\n    // Update input to match select\n    this.$input.val(value).trigger('change');\n\n    // Switch to quantity input when 10 or more\n    if (value >= 10) {\n      this.$inputParent\n        .removeClass('hidden')\n        .addClass('visible');\n\n      this.$input\n        .focus()\n        .removeAttr('tabindex')\n        .select();\n\n      this.$selectParent\n        .removeClass('visible')\n        .addClass('hidden');\n\n      this.$select.attr('tabindex', '-1');\n    }\n  }\n\n  _watchInput(event) {\n    this.$input.val(this._validateValue(event));\n  }\n}\n","import $ from 'jquery';\nimport Quantity from './helpers/Quantity';\n\nexport default class Forms {\n  constructor(el, selector = '.form-field-input') {\n    this.$el = $(el);\n    this.filledClass = 'form-field-filled';\n    this.fieldSelector = selector;\n\n    this.quantityItems = [];\n    this.$quantityWrapper = this.$el.find('[data-quantity-wrapper]');\n\n    this._toggleFilled = this._toggleFilled.bind(this);\n    this.$el.on('focus.forms', this.fieldSelector, this._toggleFilled);\n    this.$el.on('blur.forms', this.fieldSelector, this._toggleFilled);\n\n    this._checkFilled();\n\n    if (this.$quantityWrapper.length) {\n      this.$quantityWrapper.each((i, el) => {\n        this.quantityItems.push(\n          new Quantity(el),\n        );\n      });\n    }\n  }\n\n  unload() {\n    this.$el.off('.forms');\n\n    this.quantityItems.forEach(quantityItem => {\n      quantityItem.unload();\n    });\n  }\n\n  _checkFilled() {\n    this.$el.find(this.fieldSelector).each((i, el) => {\n      if ($(el).hasClass(this.filledClass)) return;\n\n      this._toggleFilled(null, el);\n    });\n  }\n\n  _toggleFilled(event = null, el = false) {\n    const target = event ? event.currentTarget : el;\n    const $target = $(target);\n    const { value } = target;\n\n    let isFilled = value.length > 0;\n\n    try {\n      isFilled = isFilled || $target.is(':-webkit-autofill');\n      $target.toggleClass(this.filledClass, isFilled);\n    } catch (e) {\n      $target.toggleClass(this.filledClass, isFilled);\n    }\n  }\n}\n"],"sourceRoot":""}